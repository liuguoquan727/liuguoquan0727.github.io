<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>再读斋</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="像外行一样思考,像专家一样实践。">
<meta property="og:type" content="website">
<meta property="og:title" content="再读斋">
<meta property="og:url" content="http://liuguoquan727.github.io/page/9/index.html">
<meta property="og:site_name" content="再读斋">
<meta property="og:description" content="像外行一样思考,像专家一样实践。">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="再读斋">
<meta name="twitter:description" content="像外行一样思考,像专家一样实践。">
  
    <link rel="alternate" href="/atom.xml" title="再读斋" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    
    <div id="header-inner" class="inner">
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://liuguoquan727.github.io"></form>
      </div>
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives">归档</a>
        
          <a class="main-nav-link" href="/categories">分类</a>
        
          <a class="main-nav-link" href="/tags">标签</a>
        
          <a class="main-nav-link" href="/about">关于</a>
        
      </nav>
      
    </div>
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">再读斋</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">MICHAEL</a>
        </h2>
      
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-Python基础②字符串列表元组" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/07/Python基础②字符串列表元组/" class="article-date">
  <time datetime="2017-05-07T12:54:53.000Z" itemprop="datePublished">2017-05-07 20:54:53</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Python/">Python</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/07/Python基础②字符串列表元组/">Python基础②字符串列表元组</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h2 id="Python字符串"><a href="#Python字符串" class="headerlink" title="Python字符串"></a>Python字符串</h2><p>在Python中，万物皆对象，显然字符串是对象类型，用str表示。字符串类型通常用单引号或者双引号包裹起来。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">"Hello,world"</span></div><div class="line"><span class="string">'Hello,world'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'Hello,world'</span></div><div class="line"><span class="string">'Hello,world'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(<span class="string">"Hello,world"</span>)</div><div class="line">&lt;type <span class="string">'str'</span>&gt;</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h3 id="变量和字符串"><a href="#变量和字符串" class="headerlink" title="变量和字符串"></a>变量和字符串</h3><p>在Python中变量无类型，对象有类型</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="string">"hello,world"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b</div><div class="line"><span class="string">'hello,world'</span></div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> b</div><div class="line">hello,world</div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(b)</div><div class="line">&lt;type <span class="string">'str'</span>&gt;</div></pre></td></tr></table></figure>
<h3 id="连接字符串"><a href="#连接字符串" class="headerlink" title="连接字符串"></a>连接字符串</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">"py"</span> + <span class="string">"thon"</span></div><div class="line"><span class="string">'python'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span></div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">1989</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="string">"free"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> a + b</div><div class="line"></div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;pyshell#195&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    <span class="keyword">print</span> a + b</div><div class="line">TypeError: unsupported operand type(s) <span class="keyword">for</span> +: <span class="string">'int'</span> <span class="keyword">and</span> <span class="string">'str'</span></div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> b + `a` <span class="comment">#反引号将整数a转化为字符串</span></div><div class="line">free1989</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>用“+”拼接起来的字符串的两个对象必须是同一类型的。如果是数字则是求和，如果是字符串则得到一个新的字符串。</p>
<p>还有其他两种方法可以将整数转化为字符串：</p>
<ul>
<li>str():将整数对象转换为字符串对象</li>
</ul>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; print <span class="keyword">b </span>+ <span class="keyword">str(a)</span></div><div class="line"><span class="symbol">free1989</span></div></pre></td></tr></table></figure>
<ul>
<li>repr():相当于反引号``</li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;</span>&gt; print b + repr(a)</div><div class="line">free1989</div></pre></td></tr></table></figure>
<ul>
<li>int():将字符串对象转换为整数对象</li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;</span>&gt; a = <span class="string">"250"</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; b = int(a)</div><div class="line"><span class="meta">&gt;&gt;</span>&gt; b</div><div class="line"><span class="number">250</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; type(b)</div><div class="line">&lt;type <span class="string">'int'</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;</span>&gt;</div></pre></td></tr></table></figure>
<h3 id="转义字符"><a href="#转义字符" class="headerlink" title="转义字符"></a>转义字符</h3><p>在字符串中，总会有一些特殊的符号，就需要用转义符。所谓转义，就是不采用符号本来的含义，而采用另外一含义。下面表格中列出常用的转义符：</p>
<table>
<thead>
<tr>
<th>转义字符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>\</td>
<td>(在行尾时) 续行符</td>
</tr>
<tr>
<td>\</td>
<td>反斜杠符号</td>
</tr>
<tr>
<td>\’</td>
<td>单引号</td>
</tr>
<tr>
<td>\”</td>
<td>双引号</td>
</tr>
<tr>
<td>\a</td>
<td>响铃</td>
</tr>
<tr>
<td>\b</td>
<td>退格(Backspace)</td>
</tr>
<tr>
<td>\e</td>
<td>转义</td>
</tr>
<tr>
<td>\000</td>
<td>空</td>
</tr>
<tr>
<td>\n</td>
<td>换行</td>
</tr>
<tr>
<td>\v</td>
<td>纵向制表符</td>
</tr>
<tr>
<td>\t</td>
<td>横向制表符</td>
</tr>
<tr>
<td>\r</td>
<td>回车</td>
</tr>
<tr>
<td>\f</td>
<td>换页</td>
</tr>
<tr>
<td>\oyy</td>
<td>八进制数，yy代表的字符，例如：\o12代表换行</td>
</tr>
<tr>
<td>\xyy</td>
<td>十六进制数，yy代表的字符，例如：\x0a代表换行</td>
</tr>
<tr>
<td>\other</td>
<td>其它的字符以普通格式输出</td>
</tr>
</tbody>
</table>
<h3 id="原始字符串"><a href="#原始字符串" class="headerlink" title="原始字符串"></a>原始字符串</h3><p>用转义符能够让字符串中的某些符号表示原来的含义，而不是被解析成某种具有特别能力的符号。下面看看这个代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>dos = <span class="string">"c:\news"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>dos</div><div class="line"><span class="string">'c:\news'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> dos <span class="comment">#当用print打印时就出现问题了</span></div><div class="line">c:</div><div class="line">ews</div></pre></td></tr></table></figure>
<p>如何避免上述代码的问题？有两种方法，其一是前面介绍的转义符解决。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>dos = <span class="string">"c:\\news"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> dos</div><div class="line">c:\news</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>其二是声明为原始字符串</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>dos = <span class="string">r"c:\news"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> dos</div><div class="line">c:\news</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>dos = <span class="string">r"c:\news\python"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> dos</div><div class="line">c:\news\python</div></pre></td></tr></table></figure>
<p>如<code>r&quot;c:\news&quot;</code>，由r开头引起的字符串就是声明了后面引号里的东西是原始字符串，在里面放任何字符都表示该字符的原始含义，不需要再用转义符了。</p>
<h3 id="raw-input和print"><a href="#raw-input和print" class="headerlink" title="raw_input和print"></a>raw_input和print</h3><p>下面实现接收和打印用户通过键盘输入的内容：</p>
<p>不过在写这个功能前，要了解函数：</p>
<ul>
<li>Python 2：<code>raw_input()</code></li>
<li>Python 3: <code>input()</code></li>
</ul>
<p>这是Python的内建函数（built-in function）。关于内建函数，可以分别通过下面的链接查看：</p>
<ul>
<li><a href="https://docs.python.org/2/library/functions.html" target="_blank" rel="external">Python 2的内建函数</a></li>
<li><a href="https://docs.python.org/3.5/library/functions.html" target="_blank" rel="external">Python 3的内建函数</a></li>
</ul>
<p>关于Python的内建函数，下面列出来，供参考：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">abs</span>()	<span class="selector-tag">divmod</span>()	<span class="selector-tag">input</span>()	<span class="selector-tag">open</span>()	<span class="selector-tag">staticmethod</span>()</div><div class="line"><span class="keyword">all</span>()	<span class="selector-tag">enumerate</span>()	<span class="selector-tag">int</span>()	<span class="selector-tag">ord</span>()	<span class="selector-tag">str</span>()</div><div class="line"><span class="selector-tag">any</span>()	<span class="selector-tag">eval</span>()	<span class="selector-tag">isinstance</span>()	<span class="selector-tag">pow</span>()	<span class="selector-tag">sum</span>()</div><div class="line"><span class="selector-tag">basestring</span>()	<span class="selector-tag">execfile</span>()	<span class="selector-tag">issubclass</span>()	<span class="selector-tag">print</span>()	<span class="selector-tag">super</span>()</div><div class="line"><span class="selector-tag">bin</span>()	<span class="selector-tag">file</span>()	<span class="selector-tag">iter</span>()	<span class="selector-tag">property</span>()	<span class="selector-tag">tuple</span>()</div><div class="line"><span class="selector-tag">bool</span>()	<span class="selector-tag">filter</span>()	<span class="selector-tag">len</span>()	<span class="selector-tag">range</span>()	<span class="selector-tag">type</span>()</div><div class="line"><span class="selector-tag">bytearray</span>()	<span class="selector-tag">float</span>()	<span class="selector-tag">list</span>()	<span class="selector-tag">raw_input</span>()	<span class="selector-tag">unichr</span>()</div><div class="line"><span class="selector-tag">callable</span>()	<span class="selector-tag">format</span>()	<span class="selector-tag">locals</span>()	<span class="selector-tag">reduce</span>()	<span class="selector-tag">unicode</span>()</div><div class="line"><span class="selector-tag">chr</span>()	<span class="selector-tag">frozenset</span>()	<span class="selector-tag">long</span>()	<span class="selector-tag">reload</span>()	<span class="selector-tag">vars</span>()</div><div class="line"><span class="selector-tag">classmethod</span>()	<span class="selector-tag">getattr</span>()	<span class="selector-tag">map</span>()	<span class="selector-tag">repr</span>()	<span class="selector-tag">xrange</span>()</div><div class="line"><span class="selector-tag">cmp</span>()	<span class="selector-tag">globals</span>()	<span class="selector-tag">max</span>()	<span class="selector-tag">reversed</span>()	<span class="selector-tag">zip</span>()</div><div class="line"><span class="selector-tag">compile</span>()	<span class="selector-tag">hasattr</span>()	<span class="selector-tag">memoryview</span>()	<span class="selector-tag">round</span>()	<span class="selector-tag">__import__</span>()</div><div class="line"><span class="selector-tag">complex</span>()	<span class="selector-tag">hash</span>()	<span class="selector-tag">min</span>()	<span class="selector-tag">set</span>()	</div><div class="line"><span class="selector-tag">delattr</span>()	<span class="selector-tag">help</span>()	<span class="selector-tag">next</span>()	<span class="selector-tag">setattr</span>()	</div><div class="line"><span class="selector-tag">dict</span>()	<span class="selector-tag">hex</span>()	<span class="selector-tag">object</span>()	<span class="selector-tag">slice</span>()	</div><div class="line"><span class="selector-tag">dir</span>()	<span class="selector-tag">id</span>()	<span class="selector-tag">oct</span>()	<span class="selector-tag">sorted</span>()</div></pre></td></tr></table></figure>
<p>怎么才能知道哪个函数怎么用，并且用来干什么的呢？</p>
<ul>
<li>help(abs)命令</li>
<li><p><a href="https://docs.python.org/2/library/functions.html" target="_blank" rel="external">Python的官网https://docs.python.org/2/library/functions.html</a></p>
</li>
<li><p>raw_input</p>
</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; raw_input("input your name: ")</div><div class="line">input your name: michael</div><div class="line">'michael'</div><div class="line">&gt;&gt;&gt; name = raw_input("input your name: ")</div><div class="line">input your name: michael</div><div class="line">&gt;&gt;&gt; name</div><div class="line">'michael'</div><div class="line">&gt;&gt;&gt; type name</div><div class="line">SyntaxError: invalid syntax</div><div class="line">&gt;&gt;&gt; type(name)</div><div class="line">&lt;type 'str'&gt;</div><div class="line">&gt;&gt;&gt; age = raw_input("How old are you? ");</div><div class="line">How old are you? 25  #输入数字</div><div class="line">&gt;&gt;&gt; age</div><div class="line">'25'</div><div class="line">&gt;&gt;&gt; type(age)</div><div class="line">&lt;type 'str'&gt;  #返回仍是str类型</div></pre></td></tr></table></figure>
<ul>
<li>print</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> <span class="string">"Hello, world"</span></div><div class="line">Hello, world</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">"python"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> a</div><div class="line">python</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="string">"good"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> a,b</div><div class="line">python good</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>特别提醒的是，print的返回值默认是以<code>\n</code>结尾的，所以每个输出语句之后自动换行。</p>
<h3 id="索引和切片"><a href="#索引和切片" class="headerlink" title="索引和切片"></a>索引和切片</h3><h4 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h4><p>在Python中，把像字符串这样的对象类型统称为<strong>序列</strong>，顾名思义，序列就是有序排列。在这个序列中，每个人都有编号，编号和每个字符一一对应，在Python中这些编号称为<strong>索引</strong>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>lang = <span class="string">"study python"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lang[<span class="number">0</span>]</div><div class="line"><span class="string">'s'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lang[<span class="number">1</span>]</div><div class="line"><span class="string">'t'</span></div></pre></td></tr></table></figure>
<p>也可以这样做：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">"study python"</span>[<span class="number">0</span>]</div><div class="line"><span class="string">'s'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">"study python"</span>[<span class="number">1</span>]</div><div class="line"><span class="string">'t'</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>通过字符找到其在字符串中的索引值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>lang = <span class="string">"study python"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lang.index(<span class="string">"p"</span>)</div><div class="line"><span class="number">6</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lang.<span class="keyword">in</span></div><div class="line">SyntaxError: invalid syntax</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lang.index(<span class="string">"y"</span>)</div><div class="line"><span class="number">4</span></div></pre></td></tr></table></figure>
<h4 id="切片"><a href="#切片" class="headerlink" title="切片"></a>切片</h4><p>不管是得到一个字符还是多个字符，通过索引得到字符的过程称为<strong>切片</strong>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>lang = <span class="string">"study python"</span></div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lang[<span class="number">2</span>:<span class="number">9</span>] <span class="comment">#得到从2号到9号之间的字符串（包括2号但不包括9号）</span></div><div class="line"><span class="string">'udy pyt'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b = lang[<span class="number">1</span>:] <span class="comment">#得到从1号到最末尾的字符</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b</div><div class="line"><span class="string">'tudy python'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c = lang[:] <span class="comment">#得到所有的字符</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c</div><div class="line"><span class="string">'study python'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>d = lang[:<span class="number">10</span>] <span class="comment">#得到从0到10号之前的字符</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>d</div><div class="line"><span class="string">'study pyth'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lang[<span class="number">1</span>:<span class="number">12</span>] </div><div class="line"><span class="string">'tudy python'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lang[<span class="number">0</span>:<span class="number">13</span>] <span class="comment">#如果第二个数字的长度大于字符串的长度，得到的返回结果就自动到最大长度终止，但是这种获得切片的方法是值得提倡的。特别是如果在循环中，这样做很可能会遇到麻烦。</span></div><div class="line"><span class="string">'study python'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lang[<span class="number">0</span>:<span class="number">14</span>]</div><div class="line"><span class="string">'study python</span></div></pre></td></tr></table></figure>
<p>如果在切片的时候，冒号左右都不写数字，就是前面所操作的<code>c = lang[:]</code>,其结果是变量的值c与源字符串lang一样，即复制了一份，那是不是真的复制呢？下面的方式检验一下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>id(c)</div><div class="line"><span class="number">44841944</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>id(lang)</div><div class="line"><span class="number">44841944</span></div></pre></td></tr></table></figure>
<p>从上面可以看出,两个内存地址一样，说明c和lang两个变量指向的是同一个对象。用<code>c = lang[:]</code>的方式并没有生成一个新的字符串，而是将变量c这个标签页贴在原来那个字符串上了。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>lang = <span class="string">"study python"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c = lang</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>id(c)</div><div class="line"><span class="number">50456160</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>id(lang)</div><div class="line"><span class="number">50456160</span></div></pre></td></tr></table></figure>
<p>上述这种情况，变量c和lang也指向同一个对象。</p>
<h3 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h3><p>所有序列都有如下操作，字符串是序列的子集。</p>
<ul>
<li>len():返回序列长度</li>
<li>+:连接两个序列</li>
<li>*:重复序列元素</li>
<li>in: 判断元素是否存在于序列中</li>
<li>max():返回最大值</li>
<li>min():返回最小值</li>
<li>cmp(str1,str2): 比较两个序列值是否相同</li>
</ul>
<h4 id="“-”连接字符串"><a href="#“-”连接字符串" class="headerlink" title="“+”连接字符串"></a>“+”连接字符串</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>str1 = <span class="string">"study"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>str2 = <span class="string">"python"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>str1 + str2</div><div class="line"><span class="string">'studypython'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>str1 + <span class="string">"--&gt;"</span> + str2</div><div class="line"><span class="string">'study--&gt;python'</span></div></pre></td></tr></table></figure>
<h4 id="in"><a href="#in" class="headerlink" title="in"></a>in</h4><p>in用来判断某个字符串是不是在另外一个字符串内，或者判断某个字符串内是否包含某个字符串，包含则返回True，否则返回false。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>str = <span class="string">"study python"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">"s"</span> <span class="keyword">in</span> str</div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">"i"</span> <span class="keyword">in</span> str</div><div class="line"><span class="keyword">False</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">"su"</span> <span class="keyword">in</span> str</div><div class="line"><span class="keyword">False</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">"stu"</span> <span class="keyword">in</span> str</div><div class="line"><span class="keyword">True</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h4 id="max"><a href="#max" class="headerlink" title="max()"></a>max()</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<blockquote>
<blockquote>
<blockquote>
<p>str = “python”<br>max(str)<br>‘y’<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure></p>
</blockquote>
</blockquote>
</blockquote>
<h4 id="min"><a href="#min" class="headerlink" title="min()"></a>min()</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>str = <span class="string">"python"</span></div><div class="line"><span class="string">'y'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>min(str)</div><div class="line"><span class="string">'h'</span></div></pre></td></tr></table></figure>
<h4 id="cmp"><a href="#cmp" class="headerlink" title="cmp()"></a>cmp()</h4><p>将两个字符串进行比较，首先将字符串中的符号转化为对应的数字，然后再比较</p>
<ul>
<li>如果返回的数值小于0，说明前者小于后者</li>
<li>等于0，表示两者相等</li>
<li>大于0，表示前者大于后者</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>cmp(<span class="string">"aaa"</span>,<span class="string">"abc"</span>)  <span class="comment">#</span></div><div class="line"><span class="number">-1</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>cmp(<span class="string">"abc"</span>,<span class="string">"aaa"</span>);</div><div class="line"><span class="number">1</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>cmp(<span class="string">"abc"</span>,<span class="string">"abc"</span>);</div><div class="line"><span class="number">0</span></div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>ord(<span class="string">"a"</span>) <span class="comment">#返回字符的ASCII值</span></div><div class="line"><span class="number">97</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>chr(<span class="number">97</span>)  <span class="comment">#返回ASCII值所对应的字符</span></div><div class="line"><span class="string">'a'</span></div></pre></td></tr></table></figure>
<h4 id="“-”"><a href="#“-”" class="headerlink" title="“*”"></a>“*”</h4><p>以指定的次数重复打印字符串</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>str = <span class="string">"python"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>str * <span class="number">4</span></div><div class="line"><span class="string">'pythonpythonpythonpython'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> <span class="string">"-"</span> * <span class="number">20</span></div><div class="line">--------------------</div></pre></td></tr></table></figure>
<h4 id="len"><a href="#len" class="headerlink" title="len()"></a>len()</h4><p>len()返回字符串的长度，返回值类型是int型</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">"hello"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>m = len(a)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>m</div><div class="line"><span class="number">5</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(m)</div><div class="line">&lt;type <span class="string">'int'</span>&gt;</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h3 id="常用的字符串方法"><a href="#常用的字符串方法" class="headerlink" title="常用的字符串方法"></a>常用的字符串方法</h3><p>字符串的方法有很多，可以通过dir来查看：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;</span>&gt; dir(str)</div><div class="line">[<span class="string">'__add__'</span>, <span class="string">'__class__'</span>, <span class="string">'__contains__'</span>, <span class="string">'__delattr__'</span>, <span class="string">'__doc__'</span>, <span class="string">'__eq__'</span>, <span class="string">'__format__'</span>, <span class="string">'__ge__'</span>, <span class="string">'__getattribute__'</span>, <span class="string">'__getitem__'</span>, <span class="string">'__getnewargs__'</span>, <span class="string">'__getslice__'</span>, <span class="string">'__gt__'</span>, <span class="string">'__hash__'</span>, <span class="string">'__init__'</span>, <span class="string">'__le__'</span>, <span class="string">'__len__'</span>, <span class="string">'__lt__'</span>, <span class="string">'__mod__'</span>, <span class="string">'__mul__'</span>, <span class="string">'__ne__'</span>, <span class="string">'__new__'</span>, <span class="string">'__reduce__'</span>, <span class="string">'__reduce_ex__'</span>, <span class="string">'__repr__'</span>, <span class="string">'__rmod__'</span>, <span class="string">'__rmul__'</span>, <span class="string">'__setattr__'</span>, <span class="string">'__sizeof__'</span>, <span class="string">'__str__'</span>, <span class="string">'__subclasshook__'</span>, <span class="string">'_formatter_field_name_split'</span>, <span class="string">'_formatter_parser'</span>, <span class="string">'capitalize'</span>, <span class="string">'center'</span>, <span class="string">'count'</span>, <span class="string">'decode'</span>, <span class="string">'encode'</span>, <span class="string">'endswith'</span>, <span class="string">'expandtabs'</span>, <span class="string">'find'</span>, <span class="string">'format'</span>, <span class="string">'index'</span>, <span class="string">'isalnum'</span>, <span class="string">'isalpha'</span>, <span class="string">'isdigit'</span>, <span class="string">'islower'</span>, <span class="string">'isspace'</span>, <span class="string">'istitle'</span>, <span class="string">'isupper'</span>, <span class="string">'join'</span>, <span class="string">'ljust'</span>, <span class="string">'lower'</span>, <span class="string">'lstrip'</span>, <span class="string">'partition'</span>, <span class="string">'replace'</span>, <span class="string">'rfind'</span>, <span class="string">'rindex'</span>, <span class="string">'rjust'</span>, <span class="string">'rpartition'</span>, <span class="string">'rsplit'</span>, <span class="string">'rstrip'</span>, <span class="string">'split'</span>, <span class="string">'splitlines'</span>, <span class="string">'startswith'</span>, <span class="string">'strip'</span>, <span class="string">'swapcase'</span>, <span class="string">'title'</span>, <span class="string">'translate'</span>, <span class="string">'upper'</span>, <span class="string">'zfill'</span>]</div></pre></td></tr></table></figure>
<h4 id="判断字符串是否全是字母"><a href="#判断字符串是否全是字母" class="headerlink" title="判断字符串是否全是字母"></a>判断字符串是否全是字母</h4><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;</span>&gt; <span class="string">"python"</span>.isalpha()  <span class="comment">#字符串全是字母，返回TRUE</span></div><div class="line">True</div><div class="line"><span class="meta">&gt;&gt;</span>&gt; <span class="string">"2python"</span>.isalpha() <span class="comment">#字符串含有非字母，返回FALSE</span></div><div class="line">False</div><div class="line"><span class="meta">&gt;&gt;</span>&gt;</div></pre></td></tr></table></figure>
<h4 id="分割字符串"><a href="#分割字符串" class="headerlink" title="分割字符串"></a>分割字符串</h4><p>split()作用是将字符串根据某个分隔符进行分割。</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;</span>&gt; str = <span class="string">"I love Beijing"</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; str.split(<span class="string">" "</span>)</div><div class="line">[<span class="string">'I'</span>, <span class="string">'love'</span>, <span class="string">'Beijing'</span>]  <span class="comment">#返回值为名叫列表（list）的类型</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; str = <span class="string">"www.baidu.com"</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; str.split(<span class="string">","</span>)</div><div class="line">[<span class="string">'www'</span>, <span class="string">'baidu'</span>, <span class="string">'com'</span>]</div><div class="line"><span class="meta">&gt;&gt;</span>&gt;</div></pre></td></tr></table></figure>
<h4 id="去掉字符串两头的空格"><a href="#去掉字符串两头的空格" class="headerlink" title="去掉字符串两头的空格"></a>去掉字符串两头的空格</h4><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;</span>&gt; str = <span class="string">"  python  "</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; str.strip()  <span class="comment">#去掉字符串左右空格</span></div><div class="line"><span class="string">'python'</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; str.lstrip() <span class="comment">#去掉字符串左边空格</span></div><div class="line"><span class="string">'python  '</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; str.rstrip() <span class="comment">#去掉字符串右边空格</span></div><div class="line"><span class="string">'  python'</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt;</div></pre></td></tr></table></figure>
<h4 id="字符大小写转换"><a href="#字符大小写转换" class="headerlink" title="字符大小写转换"></a>字符大小写转换</h4><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;</span>&gt; str = <span class="string">"pyThon"</span> </div><div class="line"><span class="meta">&gt;&gt;</span>&gt; str.upper() <span class="comment">#将小写字母完全变为大写字母</span></div><div class="line"><span class="string">'PYTHON'</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; str.lower() <span class="comment">#将大写字母完全变成小写字母</span></div><div class="line"><span class="string">'python'</span></div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; str.isupper() <span class="comment">#判断是否全是大写字母</span></div><div class="line">False</div><div class="line"><span class="meta">&gt;&gt;</span>&gt; str.islower() <span class="comment">#判断是否全是小写字母</span></div><div class="line">False</div><div class="line"><span class="meta">&gt;&gt;</span>&gt; str = <span class="string">"this is book"</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; str.capitalize() <span class="comment">#把所有单词的第一个字母转化为小写字母</span></div><div class="line"><span class="string">'This is book'</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; str.istitle() <span class="comment">#判断每个单词的第一个字母是否为大写字母</span></div><div class="line">False</div><div class="line"><span class="meta">&gt;&gt;</span>&gt;</div></pre></td></tr></table></figure>
<h4 id="join连接字符串"><a href="#join连接字符串" class="headerlink" title="join连接字符串"></a>join连接字符串</h4><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;</span>&gt; b = <span class="string">"www.baidu.com"</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; c = b.split(<span class="string">"."</span>)</div><div class="line"><span class="meta">&gt;&gt;</span>&gt; c</div><div class="line">[<span class="string">'www'</span>, <span class="string">'baidu'</span>, <span class="string">'com'</span>]</div><div class="line"><span class="meta">&gt;&gt;</span>&gt; <span class="string">"."</span>.join(c)</div><div class="line"><span class="string">'www.baidu.com'</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; <span class="string">"**"</span>.join(c)</div><div class="line"><span class="string">'www**baidu**com'</span></div></pre></td></tr></table></figure>
<h3 id="字符串格式化输出"><a href="#字符串格式化输出" class="headerlink" title="字符串格式化输出"></a>字符串格式化输出</h3><h4 id="使用占位符"><a href="#使用占位符" class="headerlink" title="使用占位符"></a>使用占位符</h4><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;</span>&gt; <span class="string">"I like %s"</span> % <span class="string">"Python"</span> <span class="comment">#%s表示字符串</span></div><div class="line"><span class="string">'I like Python'</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; <span class="string">"%d years old"</span> % <span class="number">25</span> <span class="comment">#%d表示整数</span></div><div class="line"><span class="string">'25 years old'</span></div><div class="line"><span class="string">"I like 'python'"</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; <span class="string">"%s is %d years old"</span> % (<span class="string">"deason"</span>,<span class="number">25</span>)</div><div class="line"><span class="string">'deason is 25 years old'</span></div></pre></td></tr></table></figure>
<ul>
<li>%s 字符串（采用str()的显示）</li>
<li>%r 字符串（采用repr（）的显示）</li>
<li>%c 单个字符</li>
<li>%b 二进制整数</li>
<li>%d 十进制整数</li>
<li>%e 指数（底数为e）</li>
<li>%f 浮点数</li>
</ul>
<h4 id="使用format格式化"><a href="#使用format格式化" class="headerlink" title="使用format格式化"></a>使用format格式化</h4><p>{}作为占位符</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;</span>&gt; str = <span class="string">"I like &#123;&#125;"</span>.format(<span class="string">"python"</span>);</div><div class="line">&gt;&gt;&gt; str</div><div class="line"><span class="string">'I like python'</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; str = <span class="string">"&#123;0&#125; is &#123;1&#125; years old"</span>.format(<span class="string">"michael"</span>,<span class="number">25</span>)</div><div class="line"><span class="meta">&gt;&gt;</span>&gt; str</div><div class="line"><span class="string">'michael is 25 years old'</span></div></pre></td></tr></table></figure>
<h4 id="字典式格式化"><a href="#字典式格式化" class="headerlink" title="字典式格式化"></a>字典式格式化</h4><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;</span>&gt; lang = <span class="string">"python"</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; print <span class="string">"I love %(program)s"</span> <span class="string">%&#123;"program":lang&#125;</span></div><div class="line">I love python</div><div class="line"><span class="meta">&gt;&gt;</span>&gt; print <span class="string">"I love %(program)s"</span> <span class="string">%&#123;"program":"python"&#125;</span></div><div class="line">I love python</div></pre></td></tr></table></figure>
<p>综上，推荐使用:string.format()</p>
<h2 id="Python列表"><a href="#Python列表" class="headerlink" title="Python列表"></a>Python列表</h2><p>此前已经知道了Python的三种对象类型：int、float和str。下面开始学习一种新的Python对象类型：list。list在Python中具有非常强大的功能。</p>
<h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>在Python中，用方括号表示一个list：[]，方括号里面的元素类型，可以是int型数据，也可以是str类型的数据，甚至也可以是bool类型数据。而像Java语言，数组里面只能存在一种类型的数据。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a=[]  <span class="comment">#定义了一个空的列表，变量a相当于一个贴在其上的标签</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(a)  <span class="comment">#用内置函数type()查看变量a引用对象的类型，为list</span></div><div class="line">&lt;type <span class="string">'list'</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>bool(a) <span class="comment">#用内置函数bool()查看a的布尔值，因为是空，所以为False</span></div><div class="line"><span class="keyword">False</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> a</div><div class="line">[]</div></pre></td></tr></table></figure>
<p>下面看看list具体的使用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a=[<span class="string">'a'</span>,<span class="number">3</span>,<span class="string">'hello'</span>,<span class="keyword">True</span>]  <span class="comment">#list中可以有多中数据类型</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="string">'a'</span>, <span class="number">3</span>, <span class="string">'hello'</span>, <span class="keyword">True</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(a)</div><div class="line">&lt;type <span class="string">'list'</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>bool(a)</div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> a</div><div class="line">[<span class="string">'a'</span>, <span class="number">3</span>, <span class="string">'hello'</span>, <span class="keyword">True</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">3</span>]</div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(a[<span class="number">3</span>])</div><div class="line">&lt;type <span class="string">'bool'</span>&gt;</div></pre></td></tr></table></figure>
<h3 id="索引和切片-1"><a href="#索引和切片-1" class="headerlink" title="索引和切片"></a>索引和切片</h3><h4 id="索引-1"><a href="#索引-1" class="headerlink" title="索引"></a>索引</h4><p>和字符串中的索引类似，只不过list是以元素为单位，而不是以字符为单位进行索引。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a=[<span class="number">2</span>,<span class="number">3</span>,<span class="keyword">True</span>,<span class="string">"Hello,world"</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="number">2</span>, <span class="number">3</span>, <span class="keyword">True</span>, <span class="string">'Hello,world'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">0</span>]</div><div class="line"><span class="number">2</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">1</span>]</div><div class="line"><span class="number">3</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">2</span>]</div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">3</span>]</div><div class="line"><span class="string">'Hello,world'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(a[<span class="number">0</span>])</div><div class="line">&lt;type <span class="string">'int'</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(a[<span class="number">2</span>])</div><div class="line">&lt;type <span class="string">'bool'</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(a[<span class="number">3</span>])</div><div class="line">&lt;type <span class="string">'str'</span>&gt;</div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.index(<span class="number">2</span>)</div><div class="line"><span class="number">0</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.index(<span class="number">3</span>)</div><div class="line"><span class="number">1</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.index(<span class="keyword">True</span>)</div><div class="line"><span class="number">2</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.index(<span class="string">"Hello,world"</span>)</div><div class="line"><span class="number">3</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h4 id="切片-1"><a href="#切片-1" class="headerlink" title="切片"></a>切片</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst = [<span class="string">'python'</span>,<span class="string">'java'</span>,<span class="string">'c++'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst[<span class="number">-1</span>]</div><div class="line"><span class="string">'c++'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst[<span class="number">-3</span>:<span class="number">-1</span>]</div><div class="line">[<span class="string">'python'</span>, <span class="string">'java'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst[<span class="number">-1</span>:<span class="number">-3</span>]</div><div class="line">[]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst[<span class="number">0</span>:<span class="number">3</span>]</div><div class="line">[<span class="string">'python'</span>, <span class="string">'java'</span>, <span class="string">'c++'</span>]</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>序列的切片，一定要左边的数字小于右边的数字，lst[-1:-3]就没有遵守这个规则，返回的是一个空。</p>
<h3 id="反转"><a href="#反转" class="headerlink" title="反转"></a>反转</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>mList = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>mList[::<span class="number">-1</span>]</div><div class="line">[<span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>m</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>mList</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>当然，也可以对字符串进行反转:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>lang=<span class="string">"python"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lang[::<span class="number">-1</span>]</div><div class="line"><span class="string">'nohtyp'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lang</div><div class="line"><span class="string">'python'</span></div></pre></td></tr></table></figure>
<p>可以看出，不管是str还是list，反转之后原来的值没有改变。这说明，这里的反转不是把原来的值倒过来，而是新生成了一个值，生成的值跟原来的值相比是倒过来的。</p>
<p>Python还有一种方法使list反转，且比较容易阅读和理解，特别推荐：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">mList = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">7</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list(reversed(mList))</div><div class="line">[<span class="number">7</span>, <span class="number">8</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]</div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s=<span class="string">'abcd'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list(reversed(s))</div><div class="line">[<span class="string">'d'</span>, <span class="string">'c'</span>, <span class="string">'b'</span>, <span class="string">'a'</span>]</div><div class="line"><span class="string">'abcd'</span></div></pre></td></tr></table></figure>
<h3 id="对list的操作"><a href="#对list的操作" class="headerlink" title="对list的操作"></a>对list的操作</h3><h4 id="len-1"><a href="#len-1" class="headerlink" title="len()"></a>len()</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst=[<span class="string">'python'</span>,<span class="string">'java'</span>,<span class="string">'c++'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>len(lst)</div><div class="line"><span class="number">3</span></div></pre></td></tr></table></figure>
<h4 id="连接连个序列"><a href="#连接连个序列" class="headerlink" title="+,连接连个序列"></a>+,连接连个序列</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst=[<span class="string">'python'</span>,<span class="string">'java'</span>,<span class="string">'c++'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst</div><div class="line">[<span class="string">'python'</span>, <span class="string">'java'</span>, <span class="string">'c++'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>alst =[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst + alst</div><div class="line">[<span class="string">'python'</span>, <span class="string">'java'</span>, <span class="string">'c++'</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</div></pre></td></tr></table></figure>
<h4 id="重复元素"><a href="#重复元素" class="headerlink" title="*,重复元素"></a>*,重复元素</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst * <span class="number">3</span></div><div class="line">[<span class="string">'python'</span>, <span class="string">'java'</span>, <span class="string">'c++'</span>, <span class="string">'python'</span>, <span class="string">'java'</span>, <span class="string">'c++'</span>, <span class="string">'python'</span>, <span class="string">'java'</span>, <span class="string">'c++'</span>]</div></pre></td></tr></table></figure>
<h4 id="in-1"><a href="#in-1" class="headerlink" title="in"></a>in</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'python'</span> <span class="keyword">in</span> lst</div><div class="line"><span class="keyword">True</span></div></pre></td></tr></table></figure>
<h4 id="max-和min"><a href="#max-和min" class="headerlink" title="max()和min()"></a>max()和min()</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>max(alst)</div><div class="line"><span class="number">5</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>min(alst)</div><div class="line"><span class="number">1</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>max(lst)</div><div class="line"><span class="string">'python'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>min(lst)</div><div class="line"><span class="string">'c++'</span></div></pre></td></tr></table></figure>
<h4 id="cmp-1"><a href="#cmp-1" class="headerlink" title="cmp()"></a>cmp()</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="number">2</span>,<span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b = [<span class="number">2</span>,<span class="number">4</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>cmp(a,b)</div><div class="line"><span class="number">-1</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>cmp(b,a)</div><div class="line"><span class="number">1</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c=[<span class="number">2</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>cmp(a,c)</div><div class="line"><span class="number">1</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>d=[<span class="string">'2'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>cmp(a,d)</div><div class="line"><span class="number">-1</span></div></pre></td></tr></table></figure>
<h4 id="追加元素"><a href="#追加元素" class="headerlink" title="追加元素"></a>追加元素</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst</div><div class="line">[<span class="string">'python'</span>, <span class="string">'java'</span>, <span class="string">'c++'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst.append(<span class="string">"html5"</span>) <span class="comment">#将元素追加到list的尾部</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst</div><div class="line">[<span class="string">'python'</span>, <span class="string">'java'</span>, <span class="string">'c++'</span>, <span class="string">'html5'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst.append(<span class="number">100</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst</div><div class="line">[<span class="string">'python'</span>, <span class="string">'java'</span>, <span class="string">'c++'</span>, <span class="string">'html5'</span>, <span class="number">100</span>]</div></pre></td></tr></table></figure>
<p>等价于：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst</div><div class="line">[<span class="string">'python'</span>, <span class="string">'java'</span>, <span class="string">'c++'</span>, <span class="string">'html5'</span>, <span class="number">100</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst[len(lst):] = [<span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst</div><div class="line">[<span class="string">'python'</span>, <span class="string">'java'</span>, <span class="string">'c++'</span>, <span class="string">'html5'</span>, <span class="number">100</span>, <span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>len(lst)</div><div class="line"><span class="number">6</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst[<span class="number">6</span>:]=[<span class="string">'javascript'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst</div><div class="line">[<span class="string">'python'</span>, <span class="string">'java'</span>, <span class="string">'c++'</span>, <span class="string">'html5'</span>, <span class="number">100</span>, <span class="number">3</span>, <span class="string">'javascript'</span>]</div></pre></td></tr></table></figure></p>
<h3 id="列表的函数"><a href="#列表的函数" class="headerlink" title="列表的函数"></a>列表的函数</h3><p>list是Python中的苦力，那么它都有哪些函数呢？</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>dir(list)</div><div class="line">[<span class="string">'__add__'</span>, <span class="string">'__class__'</span>, <span class="string">'__contains__'</span>, <span class="string">'__delattr__'</span>, <span class="string">'__delitem__'</span>, <span class="string">'__delslice__'</span>, <span class="string">'__doc__'</span>, <span class="string">'__eq__'</span>, <span class="string">'__format__'</span>, <span class="string">'__ge__'</span>, <span class="string">'__getattribute__'</span>, <span class="string">'__getitem__'</span>, <span class="string">'__getslice__'</span>, <span class="string">'__gt__'</span>, <span class="string">'__hash__'</span>, <span class="string">'__iadd__'</span>, <span class="string">'__imul__'</span>, <span class="string">'__init__'</span>, <span class="string">'__iter__'</span>, <span class="string">'__le__'</span>, <span class="string">'__len__'</span>, <span class="string">'__lt__'</span>, <span class="string">'__mul__'</span>, <span class="string">'__ne__'</span>, <span class="string">'__new__'</span>, <span class="string">'__reduce__'</span>, <span class="string">'__reduce_ex__'</span>, <span class="string">'__repr__'</span>, <span class="string">'__reversed__'</span>, <span class="string">'__rmul__'</span>, <span class="string">'__setattr__'</span>, <span class="string">'__setitem__'</span>, <span class="string">'__setslice__'</span>, <span class="string">'__sizeof__'</span>, <span class="string">'__str__'</span>, <span class="string">'__subclasshook__'</span>, <span class="string">'append'</span>, <span class="string">'count'</span>, <span class="string">'extend'</span>, <span class="string">'index'</span>, <span class="string">'insert'</span>, <span class="string">'pop'</span>, <span class="string">'remove'</span>, <span class="string">'reverse'</span>, <span class="string">'sort'</span>]</div></pre></td></tr></table></figure>
<p>先不管以双下划线开始和结尾的函数，就剩下以下几个</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="string">'append'</span>, <span class="string">'count'</span>, <span class="string">'extend'</span>, <span class="string">'index'</span>, <span class="string">'insert'</span>, <span class="string">'pop'</span>, <span class="string">'remove'</span>, <span class="string">'reverse'</span>, <span class="string">'sort'</span></div></pre></td></tr></table></figure>
<h4 id="append和extend"><a href="#append和extend" class="headerlink" title="append和extend"></a>append和extend</h4><p>list.append(x),是将某个元素x添加到已知的一个列表的尾部。</p>
<p>list.extend(L),则是将两个列表合并，或者说将列表L追加到列表list中。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b=[<span class="string">"lau"</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.extend(b)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="string">'lau'</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b</div><div class="line">[<span class="string">'lau'</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b=<span class="string">"abc"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.extend(b)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c = <span class="number">5</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.extend(c) </div><div class="line"></div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;pyshell#20&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    a.extend(c)</div><div class="line">TypeError: <span class="string">'int'</span> object <span class="keyword">is</span> <span class="keyword">not</span> iterable</div></pre></td></tr></table></figure>
<p>如果extend的参数对象是数值型则报错。<br>所以，extend的参数对象是一个list，如果是str，则Python会先把它按照字符为单位转化为list再添加到目标list中。官方文档指出extend的元素对象必须是iterable（可迭代的）。</p>
<p><strong>判断一个对象是不是可迭代的？</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s=<span class="string">"python"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>hasattr(s,<span class="string">'__iter__'</span>)</div><div class="line"><span class="keyword">False</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>hasattr(a,<span class="string">'__iter__'</span>)</div><div class="line"><span class="keyword">True</span></div></pre></td></tr></table></figure>
<p>通过内建函数hasattr()判断一个对象是不是可迭代的，它的判断本质就是看那个类型中是否有<code>__iter__</code>函数。</p>
<p><strong>append和extend函数的相同点</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b=[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>id(a)</div><div class="line"><span class="number">49822856</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>id(b)</div><div class="line"><span class="number">50066536</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.extend(b)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>id(a)</div><div class="line"><span class="number">49822856</span></div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>id(a)</div><div class="line"><span class="number">50068376</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.append(<span class="number">12</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">12</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>id(a)</div><div class="line"><span class="number">50068376</span></div></pre></td></tr></table></figure>
<p>由上面两段代码可知，append和extend函数的共同点：</p>
<ul>
<li>都是原地址修改列表，不会创建一个新的列表</li>
<li>没有返回值</li>
</ul>
<p><strong>append和extend函数的不同点</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst.append([<span class="string">"python"</span>,<span class="string">"java"</span>])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, [<span class="string">'python'</span>, <span class="string">'java'</span>]]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>len(lst)</div><div class="line"><span class="number">4</span></div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst2=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst2.extend([<span class="string">"python"</span>,<span class="string">"java"</span>])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst2</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="string">'python'</span>, <span class="string">'java'</span>]</div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>len(lst2)</div><div class="line"><span class="number">5</span></div></pre></td></tr></table></figure>
<p>可知，append是整体的追加，extend是单个的追加</p>
<h4 id="count"><a href="#count" class="headerlink" title="count"></a>count</h4><p>count的作用是计算某个元素在该list中出现的次数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.count(<span class="number">1</span>)</div><div class="line"><span class="number">4</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.append(<span class="string">'a'</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.append(<span class="string">'a'</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="string">'a'</span>, <span class="string">'a'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.count(<span class="string">'a'</span>)</div><div class="line"><span class="number">2</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.count(<span class="number">4</span>) <span class="comment">#不存在，则返回为0</span></div><div class="line"><span class="number">0</span></div></pre></td></tr></table></figure>
<h4 id="index"><a href="#index" class="headerlink" title="index"></a>index</h4><p>index计算元素在该列表首次出现的位置</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">5</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.index(<span class="number">4</span>)</div><div class="line"><span class="number">3</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.index(<span class="number">6</span>) <span class="comment">#如果不存，就报错</span></div><div class="line"></div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;pyshell#85&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    a.index(<span class="number">6</span>)</div><div class="line">ValueError: <span class="number">6</span> <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">in</span> list</div></pre></td></tr></table></figure>
<h4 id="insert"><a href="#insert" class="headerlink" title="insert"></a>insert</h4><p>list.insert(i,x),想列表中指定的位置插入元素x。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.insert(<span class="number">0</span>,<span class="number">0</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.insert(<span class="number">3</span>,<span class="number">7</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.insert(<span class="number">8</span>,<span class="number">4</span>)  <span class="comment">#若超出列表长度，则将元素插入到列表末尾</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">4</span>]</div></pre></td></tr></table></figure>
<h4 id="pop和remove"><a href="#pop和remove" class="headerlink" title="pop和remove"></a>pop和remove</h4><p>删除列表中元素的方法有两个，分别是：</p>
<ul>
<li>list.remove(x)</li>
</ul>
<p>删除列表中首次出现的元素x，如果不存在元素x，则报错</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">4</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.remove(<span class="number">4</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">4</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.remove(<span class="number">6</span>)</div><div class="line"></div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;pyshell#103&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    a.remove(<span class="number">6</span>)</div><div class="line">ValueError: list.remove(x): x <span class="keyword">not</span> <span class="keyword">in</span> list</div></pre></td></tr></table></figure>
<ul>
<li>list.pop([i])</li>
</ul>
<p>删除列表中位置i的元素并且返回该元素。如果没有指定位置i，则默认删除并返回列表的最后一个元素。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.pop(<span class="number">0</span>) <span class="comment">#删除指定位置0</span></div><div class="line"><span class="number">0</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">4</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.pop() <span class="comment">#删除默认位置</span></div><div class="line"><span class="number">4</span>  </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">5</span>]</div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.pop(<span class="number">5</span>) <span class="comment">#超过列表长度则会报错</span></div><div class="line"></div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;pyshell#116&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    a.pop(<span class="number">5</span>)</div><div class="line">IndexError: pop index out of range</div></pre></td></tr></table></figure>
<h4 id="reverse"><a href="#reverse" class="headerlink" title="reverse"></a>reverse</h4><p>将列表的元素顺序反过来,不会创建新的列表，因此没有返回值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.reverse()</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="number">7</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a=[<span class="string">'ss'</span>,<span class="string">'aaa'</span>,<span class="string">'dd'</span>]</div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.reverse()</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="string">'dd'</span>, <span class="string">'aaa'</span>, <span class="string">'ss'</span>]</div></pre></td></tr></table></figure>
<h4 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h4><p>sort是对列表进行排序，不会创建新的列表，因此没有返回值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a=[<span class="number">1</span>,<span class="number">3</span>,<span class="number">9</span>,<span class="number">7</span>,<span class="number">5</span>] </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.sort() <span class="comment">#默认从小到大的排序</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.sort(reverse = <span class="keyword">True</span>) <span class="comment">#从大到小的排序</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="number">9</span>, <span class="number">7</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">1</span>]</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst=[<span class="string">"python"</span>,<span class="string">"java"</span>,<span class="string">"c"</span>,<span class="string">"basic"</span>,<span class="string">"ruby"</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst.sort(key=len) <span class="comment">#以字符串长度为关键词进行排序</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst</div><div class="line">[<span class="string">'c'</span>, <span class="string">'java'</span>, <span class="string">'ruby'</span>, <span class="string">'basic'</span>, <span class="string">'python'</span>]</div></pre></td></tr></table></figure>
<h2 id="比较列表和字符串"><a href="#比较列表和字符串" class="headerlink" title="比较列表和字符串"></a>比较列表和字符串</h2><h3 id="相同点"><a href="#相同点" class="headerlink" title="相同点"></a>相同点</h3><ul>
<li>都属于序列，因此那些属于序列的操作对两者都适用</li>
</ul>
<h3 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h3><ul>
<li>最大区别是，列表自身可以改变，字符串自身不可以改变</li>
<li>字符串只能通过创建一个新的str来改变，新的str不是原来的字符串对象</li>
</ul>
<h3 id="多维列表"><a href="#多维列表" class="headerlink" title="多维列表"></a>多维列表</h3><ul>
<li>在字符串中，每个元素只能是字符</li>
<li>在列表中，每个元素可以是任何类型</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>matrix=[[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>],[<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>]]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(matrix)</div><div class="line">&lt;type <span class="string">'list'</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>matrix[<span class="number">0</span>][<span class="number">1</span>]</div><div class="line"><span class="number">2</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>matrix[<span class="number">0</span>]</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div></pre></td></tr></table></figure>
<h3 id="列表和字符串的相互转化"><a href="#列表和字符串的相互转化" class="headerlink" title="列表和字符串的相互转化"></a>列表和字符串的相互转化</h3><h4 id="str-split"><a href="#str-split" class="headerlink" title="str.split()"></a>str.split()</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>line=<span class="string">"hello I am good"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>line.split(<span class="string">" "</span>)</div><div class="line">[<span class="string">'hello'</span>, <span class="string">'I'</span>, <span class="string">'am'</span>, <span class="string">'good'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = line.split(<span class="string">" "</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="string">'hello'</span>, <span class="string">'I'</span>, <span class="string">'am'</span>, <span class="string">'good'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(a)</div><div class="line">&lt;type <span class="string">'list'</span>&gt;</div></pre></td></tr></table></figure>
<h4 id="“split”-join-list"><a href="#“split”-join-list" class="headerlink" title="“split”.join(list)"></a>“split”.join(list)</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="string">'hello'</span>, <span class="string">'I'</span>, <span class="string">'am'</span>, <span class="string">'good'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(a)</div><div class="line">&lt;type <span class="string">'list'</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">" "</span>.join(a)</div><div class="line"><span class="string">'hello I am good'</span></div></pre></td></tr></table></figure>
<h2 id="Python元组"><a href="#Python元组" class="headerlink" title="Python元组"></a>Python元组</h2><h3 id="定义-1"><a href="#定义-1" class="headerlink" title="定义"></a>定义</h3><p>元组（tuple）是用圆括号括起来的，元素之间用逗号隔开。</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;</span>&gt; t = <span class="number">123</span>,<span class="string">'abc'</span>,[<span class="string">"come"</span>,<span class="string">"here"</span>]</div><div class="line"><span class="meta">&gt;&gt;</span>&gt; t</div><div class="line">(<span class="number">123</span>, <span class="string">'abc'</span>, [<span class="string">'come'</span>, <span class="string">'here'</span>])</div><div class="line"><span class="meta">&gt;&gt;</span>&gt; type(t)</div><div class="line">&lt;type <span class="string">'tuple'</span>&gt;</div></pre></td></tr></table></figure>
<p>元组也是一种序列，这一点与列表、字符串类似。有以下特点：</p>
<ul>
<li>元组其中的元素不能更改，和字符串类似</li>
<li>元组中的元素可以是任何类型的数据，和列表类似</li>
</ul>
<h3 id="索引和切片-2"><a href="#索引和切片-2" class="headerlink" title="索引和切片"></a>索引和切片</h3><p>元组的索引和切片的基本操作和字符串、列表是一样的。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>t</div><div class="line">(<span class="number">123</span>, <span class="string">'abc'</span>, [<span class="string">'come'</span>, <span class="string">'here'</span>])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>t[<span class="number">2</span>]</div><div class="line">[<span class="string">'come'</span>, <span class="string">'here'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>t[<span class="number">1</span>:]</div><div class="line">(<span class="string">'abc'</span>, [<span class="string">'come'</span>, <span class="string">'here'</span>])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>t[<span class="number">2</span>][<span class="number">0</span>]</div><div class="line"><span class="string">'come'</span></div></pre></td></tr></table></figure>
<p>特别注意：如果一个元组中只有一个元素，应该在该元素后面加上一个半角的英文逗号：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a=(<span class="number">3</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(a)</div><div class="line">&lt;type <span class="string">'int'</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a=(<span class="number">3</span>,) <span class="comment">#加了逗号就是元组</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(a)</div><div class="line">&lt;type <span class="string">'tuple'</span>&gt;</div></pre></td></tr></table></figure>
<p>列表和元组之间可以实现转换，分别使用list()和tuple()</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>t</div><div class="line">(<span class="number">123</span>, <span class="string">'abc'</span>, [<span class="string">'come'</span>, <span class="string">'here'</span>])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>tlst = list(t)   <span class="comment"># tuple---&gt;list</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>tlst</div><div class="line">[<span class="number">123</span>, <span class="string">'abc'</span>, [<span class="string">'come'</span>, <span class="string">'here'</span>]]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(tlst)</div><div class="line">&lt;type <span class="string">'list'</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>t_tuple = tuple(tlst)  <span class="comment">#list---&gt;tuple</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>t_tuple</div><div class="line">(<span class="number">123</span>, <span class="string">'abc'</span>, [<span class="string">'come'</span>, <span class="string">'here'</span>])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(t_tuple)</div><div class="line">&lt;type <span class="string">'tuple'</span>&gt;</div></pre></td></tr></table></figure>
<h3 id="用途"><a href="#用途" class="headerlink" title="用途"></a>用途</h3><ul>
<li>元组比列表操作速度快。如果定义了一个值的常量集，并且唯一要用它做的是不断地遍历它，请使用元组代替列表</li>
<li>如果对不需要修改的数据进行“写保护”，可以使代码更安全，这时使用元组而不是列表。如果必须要改变这些值，则需要执行元组到列表的转换。</li>
<li>元组可以在字典中被用作key，但是列表不行。因为字典的key必须是不可变的，元组本身是不可变的。</li>
<li>元组可以用在字符串格式化中。</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://liuguoquan727.github.io/2017/05/07/Python基础②字符串列表元组/" data-id="cj6f2gfob00964h19knim9smp" class="article-share-link">分享</a>
      
        <a href="http://liuguoquan727.github.io/2017/05/07/Python基础②字符串列表元组/#ds-thread" class="article-comment-link">留言</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python基础/">Python基础</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-Python基础①基本数据类型" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/07/Python基础①基本数据类型/" class="article-date">
  <time datetime="2017-05-07T12:52:53.000Z" itemprop="datePublished">2017-05-07 20:52:53</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Python/">Python</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/07/Python基础①基本数据类型/">Python基础①基本数据类型</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h2 id="数字"><a href="#数字" class="headerlink" title="数字"></a>数字</h2><ul>
<li><strong>基本类型</strong></li>
</ul>
<p>首先，进入Python交互模式中：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">//整数</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">3</span></div><div class="line"><span class="number">3</span></div><div class="line"></div><div class="line">//长整数</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">33333333333333333333333333</span></div><div class="line"><span class="number">33333333333333333333333333L</span></div><div class="line"></div><div class="line">//浮点数</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">3.22222222222</span></div><div class="line"><span class="number">3.22222222222</span></div><div class="line"></div><div class="line">//负数</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">-234</span></div><div class="line"><span class="number">-234</span></div><div class="line"></div><div class="line">//十六进制数</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">0xff</span></div><div class="line"><span class="number">255</span></div><div class="line"></div><div class="line">//八进制</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">010</span></div><div class="line"><span class="number">8</span></div></pre></td></tr></table></figure>
<p>在交互模式下：</p>
<p>如果输入3，就显示3，称为整数</p>
<p>当输入一个比较大的整数时，Python会自动会将这个大整数进行转换，转换的结果是一个“长整数”类型，为了表示它，会在其末尾显示一个L。由于这个操作是Python自动完成的，所有在Python中没有单独将“长整数”作为一个类型。</p>
<p>如果输入一个负数，直接在数字前面加上符号即可</p>
<p>Python也支持二进制、八进制、十六进制数。</p>
<ul>
<li><strong>对象身份</strong></li>
</ul>
<p>每个数字在Python都是一个对象，每个对象，在内存中都有自己的一个地址，这就是它的身份，用内建函数id()可以查看每个对象的内存地址即身份。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>id(<span class="number">3</span>)</div><div class="line"><span class="number">39679608</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>id(<span class="number">-3</span>)</div><div class="line"><span class="number">39679680</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>id(<span class="number">2.33</span>)</div><div class="line"><span class="number">39712264</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>id(<span class="number">3.0</span>)</div><div class="line"><span class="number">48962672</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>以上四个不同的数字是四个不同的对象，具有四个不同的内存地址。特别要注意，在数学上，3和3.0是相等的，但在这里，它们是不同的对象。</p>
<ul>
<li><strong>对象类型</strong></li>
</ul>
<p>如果要查找一个对象的类型，则使用type()这个内建函数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(<span class="number">3</span>)</div><div class="line">&lt;type <span class="string">'int'</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(<span class="number">-3</span>)</div><div class="line">&lt;type <span class="string">'int'</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(<span class="number">0.3</span>)</div><div class="line">&lt;type <span class="string">'float'</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(<span class="number">222222222222222222222222222</span>)</div><div class="line">&lt;type <span class="string">'long'</span>&gt;</div></pre></td></tr></table></figure>
<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = <span class="number">5</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x</div><div class="line"><span class="number">5</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = <span class="number">6</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x</div><div class="line"><span class="number">6</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<ul>
<li>在Python中，对象有类型，变量无类型</li>
<li>当Python中写入5、6时，计算机就自动在其内存中某个地方建立了这两个对象，这两个对象的类型就是Int</li>
<li>上述代码中的x就好比是个标签，当x=5时，就是将x这个标签拴在了5上，通过这个x，就找到了5，于是“&gt;&gt;&gt;x”输出的结果就是5。所以这个标签x没有类型之说，它不仅可以贴在整数类型的对象上，还可以贴在其他类型的对象上。</li>
</ul>
<h2 id="简单的四则运算"><a href="#简单的四则运算" class="headerlink" title="简单的四则运算"></a>简单的四则运算</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">//加</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">3</span> + <span class="number">5</span></div><div class="line"><span class="number">8</span></div><div class="line"></div><div class="line">//减</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">5</span> - <span class="number">3</span></div><div class="line"><span class="number">2</span></div><div class="line"></div><div class="line">//乘</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">5</span> * <span class="number">3</span></div><div class="line"><span class="number">15</span></div><div class="line"></div><div class="line">//整除</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">8</span> / <span class="number">4</span></div><div class="line"><span class="number">2</span></div><div class="line"></div><div class="line">//模除</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">8</span> % <span class="number">3</span></div><div class="line"><span class="number">2</span></div><div class="line"></div><div class="line">//混合运算</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">2</span> * <span class="number">3</span> <span class="number">-4</span></div><div class="line"><span class="number">2</span></div></pre></td></tr></table></figure>
<h2 id="整数溢出问题"><a href="#整数溢出问题" class="headerlink" title="整数溢出问题"></a>整数溢出问题</h2><p>在一些高级编程语言中，整数溢出是必须正视的，但是，在Python里就无需担心了，原因就是Python为我们解决了这个问题，它支持“无限精度”的整数，所以，不用考虑整数溢出的问题，Int类型与任意精度的Long整数类型可以无缝转换，超过Int范围情况都将自动转换成Long类型。</p>
<p>如下计算：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">1234456678888914781548154815481</span> * <span class="number">618468146815418458154815481548</span></div><div class="line"><span class="number">763472134516343226654595368107241568115304361007546100244588L</span></div></pre></td></tr></table></figure>
<p>你还可以在交互模式下计算2的1000次幂，计算方法是：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">2</span> ** <span class="number">1000</span></div><div class="line"><span class="number">10715086071862673209484250490600018105614048117055336074437503883703510511249361224931983788156958581275946729175531468251871452856923140435984577574698574803934567774824230985421074605062371141877954182153046474983581941267398767559165543946077062914571196477686542167660429831652624386837205668069376L</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h2 id="除法"><a href="#除法" class="headerlink" title="除法"></a>除法</h2><h3 id="整数与整数相除"><a href="#整数与整数相除" class="headerlink" title="整数与整数相除"></a>整数与整数相除</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">2</span> / <span class="number">5</span></div><div class="line"><span class="number">0</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">2.0</span> / <span class="number">5</span></div><div class="line"><span class="number">0.4</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">2</span> / <span class="number">5.0</span></div><div class="line"><span class="number">0.4</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">2.0</span> / <span class="number">5.0</span></div><div class="line"><span class="number">0.4</span></div></pre></td></tr></table></figure>
<p>Python2.x中</p>
<ul>
<li>整数除整数，商是整数</li>
<li>整数除浮点数或浮点数除整数，商是浮点数</li>
</ul>
<h3 id="整数与浮点数相除"><a href="#整数与浮点数相除" class="headerlink" title="整数与浮点数相除"></a>整数与浮点数相除</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">9.0</span> / <span class="number">2</span></div><div class="line"><span class="number">4.5</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">9</span> / <span class="number">2.0</span></div><div class="line"><span class="number">4.5</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">9.0</span> / <span class="number">2.0</span></div><div class="line"><span class="number">4.5</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<ul>
<li>不管是除数或者被除数，只要有一个数是浮点数，结果就是浮点数。</li>
</ul>
<p>然而，下面的计算可能会有点不好理解：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">10.0</span> / <span class="number">3</span></div><div class="line"><span class="number">3.3333333333333335</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">0.1</span> + <span class="number">0.2</span></div><div class="line"><span class="number">0.30000000000000004</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">0.1</span> + <span class="number">0.1</span> - <span class="number">0.2</span></div><div class="line"><span class="number">0.0</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">0.1</span> + <span class="number">0.1</span> + <span class="number">0.1</span> - <span class="number">0.3</span></div><div class="line"><span class="number">5.551115123125783e-17</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">0.1</span> + <span class="number">0.1</span> + <span class="number">0.1</span> - <span class="number">0.2</span></div><div class="line"><span class="number">0.10000000000000003</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>原因在于十进制和二进制的转换上，计算机使用的是二进制进行计算，在上面的例子中，我们输入的是十进制，就要把十进制转换成二进制，然后在计算。但是在转化中，浮点数转化为二进制后，不会精确等于十进制的0.1。因为计算机存储的位数是有限制的，所有就出现了上述现象。</p>
<p>一般情况下，只要简单地将最终显示的结果用“四舍五入”到所期望的十进制位数，就会得到期望的最终结果。</p>
<p>对于需要非常精确的情况，可以使用decimal模块，它实现的十进制运算适合高精度要求的应用。另外fractions模块支持另外一种形式的运算，它实现的运算基于有理数。最高要求则是使用有SciPy提供的Numerical Python包和其他用于数学和统计学的包。</p>
<h3 id="引用模块解决除法问题"><a href="#引用模块解决除法问题" class="headerlink" title="引用模块解决除法问题"></a>引用模块解决除法问题</h3><p>我们可以通过以下两种形式引入模块：</p>
<ul>
<li>形式1：import module-name。import后面跟空格，然后是模块名称，例如 import os</li>
<li>形式2：from module1 import module11。module1是一个大模块，里面还有子模块module11，只想用module11，就这么写。</li>
</ul>
<p>如下是解决除法问题的模块：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> __future__ <span class="keyword">import</span> division</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">5</span> /<span class="number">2</span></div><div class="line"><span class="number">2.5</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">9</span> / <span class="number">2</span></div><div class="line"><span class="number">4.5</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">9.0</span> / <span class="number">2</span></div><div class="line"><span class="number">4.5</span></div></pre></td></tr></table></figure>
<p>引用了此模块后，不管什么情况，都能够得到浮点数的结果了。</p>
<h3 id="余数"><a href="#余数" class="headerlink" title="余数"></a>余数</h3><ul>
<li>模除，用%符号来取得两个数相除的余数</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">5</span> % <span class="number">2</span></div><div class="line"><span class="number">1</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">9</span> % <span class="number">4</span></div><div class="line"><span class="number">1</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<ul>
<li>内建函数divmod()</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>divmod(<span class="number">5</span>,<span class="number">2</span>)</div><div class="line">(<span class="number">2</span>, <span class="number">1</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>divmod(<span class="number">9</span>,<span class="number">4</span>)</div><div class="line">(<span class="number">2</span>, <span class="number">1</span>)</div></pre></td></tr></table></figure>
<p>内建函数divmod()返回的是两个值，这两个值在一个圆括号内，圆括号内的数字第一个表示商，第二个表示余数。</p>
<h3 id="四舍五入"><a href="#四舍五入" class="headerlink" title="四舍五入"></a>四舍五入</h3><p>内建函数round（）。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>round(<span class="number">1.234567</span>,<span class="number">2</span>)</div><div class="line"><span class="number">1.23</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>round(<span class="number">1.234567</span>,<span class="number">3</span>)</div><div class="line"><span class="number">1.235</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>round(<span class="number">10.0</span> /<span class="number">3</span> ,<span class="number">4</span>)</div><div class="line"><span class="number">3.3333</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>在round()中的第二个数，表示要保留的小数位数，返回值是一个四舍五入之后的数值。</p>
<p>接下里看下面的特殊情况：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>round(<span class="number">0.12345</span>,<span class="number">3</span>)</div><div class="line"><span class="number">0.123</span>  <span class="comment">#应该是1.235</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>round(<span class="number">2.235</span>,<span class="number">2</span>)</div><div class="line"><span class="number">2.23</span>   <span class="comment">#应该是2.24</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>这不是Python地Bug，归根到底是浮点数中的十进制转化为二进制引起的问题</p>
<h2 id="常用数学函数和运算优先级"><a href="#常用数学函数和运算优先级" class="headerlink" title="常用数学函数和运算优先级"></a>常用数学函数和运算优先级</h2><h3 id="math模块"><a href="#math模块" class="headerlink" title="math模块"></a>math模块</h3><p>math模块是Python标准库中的，所以不用安装就可以直接安装。使用方法是：</p>
<p><code>&gt;&gt;&gt; import math</code></p>
<p>这样就将math模块引用进来了，下面就可以使用这个模块提供的工具了，比如要得到圆周率：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> math</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>math.pi</div><div class="line"><span class="number">3.141592653589793</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>这个模块都能做些什么事情呢？可以用下面的方法看到：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>dir(math)</div><div class="line">[<span class="string">'__doc__'</span>, <span class="string">'__name__'</span>, <span class="string">'__package__'</span>, <span class="string">'acos'</span>, <span class="string">'acosh'</span>, <span class="string">'asin'</span>, <span class="string">'asinh'</span>, <span class="string">'atan'</span>, <span class="string">'atan2'</span>, <span class="string">'atanh'</span>, <span class="string">'ceil'</span>, <span class="string">'copysign'</span>, <span class="string">'cos'</span>, <span class="string">'cosh'</span>, <span class="string">'degrees'</span>, <span class="string">'e'</span>, <span class="string">'erf'</span>, <span class="string">'erfc'</span>, <span class="string">'exp'</span>, <span class="string">'expm1'</span>, <span class="string">'fabs'</span>, <span class="string">'factorial'</span>, <span class="string">'floor'</span>, <span class="string">'fmod'</span>, <span class="string">'frexp'</span>, <span class="string">'fsum'</span>, <span class="string">'gamma'</span>, <span class="string">'hypot'</span>, <span class="string">'isinf'</span>, <span class="string">'isnan'</span>, <span class="string">'ldexp'</span>, <span class="string">'lgamma'</span>, <span class="string">'log'</span>, <span class="string">'log10'</span>, <span class="string">'log1p'</span>, <span class="string">'modf'</span>, <span class="string">'pi'</span>, <span class="string">'pow'</span>, <span class="string">'radians'</span>, <span class="string">'sin'</span>, <span class="string">'sinh'</span>, <span class="string">'sqrt'</span>, <span class="string">'tan'</span>, <span class="string">'tanh'</span>, <span class="string">'trunc'</span>]</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>dir(module)可以查看任何模块所包含的工具。<br>help(function)可以用来查看每个函数的使用情况。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>help(math.pow)</div><div class="line">Help on built-<span class="keyword">in</span> function pow <span class="keyword">in</span> module math:</div><div class="line"></div><div class="line">pow(...)</div><div class="line">    pow(x, y)</div><div class="line">    </div><div class="line">    Return x**y (x to the power of y).</div><div class="line"></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>下面来看看一些基本函数的使用：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#开平方</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; math.sqrt(<span class="number">9</span>)</div><div class="line"><span class="number">3.0</span></div><div class="line"></div><div class="line"><span class="comment">#绝对值</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; math.fabs(-<span class="number">2</span>)</div><div class="line"><span class="number">2.0</span></div><div class="line"></div><div class="line"><span class="comment">#模除</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; math.fmod(<span class="number">5</span>,<span class="number">3</span>)</div><div class="line"><span class="number">2.0</span></div></pre></td></tr></table></figure>
<h3 id="两个函数"><a href="#两个函数" class="headerlink" title="两个函数"></a>两个函数</h3><ul>
<li>1.求绝对值</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>abs(<span class="number">10</span>)</div><div class="line"><span class="number">10</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>abs(<span class="number">-10</span>)</div><div class="line"><span class="number">10</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>abs(<span class="number">-1.2</span>)</div><div class="line"><span class="number">1.2</span></div></pre></td></tr></table></figure>
<ul>
<li>2.四舍五入</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>round(<span class="number">1.234</span>)</div><div class="line"><span class="number">1.0</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>round(<span class="number">1.234</span>,<span class="number">2</span>)</div><div class="line"><span class="number">1.23</span></div></pre></td></tr></table></figure>
<h3 id="运算优先级"><a href="#运算优先级" class="headerlink" title="运算优先级"></a>运算优先级</h3><p>运算规则表：</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>lamba</td>
<td>Lamba表达式</td>
</tr>
<tr>
<td>or</td>
<td>布尔或</td>
</tr>
<tr>
<td>and</td>
<td>布尔与</td>
</tr>
<tr>
<td>not x</td>
<td>布尔非</td>
</tr>
<tr>
<td>in,not in</td>
<td>成员测试</td>
</tr>
<tr>
<td>is,is not</td>
<td>同一性测试</td>
</tr>
<tr>
<td>&lt;,&lt;=,&gt;,&gt;=,!=,==</td>
<td>比较</td>
</tr>
<tr>
<td>竖线</td>
<td>按位或</td>
</tr>
<tr>
<td>^</td>
<td>按位异或</td>
</tr>
<tr>
<td>&amp;</td>
<td>按位与</td>
</tr>
<tr>
<td>&lt;&lt;,&gt;&gt;</td>
<td>移位</td>
</tr>
<tr>
<td>+,-</td>
<td>加减 法</td>
</tr>
<tr>
<td>*,/,%</td>
<td>乘除、取余</td>
</tr>
<tr>
<td>+x,-x</td>
<td>正负号</td>
</tr>
<tr>
<td>~x</td>
<td>按位翻转</td>
</tr>
<tr>
<td>**</td>
<td>指数</td>
</tr>
</tbody>
</table>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://liuguoquan727.github.io/2017/05/07/Python基础①基本数据类型/" data-id="cj6f2gfo8008y4h19zva5acdi" class="article-share-link">分享</a>
      
        <a href="http://liuguoquan727.github.io/2017/05/07/Python基础①基本数据类型/#ds-thread" class="article-comment-link">留言</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python基础/">Python基础</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-Java8特性④Stream收集数据" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/06/Java8特性④Stream收集数据/" class="article-date">
  <time datetime="2017-05-06T08:52:53.000Z" itemprop="datePublished">2017-05-06 16:52:53</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Java/">Java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/06/Java8特性④Stream收集数据/">Java8特性④Stream收集数据</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <blockquote>
<p>收集器可以简洁而灵活地定义collect用来生成结果集合的标准。更具体地说，对流调用 collect 方法将对流中的元素触发一个归约操作（由Collector来参数化）。一般来说，Collector 会对元素应用一个转换函数（很多时候是不体现任何效果的恒等转换， 例如 toList ），并将结果累积在一个数据结构中，从而产生这一过程的最终输出。下面就来学习那些可以从Collectors 类提供的工厂方法（例如groupingBy）创建的收集器。</p>
</blockquote>
<h1 id="归约和汇总"><a href="#归约和汇总" class="headerlink" title="归约和汇总"></a>归约和汇总</h1><h2 id="查找流中的最大值和最小值"><a href="#查找流中的最大值和最小值" class="headerlink" title="查找流中的最大值和最小值"></a>查找流中的最大值和最小值</h2><p>Collectors.maxBy 和 Collectors.minBy 来计算流中的最大或最小值。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Optional&lt;Dish&gt; maxDish = Dish.menu.stream().</div><div class="line">      collect(Collectors.maxBy(Comparator.comparing(Dish::getCalories)));</div><div class="line">maxDish.ifPresent(System.out::println);</div><div class="line"></div><div class="line">Optional&lt;Dish&gt; minDish = Dish.menu.stream().</div><div class="line">      collect(Collectors.minBy(Comparator.comparing(Dish::getCalories)));</div><div class="line">minDish.ifPresent(System.out::println);</div></pre></td></tr></table></figure>
<h2 id="汇总"><a href="#汇总" class="headerlink" title="汇总"></a>汇总</h2><p>Collectors.summingInt 汇总求和；<br>Collectors.averagingInt 汇总求平均值；<br>Collectors.summarizingInt 汇总所有信息包括数量、求和、平均值、最小值、最大值；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//求总热量</span></div><div class="line"><span class="keyword">int</span> totalColories = Dish.menu.stream().collect(Collectors.summingInt(Dish::getCalories));</div><div class="line">System.out.println(totalColories);</div><div class="line"></div><div class="line"><span class="comment">//求平均热量</span></div><div class="line"><span class="keyword">double</span> averageColories = Dish.menu.stream().collect(Collectors.averagingInt(Dish::getCalories));</div><div class="line">System.out.println(averageColories);</div><div class="line"></div><div class="line"><span class="comment">//汇总</span></div><div class="line">IntSummaryStatistics menuStatistics = Dish.menu.stream().collect(Collectors.summarizingInt(Dish::getCalories));</div><div class="line">System.out.println(menuStatistics);</div><div class="line">IntSummaryStatistics&#123;count=<span class="number">9</span>, sum=<span class="number">4300</span>, min=<span class="number">120</span>, average=<span class="number">477.777778</span>, max=<span class="number">800</span>&#125;</div></pre></td></tr></table></figure>
<h2 id="连接字符串"><a href="#连接字符串" class="headerlink" title="连接字符串"></a>连接字符串</h2><p>joining 工厂方法返回的收集器会把对流中每一个对象应用toString方法得到的所有字符串连接成一个字符串。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">String menu = Dish.menu.stream().map(Dish::getName).collect(Collectors.joining(<span class="string">","</span>));</div><div class="line">System.out.println(menu);</div><div class="line"><span class="comment">//pork,beef,chicken,french fries,rice,season fruit,pizza,prawns,salmon</span></div></pre></td></tr></table></figure>
<h2 id="Collectors-reducing"><a href="#Collectors-reducing" class="headerlink" title="Collectors.reducing"></a>Collectors.reducing</h2><p>Collectors.reducing 工厂方法是上面所有工厂方法的一般情况，它完全可以实现上述方法的功能。它需要三个参数：</p>
<ul>
<li>第一个参数是归约操作的起始值，也是流中没有元素时的返回值，所以很显然对于数值和而言0是一个合适的值。 </li>
<li>第二个参数是一个 Function，就是具体的取值函数。</li>
<li>第三个参数是一个 BinaryOperator，将两个项目累积成一个同类型的值。。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> totalCalories = Dish.menu.stream().collect(Collectors.reducing( <span class="number">0</span>, Dish::getCalories, (i, j) -&gt; i + j));</div></pre></td></tr></table></figure>
<h1 id="分组"><a href="#分组" class="headerlink" title="分组"></a>分组</h1><p>用Collectors.groupingBy工厂方法返回的收集器可以实现分组任务，分组操作的结果是一个Map，把分组函数返回的值作为映射的键，把流中 所有具有这个分类值的项目的列表作为对应的映射值。</p>
<h2 id="多级分组"><a href="#多级分组" class="headerlink" title="多级分组"></a>多级分组</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//Dish的Type为键，Dish类型所对应的dish集合为值</span></div><div class="line">Map&lt;Dish.Type, List&lt;Dish&gt;&gt; dishesByType = Dish.menu.stream().collect(Collectors.groupingBy(Dish::getType));</div><div class="line">System.out.println(dishesByType);</div><div class="line"><span class="comment">//&#123;FISH=[prawns, salmon], OTHER=[french fries, rice, season fruit, pizza], MEAT=[pork, beef, chicken]&#125;</span></div><div class="line"></div><div class="line"><span class="comment">//一级分类为Dish的Type，二级分类为Dish的CaloricLevel</span></div><div class="line">Map&lt;Dish.Type, Map&lt;Dish.CaloricLevel, List&lt;Dish&gt;&gt;&gt; dishes = Dish.menu.stream()</div><div class="line">      .collect(Collectors.groupingBy(Dish::getType, Collectors.groupingBy(Dish::getLevel)));</div><div class="line">System.out.println(dishes);</div><div class="line"><span class="comment">//&#123;FISH=&#123;NORMAL=[salmon], DIET=[prawns]&#125;, OTHER=&#123;NORMAL=[french fries, pizza], DIET=[rice, season fruit]&#125;, MEAT=&#123;NORMAL=[beef], FAT=[pork], DIET=[chicken]&#125;&#125;</span></div></pre></td></tr></table></figure>
<h2 id="按子集收集数据"><a href="#按子集收集数据" class="headerlink" title="按子集收集数据"></a>按子集收集数据</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//Dish的Type为键，Dish类型所对应的dish集合的size为值</span></div><div class="line">Map&lt;Dish.Type, Long&gt; dishTypeCount = Dish.menu.stream().collect(Collectors.groupingBy(Dish::getType, Collectors.counting()));</div><div class="line">System.out.println(dishTypeCount);</div><div class="line"><span class="comment">//&#123;FISH=2, OTHER=4, MEAT=3&#125;</span></div></pre></td></tr></table></figure>
<h1 id="分区"><a href="#分区" class="headerlink" title="分区"></a>分区</h1><p>分区是分组的特殊情况：由一个谓词（返回一个布尔值的函数）作为分类函数，它称分区函数。分区函数返回一个布尔值，这意味着得到的分组 Map 的键类型是 Boolean，于是它最多可以分为两组——true是一组，false是一组。分区的好处在于保留了分区函数返回true或false的两套流元素列表。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Map&lt;Boolean, Map&lt;Dish.Type, List&lt;Dish&gt;&gt;&gt; partitioningDish = Dish.menu.stream().collect(Collectors.partitioningBy(Dish::isVegetarian, Collectors.groupingBy(Dish::getType)));</div><div class="line">System.out.println(partitioningDish);</div><div class="line"><span class="comment">//false=&#123;FISH=[prawns, salmon], MEAT=[pork, beef, chicken]&#125;, </span></div><div class="line"><span class="comment">//true=&#123;OTHER=[french fries, rice, season fruit, pizza]&#125;</span></div></pre></td></tr></table></figure>
<h1 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h1><p>下表展示 Collectors 类的静态工厂方法。</p>
<table>
<thead>
<tr>
<th>工厂方法</th>
<th>返回类型</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>toList</td>
<td><code>List&lt;T&gt;</code></td>
<td>把流中所有项目收集到一个 List</td>
</tr>
<tr>
<td>toSet</td>
<td><code>Set&lt;T&gt;</code></td>
<td>把流中所有项目收集到一个 Set，删除重复项</td>
</tr>
<tr>
<td>toCollection</td>
<td><code>Collection&lt;T&gt;</code></td>
<td>把流中所有项目收集到给定的供应源创建的集合<code>menuStream.collect(toCollection(), ArrayList::new)</code></td>
</tr>
<tr>
<td>counting</td>
<td>Long</td>
<td>计算流中元素的个数</td>
</tr>
<tr>
<td>sumInt</td>
<td>Integer</td>
<td>对流中项目的一个整数属性求和</td>
</tr>
<tr>
<td>averagingInt</td>
<td>Double</td>
<td>计算流中项目 Integer 属性的平均值</td>
</tr>
<tr>
<td>summarizingInt</td>
<td>IntSummaryStatistics</td>
<td>收集关于流中项目 Integer 属性的统计值，例如最大、最小、 总和与平均值</td>
</tr>
<tr>
<td>joining</td>
<td>String</td>
<td>连接对流中每个项目调用 toString 方法所生成的字符串<code>collect(joining(&quot;, &quot;))</code></td>
</tr>
<tr>
<td>maxBy</td>
<td><code>Optional&lt;T&gt;</code></td>
<td>一个包裹了流中按照给定比较器选出的最大元素的 Optional， 或如果流为空则为 Optional.empty()</td>
</tr>
<tr>
<td>minBy</td>
<td><code>Optional&lt;T&gt;</code></td>
<td>一个包裹了流中按照给定比较器选出的最小元素的 Optional， 或如果流为空则为 Optional.empty()</td>
</tr>
<tr>
<td>reducing</td>
<td>归约操作产生的类型</td>
<td>从一个作为累加器的初始值开始，利用 BinaryOperator 与流 中的元素逐个结合，从而将流归约为单个值<code>累加int totalCalories = menuStream.collect(reducing(0, Dish::getCalories, Integer::sum));</code></td>
</tr>
<tr>
<td>collectingAndThen</td>
<td>转换函数返回的类型</td>
<td>包裹另一个收集器，对其结果应用转换函数<code>int howManyDishes = menuStream.collect(collectingAndThen(toList(), List::size))</code></td>
</tr>
<tr>
<td>groupingBy</td>
<td><code>Map&lt;K, List&lt;T&gt;&gt;</code></td>
<td>根据项目的一个属性的值对流中的项目作问组，并将属性值作 为结果 Map 的键</td>
</tr>
<tr>
<td>partitioningBy</td>
<td><code>Map&lt;Boolean,List&lt;T&gt;&gt;</code></td>
<td>根据对流中每个项目应用谓词的结果来对项目进行分区</td>
</tr>
</tbody>
</table>
<h1 id="附录：Dish类"><a href="#附录：Dish类" class="headerlink" title="附录：Dish类"></a>附录：Dish类</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.company.bean;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.util.Arrays;</div><div class="line"><span class="keyword">import</span> java.util.List;</div><div class="line"><span class="keyword">import</span> java.util.stream.Collectors;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by liuguoquan on 2017/4/26.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Dish</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> String name;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> vegetarian;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> calories;</div><div class="line">    <span class="keyword">private</span> Type type;</div><div class="line">    <span class="keyword">private</span> CaloricLevel level;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> CaloricLevel <span class="title">getLevel</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (calories &lt;= <span class="number">400</span>) &#123;</div><div class="line"></div><div class="line">            <span class="keyword">return</span> CaloricLevel.DIET;</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (calories &lt;= <span class="number">700</span>) &#123;</div><div class="line"></div><div class="line">            <span class="keyword">return</span> CaloricLevel.NORMAL;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> CaloricLevel.FAT;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLevel</span><span class="params">(CaloricLevel level)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.level = level;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">enum</span> Type &#123; MEAT, FISH, OTHER &#125;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">enum</span> CaloricLevel &#123; DIET, NORMAL, FAT &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Dish</span><span class="params">(String name, <span class="keyword">boolean</span> vegetarian, <span class="keyword">int</span> calories, Type type)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.name = name;</div><div class="line">        <span class="keyword">this</span>.vegetarian = vegetarian;</div><div class="line">        <span class="keyword">this</span>.calories = calories;</div><div class="line">        <span class="keyword">this</span>.type = type;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> name;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isVegetarian</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> vegetarian;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCalories</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> calories;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> Type <span class="title">getType</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> type;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> name;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> List&lt;Dish&gt; menu =</div><div class="line">            Arrays.asList( <span class="keyword">new</span> Dish(<span class="string">"pork"</span>, <span class="keyword">false</span>, <span class="number">800</span>, Dish.Type.MEAT),</div><div class="line">                    <span class="keyword">new</span> Dish(<span class="string">"beef"</span>, <span class="keyword">false</span>, <span class="number">700</span>, Dish.Type.MEAT),</div><div class="line">                    <span class="keyword">new</span> Dish(<span class="string">"chicken"</span>, <span class="keyword">false</span>, <span class="number">400</span>, Dish.Type.MEAT),</div><div class="line">                    <span class="keyword">new</span> Dish(<span class="string">"french fries"</span>, <span class="keyword">true</span>, <span class="number">530</span>, Dish.Type.OTHER),</div><div class="line">                    <span class="keyword">new</span> Dish(<span class="string">"rice"</span>, <span class="keyword">true</span>, <span class="number">350</span>, Dish.Type.OTHER),</div><div class="line">                    <span class="keyword">new</span> Dish(<span class="string">"season fruit"</span>, <span class="keyword">true</span>, <span class="number">120</span>, Dish.Type.OTHER),</div><div class="line">                    <span class="keyword">new</span> Dish(<span class="string">"pizza"</span>, <span class="keyword">true</span>, <span class="number">550</span>, Dish.Type.OTHER),</div><div class="line">                    <span class="keyword">new</span> Dish(<span class="string">"prawns"</span>, <span class="keyword">false</span>, <span class="number">400</span>, Dish.Type.FISH),</div><div class="line">                    <span class="keyword">new</span> Dish(<span class="string">"salmon"</span>, <span class="keyword">false</span>, <span class="number">450</span>, Dish.Type.FISH));</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://liuguoquan727.github.io/2017/05/06/Java8特性④Stream收集数据/" data-id="cj6f2gfmv005g4h19oh5v75t1" class="article-share-link">分享</a>
      
        <a href="http://liuguoquan727.github.io/2017/05/06/Java8特性④Stream收集数据/#ds-thread" class="article-comment-link">留言</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java8/">Java8</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-Java8特性③Stream的使用" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/02/Java8特性③Stream的使用/" class="article-date">
  <time datetime="2017-05-02T12:52:53.000Z" itemprop="datePublished">2017-05-02 20:52:53</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Java/">Java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/02/Java8特性③Stream的使用/">Java8特性③Stream的使用</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h1 id="筛选和切片"><a href="#筛选和切片" class="headerlink" title="筛选和切片"></a>筛选和切片</h1><ul>
<li>filter 方法</li>
<li>distinct 方法</li>
<li>limit 方法</li>
<li>skip 方法</li>
</ul>
<h2 id="谓词筛选"><a href="#谓词筛选" class="headerlink" title="谓词筛选"></a>谓词筛选</h2><p>Stream 接口支持 filter 方法，该操作会接受一个谓词（一个返回 boolean的函数）作为参数，并返回一个包括所有符合谓词的元素的流。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">List&lt;Dish&gt; dishes = Dish.menu.stream()</div><div class="line">      .filter(Dish::isVegetarian)</div><div class="line">      .collect(Collectors.toList());</div></pre></td></tr></table></figure>
<h2 id="筛选重复的元素"><a href="#筛选重复的元素" class="headerlink" title="筛选重复的元素"></a>筛选重复的元素</h2><p>Stream 接口支持 distinct 的方法， 它会返回一个元素各异（根据流所生成元素的 hashCode和equals方法实现）的流。例如，以下代码会筛选出列表中所有的偶数，并确保没有 重复。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">List&lt;Integer&gt; numbers = Arrays.asList(<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">4</span>);</div><div class="line">numbers.stream().filter(i -&gt; i % <span class="number">2</span> == <span class="number">0</span>)</div><div class="line">      .distinct() <span class="comment">//去重元素2</span></div><div class="line">      .forEach(System.out::println);</div></pre></td></tr></table></figure>
<h2 id="限制元素数量"><a href="#限制元素数量" class="headerlink" title="限制元素数量"></a>限制元素数量</h2><p>Stream 支持limit(n)方法，该方法会返回一个不超过给定长度的流。所需的长度作为参数传递 给limit。如果流是有序的，则最多会返回前n个元素。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">List&lt;Dish&gt; dishLimits = Dish.menu.stream()</div><div class="line">        .filter(d -&gt; d.getCalories() &gt; <span class="number">300</span>)</div><div class="line">        .limit(<span class="number">3</span>) <span class="comment">//只返回符合要求的前3个元素</span></div><div class="line">        .collect(Collectors.toList());</div></pre></td></tr></table></figure>
<h2 id="跳过指定数量的元素"><a href="#跳过指定数量的元素" class="headerlink" title="跳过指定数量的元素"></a>跳过指定数量的元素</h2><p>Stream 支持 skip(n) 方法，返回一个扔掉了前n个元素的流。如果流中元素不足n个，则返回一 个空流。limit(n) 和 skip(n) 是互补的。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">List&lt;Dish&gt; dishSkip = Dish.menu.stream()</div><div class="line">        .filter(d -&gt; d.getCalories() &gt; <span class="number">300</span>)</div><div class="line">        .skip(<span class="number">2</span>) <span class="comment">//去掉符合要求的集合中的前2个元素后返回</span></div><div class="line">        .collect(Collectors.toList());</div><div class="line">dishSkip.forEach(System.out::println);</div></pre></td></tr></table></figure>
<h1 id="映射"><a href="#映射" class="headerlink" title="映射"></a>映射</h1><h2 id="map-操作"><a href="#map-操作" class="headerlink" title="map 操作"></a>map 操作</h2><p>Stream 支持 map 方法，它会接受一个函数作为参数。这个函数会被应用到每个元素上，并将其映 射成一个新的元素</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">List&lt;Integer&gt; dishNames = Dish.menu.stream()</div><div class="line">      .map(Dish::getName)</div><div class="line">      .map(String::length)</div><div class="line">      .collect(Collectors.toList());</div><div class="line"> </div><div class="line">List&lt;String&gt; words = Arrays.asList(<span class="string">"Hello"</span>, <span class="string">"World"</span>);</div><div class="line">List&lt;Integer&gt; wordLens = words.stream()</div><div class="line">      .map(String::length) <span class="comment">//转为字符串长度的集合</span></div><div class="line">      .collect(Collectors.toList());</div></pre></td></tr></table></figure>
<h2 id="flatMap-操作"><a href="#flatMap-操作" class="headerlink" title="flatMap 操作"></a>flatMap 操作</h2><p>flatmap 方法让你把一个流中的每个值都换成另一个流，然后把所有的流连接起来成为一个流。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//使用flatMap找出单词列表中各不相同的字符</span></div><div class="line">List&lt;String&gt; words = Arrays.asList(<span class="string">"Hello"</span>, <span class="string">"World"</span>);</div><div class="line">List&lt;String&gt; wordMap = words.stream()</div><div class="line">      .map(word -&gt; word.split(<span class="string">""</span>))</div><div class="line">      .flatMap(Arrays::stream)</div><div class="line">      .distinct()</div><div class="line">      .collect(Collectors.toList());</div></pre></td></tr></table></figure>
<p><img src="http://ooqmyazc5.bkt.clouddn.com/flatMap.jpg" alt=""></p>
<blockquote>
<p>给定两个数字列表，如何返回所有的数对呢？例如，给定列表[1, 2, 3]和列表[3, 4]，应该返回[(1, 3), (1, 4), (2, 3), (2, 4), (3, 3), (3, 4)]。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">List&lt;Integer&gt; num1 = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</div><div class="line">List&lt;Integer&gt; num2 = Arrays.asList(<span class="number">4</span>, <span class="number">5</span>);</div><div class="line">List&lt;<span class="keyword">int</span>[]&gt; pairs = num1.stream()</div><div class="line">        .flatMap(i -&gt; num2.stream().map(j -&gt; <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;i, j&#125;))</div><div class="line">        .collect(Collectors.toList());</div><div class="line">pairs.stream().forEach( i -&gt; &#123;</div><div class="line">    Arrays.stream(i).forEach(System.out::println);</div></pre></td></tr></table></figure>
<h1 id="查找和匹配"><a href="#查找和匹配" class="headerlink" title="查找和匹配"></a>查找和匹配</h1><h2 id="anyMatch"><a href="#anyMatch" class="headerlink" title="anyMatch"></a>anyMatch</h2><p>流中是否有一个元素能匹配给定的谓词。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (Dish.menu.stream().anyMatch(Dish::isVegetarian)) &#123;</div><div class="line">    System.out.println(<span class="string">"Vegetarion"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="allMatch"><a href="#allMatch" class="headerlink" title="allMatch"></a>allMatch</h2><p>流中是否有所有元素能匹配给定的谓词。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (Dish.menu.stream().allMatch(d -&gt; d.getCalories() &lt; <span class="number">1000</span>)) &#123;</div><div class="line"></div><div class="line">    System.out.println(<span class="string">"都有利于健康"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="nonMatch"><a href="#nonMatch" class="headerlink" title="nonMatch"></a>nonMatch</h2><p>流中是否有没有任何元素能匹配给定的谓词。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (Dish.menu.stream().noneMatch(d -&gt; d.getCalories() &gt;= <span class="number">1000</span>)) &#123;</div><div class="line"></div><div class="line">    System.out.println(<span class="string">"都有利于健康"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="findAny"><a href="#findAny" class="headerlink" title="findAny"></a>findAny</h2><p>findAny 方法将返回当前流中的任意一个元素。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Optional&lt;Dish&gt; dish = Dish.menu.stream().filter(Dish::isVegetarian)</div><div class="line">        .findAny();</div><div class="line">dish.ifPresent(d -&gt; System.out.println(d.toString()));</div></pre></td></tr></table></figure>
<h2 id="findFirst"><a href="#findFirst" class="headerlink" title="findFirst"></a>findFirst</h2><p>findAny 方法将返回当前流中的第一个元素。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">List&lt;Integer&gt; num1 = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</div><div class="line">num1.stream().map(x -&gt; x * x)</div><div class="line">        .filter(x -&gt; x % <span class="number">3</span> == <span class="number">0</span>) <span class="comment">//平方能被3整除的数</span></div><div class="line">        .findFirst().ifPresent(x -&gt; System.out.println(x));</div><div class="line">     &#125;</div></pre></td></tr></table></figure>
<h2 id="Optional"><a href="#Optional" class="headerlink" title="Optional"></a>Optional</h2><p><code>Optional&lt;T&gt;</code>类（java.util.Optional）是一个容器类，代表一个值存在或不存在。Optional里面y有几种显式地检查值是否存在或处理值不存在的情形的方法：</p>
<ul>
<li><code>isPresent()</code>将在Optional包含值的时候返回true, 否则返回false。</li>
<li><code>ifPresent(Consumer&lt;T&gt; block)</code>)会在值存在的时候执行给定的代码块。</li>
<li><code>T get()</code>会在值存在时返回值，否则抛出一个NoSuchElement异常。</li>
<li><code>T orElse(T other)</code>会在值存在时返回值，否则返回一个默认值。</li>
</ul>
<h1 id="归约（reduce）"><a href="#归约（reduce）" class="headerlink" title="归约（reduce）"></a>归约（reduce）</h1><p>把一个流中的元素组合起来，使用 reduce 操作来表达更复杂的查 询，比如“计算菜单中的总卡路里”或“菜单中卡路里最高的菜是哪一个”。此类查询需要将流中所有元素反复结合起来，得到一个值，比如一个Integer。这样的查询可以被归类为归约操作 （将流归约成一个值）。</p>
<p>reduce操作是如何作用于一个流的：Lambda反复结合每个元素，直到流被归约成一个值。reduce方法接受两个参数：一个初始值，这里是0；一个 <code>BinaryOperator&lt;T&gt;</code> 来将两个元素结合起来产生一个新值， 这里我们用的是 <code>lambda (a, b) -&gt; a + b</code>。</p>
<h2 id="元素求和"><a href="#元素求和" class="headerlink" title="元素求和"></a>元素求和</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">List&lt;Integer&gt; numbers = Arrays.asList(<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">2</span>);</div><div class="line"><span class="keyword">int</span> sum1 = numbers.stream().reduce(<span class="number">0</span>,(a, b) -&gt; a + b);</div><div class="line">System.out.println(sum1);</div><div class="line"></div><div class="line"><span class="keyword">int</span> sum2 = numbers.stream().reduce(<span class="number">0</span>,Integer::sum);</div><div class="line">System.out.println(sum2);</div></pre></td></tr></table></figure>
<h2 id="最大值"><a href="#最大值" class="headerlink" title="最大值"></a>最大值</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> max = numbers.stream().reduce(<span class="number">0</span>,Integer::max);</div><div class="line">System.out.println(max);</div></pre></td></tr></table></figure>
<h2 id="最小值"><a href="#最小值" class="headerlink" title="最小值"></a>最小值</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//reduce不接受初始值，返回一个Optional对象（考虑流中没有任何元素的情况）</span></div><div class="line">Optional&lt;Integer&gt; min = numbers.stream().reduce(Integer::min);</div><div class="line">min.ifPresent(System.out::println);</div></pre></td></tr></table></figure>
<h1 id="数值流"><a href="#数值流" class="headerlink" title="数值流"></a>数值流</h1><h2 id="原始类型流特化"><a href="#原始类型流特化" class="headerlink" title="原始类型流特化"></a>原始类型流特化</h2><p>Java 8引入了三个原始类型特化流接口来解决这个问题： IntStream 、 DoubleStream 和 LongStream，分别将流中的元素特化为int、long和double，从而避免了暗含的装箱成本。每 个接口都带来了进行常用数值归约的新方法，比如对数值流求和的sum，找到最大元素的max。 此外还有在必要时再把它们转换回对象流的方法。这些特化的原因并不在于流的复杂性，而是装箱造成的复杂性——即类似int和Integer之间的效率差异。</p>
<ul>
<li><strong>映射到数值流：</strong>将流转换为特化版本的常用方法是mapToInt、mapToDouble和mapToLong。这些方法和前 面说的map方法的工作方式一样，只是它们返回的是一个特化流，而不是<code>Stream&lt;T&gt;</code>。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> colories = Dish.menu.stream()</div><div class="line">        .mapToInt(Dish::getCalories) <span class="comment">//返回IntStream</span></div><div class="line">        .sum();</div></pre></td></tr></table></figure>
<ul>
<li><strong>转换回对象流</strong></li>
</ul>
<p>通过 box 方法可以将数值流转化为 Stream 非特化流。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">IntStream intStream = menu.stream().mapToInt(Dish::getCalories); <span class="comment">//将Strean转化为数值流</span></div><div class="line">Stream&lt;Integer&gt; stream = intStream.boxed(); <span class="comment">//将数值流转化为Stream</span></div></pre></td></tr></table></figure>
<ul>
<li><strong>默认值 OptionalInt</strong></li>
</ul>
<p>Optional 可以用 Integer、String等参考类型来参数化。对于三种原始流特化，也分别有一个Optional原始类 型特化版本：OptionalInt、OptionalDouble和OptionalLong。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Dish.menu.stream()</div><div class="line">        .mapToInt(Dish::getCalories) <span class="comment">//返回IntStream</span></div><div class="line">        .max().ifPresent(System.out::println);</div></pre></td></tr></table></figure>
<h2 id="数值范围"><a href="#数值范围" class="headerlink" title="数值范围"></a>数值范围</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">IntStream.rangeClosed(<span class="number">1</span>, <span class="number">100</span>)</div><div class="line">        .filter(x -&gt; x % <span class="number">10</span> == <span class="number">0</span>)</div><div class="line">        .forEach(System.out::println);</div></pre></td></tr></table></figure>
<p>Java 8引入了两个可以用于IntStream和LongStream的静态方法，帮助生成这种范围： range和rangeClosed。这两个方法都是第一个参数接受起始值，第二个参数接受结束值。但 range是不包含结束值的，而rangeClosed则包含结束值。</p>
<h2 id="数值流应用：勾股数"><a href="#数值流应用：勾股数" class="headerlink" title="数值流应用：勾股数"></a>数值流应用：勾股数</h2><p>生成 (5, 12, 13)、(6, 8, 10)和(7, 24, 25) 这样有效的勾股数数组集合。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Stream&lt;<span class="keyword">int</span>[]&gt; pythagoreanTriples = IntStream.rangeClosed(<span class="number">1</span>, <span class="number">100</span>).boxed()</div><div class="line">        .flatMap(a -&gt; IntStream.rangeClosed(a,<span class="number">100</span>)</div><div class="line">                                .filter(b -&gt; Math.sqrt(a * a + b * b) % <span class="number">1</span> == <span class="number">0</span>).boxed()</div><div class="line">                                .map(b -&gt; <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;a,b,(<span class="keyword">int</span>)Math.sqrt(a * a + b * b)&#125;)</div><div class="line">        );</div><div class="line">pythagoreanTriples.forEach(t -&gt; System.out.println(t[<span class="number">0</span>] + <span class="string">";"</span> + t[<span class="number">1</span>] +<span class="string">";"</span> + t[<span class="number">2</span>]));</div></pre></td></tr></table></figure>
<h1 id="构建流"><a href="#构建流" class="headerlink" title="构建流"></a>构建流</h1><h2 id="值创建流"><a href="#值创建流" class="headerlink" title="值创建流"></a>值创建流</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Stream&lt;String&gt; streams = Stream.of(<span class="string">"Java"</span>, <span class="string">"Python"</span>);</div><div class="line">streams.map(String::toUpperCase).forEach(System.out::println);</div><div class="line"></div><div class="line">Stream.concat(Stream.of(<span class="string">"Java"</span>, <span class="string">"Python"</span>), Stream.of(<span class="string">"C++"</span>, <span class="string">"Ruby"</span>)).forEach(System.out::println);</div></pre></td></tr></table></figure>
<h2 id="数组创建流"><a href="#数组创建流" class="headerlink" title="数组创建流"></a>数组创建流</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span>[] numbers = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>&#125;;</div><div class="line"><span class="keyword">int</span> sum = Arrays.stream(numbers).sum();</div></pre></td></tr></table></figure>
<h2 id="文件生成流"><a href="#文件生成流" class="headerlink" title="文件生成流"></a>文件生成流</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">String ret = Files.lines(Paths.get(<span class="string">"/Users/liuguoquan/Java/java8/src/com/company/data.txt"</span>), Charset.defaultCharset())</div><div class="line">        .reduce(<span class="string">""</span>, (a, b) -&gt; a + <span class="string">" "</span> + b);</div></pre></td></tr></table></figure>
<h2 id="函数生成流：创建无限流"><a href="#函数生成流：创建无限流" class="headerlink" title="函数生成流：创建无限流"></a>函数生成流：创建无限流</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//迭代</span></div><div class="line">Stream.iterate(<span class="number">0</span>, n -&gt; n + <span class="number">2</span>)</div><div class="line">        .limit(<span class="number">10</span>)</div><div class="line">        .forEach(System.out::println);</div><div class="line"></div><div class="line"><span class="comment">//生成</span></div><div class="line">Stream.generate(Math::random)</div><div class="line">        .limit(<span class="number">5</span>)</div><div class="line">        .forEach(System.out::println);</div><div class="line"></div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h1 id="示例实战"><a href="#示例实战" class="headerlink" title="示例实战"></a>示例实战</h1><p>假设你是执行交易的交易员。你的经理让你为八个查询找到答案。你能做到吗？</p>
<ul>
<li>(1) 找出2016年发生的所有交易，并按交易额排序（从低到高）。</li>
<li>(2) 交易员都在哪些不同的城市工作过？</li>
<li>(3) 查找所有来自于北京的交易员，并按姓名排序。</li>
<li>(4) 返回所有交易员的姓名字符串，按字母顺序排序。</li>
<li>(5) 有没有交易员是在深圳工作的？</li>
<li>(6) 打印生活在北京的交易员的所有交易额。</li>
<li>(7) 所有交易中，最高的交易额是多少？</li>
<li>(8) 找到交易额最小的交易。</li>
</ul>
<p><strong>交易员类</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 交易人</div><div class="line"> * Created by liuguoquan on 2017/4/28.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Trader</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> String name;</div><div class="line">    <span class="keyword">private</span> String city;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Trader</span><span class="params">(String name, String city)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.name = name;</div><div class="line">        <span class="keyword">this</span>.city = city;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> name;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.name = name;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getCity</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> city;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCity</span><span class="params">(String city)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.city = city;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"Trader&#123;"</span> +</div><div class="line">                <span class="string">"name='"</span> + name + <span class="string">'\''</span> +</div><div class="line">                <span class="string">", city='"</span> + city + <span class="string">'\''</span> +</div><div class="line">                <span class="string">'&#125;'</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>交易类</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 交易单</div><div class="line"> * Created by liuguoquan on 2017/4/28.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Transaction</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> Trader trader;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> year;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> value;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Transaction</span><span class="params">(Trader trader, <span class="keyword">int</span> year, <span class="keyword">int</span> value)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.trader = trader;</div><div class="line">        <span class="keyword">this</span>.year = year;</div><div class="line">        <span class="keyword">this</span>.value = value;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> Trader <span class="title">getTrader</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> trader;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTrader</span><span class="params">(Trader trader)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.trader = trader;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getYear</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> year;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setYear</span><span class="params">(<span class="keyword">int</span> year)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.year = year;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getValue</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> value;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.value = value;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"Transaction&#123;"</span> +</div><div class="line">                <span class="string">"trader="</span> + trader +</div><div class="line">                <span class="string">", year='"</span> + year + <span class="string">'\''</span> +</div><div class="line">                <span class="string">", value="</span> + value +</div><div class="line">                <span class="string">'&#125;'</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>计算</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TransactionProcess</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line"></div><div class="line">        Trader liu = <span class="keyword">new</span> Trader(<span class="string">"Lau"</span>,<span class="string">"Beijing"</span>);</div><div class="line">        Trader lee = <span class="keyword">new</span> Trader(<span class="string">"Lee"</span>,<span class="string">"Shanghai"</span>);</div><div class="line">        Trader zhang = <span class="keyword">new</span> Trader(<span class="string">"Zhang"</span>,<span class="string">"Guangzhou"</span>);</div><div class="line">        Trader wang = <span class="keyword">new</span> Trader(<span class="string">"Wang"</span>,<span class="string">"Beijing"</span>);</div><div class="line"></div><div class="line">        List&lt;Transaction&gt; transactions = Arrays.asList(</div><div class="line">                <span class="keyword">new</span> Transaction(liu,<span class="number">2016</span>,<span class="number">300</span>),</div><div class="line">                <span class="keyword">new</span> Transaction(lee,<span class="number">2015</span>,<span class="number">100</span>),</div><div class="line">                <span class="keyword">new</span> Transaction(lee,<span class="number">2016</span>,<span class="number">500</span>),</div><div class="line">                <span class="keyword">new</span> Transaction(zhang,<span class="number">2016</span>,<span class="number">9000</span>),</div><div class="line">                <span class="keyword">new</span> Transaction(wang,<span class="number">2017</span>,<span class="number">1000</span>),</div><div class="line">                <span class="keyword">new</span> Transaction(liu,<span class="number">2016</span>,<span class="number">1500</span>)</div><div class="line">        );</div><div class="line"></div><div class="line">        <span class="comment">// (1) 找出2016年发生的所有交易，并按交易额排序（从低到高）。</span></div><div class="line">        transactions.stream().filter(t -&gt; t.getYear() == <span class="number">2016</span>)</div><div class="line">                .sorted(Comparator.comparing(Transaction::getValue))</div><div class="line">                .collect(Collectors.toList());</div><div class="line"></div><div class="line">        <span class="comment">// (2) 交易员都在哪些不同的城市工作过？</span></div><div class="line">        transactions.stream().map(t -&gt; t.getTrader().getCity())</div><div class="line">                .distinct()</div><div class="line">                .collect(Collectors.toList());</div><div class="line"></div><div class="line">        <span class="comment">// (3) 查找所有来自于北京的交易员，并按姓名排序。</span></div><div class="line">        transactions.stream().map(t -&gt; t.getTrader())</div><div class="line">                .filter(t -&gt; t.getCity().equals(<span class="string">"Beijing"</span>))</div><div class="line">                .distinct()</div><div class="line">                .sorted(Comparator.comparing(Trader::getName))</div><div class="line">                .collect(Collectors.toList());</div><div class="line"></div><div class="line">        <span class="comment">// (4) 返回所有交易员的姓名字符串，按字母顺序排序。</span></div><div class="line">        transactions.stream().map(t -&gt; t.getTrader())</div><div class="line">                .map(t -&gt; t.getName())</div><div class="line">                .distinct()</div><div class="line">                .sorted()</div><div class="line">                .collect(Collectors.toList());</div><div class="line"></div><div class="line">        <span class="comment">// (5) 有没有交易员是在深圳工作的？</span></div><div class="line">        <span class="keyword">boolean</span> isExist = transactions.stream().anyMatch(t -&gt; t.getTrader().getCity().equals(<span class="string">"Shenzhen"</span>));</div><div class="line">        <span class="keyword">if</span> (isExist) &#123;</div><div class="line">            System.out.println(<span class="string">"有在深圳工作的"</span>);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            System.out.println(<span class="string">"没有在深圳工作的"</span>);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// (6) 打印生活在北京的交易员的所有交易额。</span></div><div class="line">        <span class="keyword">int</span> sum = transactions.stream().filter(t -&gt; t.getTrader().getCity().equals(<span class="string">"Beijing"</span>))</div><div class="line">                .map(t -&gt; t.getValue())</div><div class="line">                .reduce(<span class="number">0</span>,Integer::sum);</div><div class="line">        System.out.println(sum);</div><div class="line"></div><div class="line">        <span class="comment">// (7) 所有交易中，最高的交易额是多少？</span></div><div class="line">        <span class="keyword">int</span> max = transactions.stream().map(t -&gt; t.getValue())</div><div class="line">                .reduce(<span class="number">0</span>,Integer::max);</div><div class="line">        System.out.println(max);</div><div class="line"></div><div class="line">        <span class="comment">// (8) 找到交易额最小的交易。</span></div><div class="line">        <span class="keyword">int</span> min = transactions.stream().map(t -&gt; t.getValue())</div><div class="line">                .reduce(<span class="number">0</span>,Integer::min);</div><div class="line">        System.out.println(min);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h1><ul>
<li>中间操作表</li>
</ul>
<table>
<thead>
<tr>
<th>操作</th>
<th>类型</th>
<th>返回类型</th>
<th>目的</th>
</tr>
</thead>
<tbody>
<tr>
<td>filter</td>
<td>中间操作</td>
<td><code>Stream&lt;T&gt;</code></td>
<td>过滤元素</td>
</tr>
<tr>
<td>distinct</td>
<td>中间操作</td>
<td><code>Stream&lt;T&gt;</code></td>
<td>过滤重复的元素</td>
</tr>
<tr>
<td>skip</td>
<td>中间操作</td>
<td><code>Stream&lt;T&gt;</code></td>
<td>跳过指定数量的元素</td>
</tr>
<tr>
<td>limit</td>
<td>中间操作</td>
<td><code>Stream&lt;T&gt;</code></td>
<td>限制元素的数量</td>
</tr>
<tr>
<td>map</td>
<td>中间操作</td>
<td><code>Stream&lt;T&gt;</code></td>
<td>流的转化</td>
</tr>
<tr>
<td>flatmap</td>
<td>中间操作</td>
<td><code>Stream&lt;T&gt;</code></td>
<td>流的扁平化</td>
</tr>
<tr>
<td>sorted</td>
<td>中间操作</td>
<td><code>Stream&lt;T&gt;</code></td>
<td>元素排序</td>
</tr>
</tbody>
</table>
<ul>
<li>终端操作表</li>
</ul>
<table>
<thead>
<tr>
<th>操作</th>
<th>类型</th>
<th>返回类型</th>
<th>目的</th>
</tr>
</thead>
<tbody>
<tr>
<td>forEach</td>
<td>终端操作</td>
<td>void</td>
<td>消费流中的每个元素，返回void</td>
</tr>
<tr>
<td>count</td>
<td>终端操作</td>
<td>long</td>
<td>返回流中元素的个数，返回long</td>
</tr>
<tr>
<td>collect</td>
<td>终端操作</td>
<td>R</td>
<td>把流归约为一个集合</td>
</tr>
<tr>
<td>anyMatch</td>
<td>终端操作</td>
<td>boolean</td>
<td>流中是否有符合要求的元素</td>
</tr>
<tr>
<td>noneMatch</td>
<td>终端操作</td>
<td>boolean</td>
<td>流中是否没有任何符合要求的元素</td>
</tr>
<tr>
<td>allMatch</td>
<td>终端操作</td>
<td>boolean</td>
<td>流中是否所有元素都是符合要求的</td>
</tr>
<tr>
<td>findAny</td>
<td>终端操作</td>
<td>Optional<t></t></td>
<td>查找符合要求的元素</td>
</tr>
<tr>
<td>findFirst</td>
<td>终端操作</td>
<td>Optional<t></t></td>
<td>查找第一个符合要求的元素</td>
</tr>
<tr>
<td>reduce</td>
<td>终端操作</td>
<td>Optional<t></t></td>
<td>归约</td>
</tr>
</tbody>
</table>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p>《Java 8 实战》</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://liuguoquan727.github.io/2017/05/02/Java8特性③Stream的使用/" data-id="cj6f2gfmx005o4h19lyzq4tgw" class="article-share-link">分享</a>
      
        <a href="http://liuguoquan727.github.io/2017/05/02/Java8特性③Stream的使用/#ds-thread" class="article-comment-link">留言</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java8/">Java8</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-Java8特性②Stream简介" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/27/Java8特性②Stream简介/" class="article-date">
  <time datetime="2017-04-27T07:52:53.000Z" itemprop="datePublished">2017-04-27 15:52:53</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Java/">Java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/27/Java8特性②Stream简介/">Java8特性②Stream简介</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h1 id="流是什么"><a href="#流是什么" class="headerlink" title="流是什么"></a>流是什么</h1><p><strong>流</strong>是Java API的新成员，它允许你以声明性方式处理数据集合（通过查询语句来表达，而不是临时编写一个实现）。可以把它们看成遍历数据集的高级迭代器。此外流还可以<strong>透明地并行处理</strong>，无需写任何多线程代码了。如下面代码所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;String&gt; <span class="title">getLowCalorisInJava8</span><span class="params">(List&lt;Dish&gt; dishes)</span> </span>&#123;</div><div class="line"></div><div class="line">    List&lt;String&gt; lowColorisDish = dishes.stream() <span class="comment">//parallelStream() 并行流</span></div><div class="line">                .filter((Dish d) -&gt; d.getCalories() &lt; <span class="number">400</span>) <span class="comment">//筛选</span></div><div class="line">                .sorted(Comparator.comparing(Dish::getCalories)) <span class="comment">//排序</span></div><div class="line">                .map(Dish::getName) <span class="comment">//提取名称</span></div><div class="line">                .collect(Collectors.toList()); <span class="comment">//将所有名称存入List中</span></div><div class="line"></div><div class="line">    <span class="keyword">return</span> lowColorisDish;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Dish类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.company.bean;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.util.Arrays;</div><div class="line"><span class="keyword">import</span> java.util.List;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by liuguoquan on 2017/4/26.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Dish</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> String name;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> vegetarian;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> calories;</div><div class="line">    <span class="keyword">private</span> Type type;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">enum</span> Type &#123; MEAT, FISH, OTHER &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Dish</span><span class="params">(String name, <span class="keyword">boolean</span> vegetarian, <span class="keyword">int</span> calories, Type type)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.name = name;</div><div class="line">        <span class="keyword">this</span>.vegetarian = vegetarian;</div><div class="line">        <span class="keyword">this</span>.calories = calories;</div><div class="line">        <span class="keyword">this</span>.type = type;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> name;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isVegetarian</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> vegetarian;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCalories</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> calories;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> Type <span class="title">getType</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> type;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> name;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> List&lt;Dish&gt; menu =</div><div class="line">            Arrays.asList( <span class="keyword">new</span> Dish(<span class="string">"pork"</span>, <span class="keyword">false</span>, <span class="number">800</span>, Dish.Type.MEAT),</div><div class="line">                    <span class="keyword">new</span> Dish(<span class="string">"beef"</span>, <span class="keyword">false</span>, <span class="number">700</span>, Dish.Type.MEAT),</div><div class="line">                    <span class="keyword">new</span> Dish(<span class="string">"chicken"</span>, <span class="keyword">false</span>, <span class="number">400</span>, Dish.Type.MEAT),</div><div class="line">                    <span class="keyword">new</span> Dish(<span class="string">"french fries"</span>, <span class="keyword">true</span>, <span class="number">530</span>, Dish.Type.OTHER),</div><div class="line">                    <span class="keyword">new</span> Dish(<span class="string">"rice"</span>, <span class="keyword">true</span>, <span class="number">350</span>, Dish.Type.OTHER),</div><div class="line">                    <span class="keyword">new</span> Dish(<span class="string">"season fruit"</span>, <span class="keyword">true</span>, <span class="number">120</span>, Dish.Type.OTHER),</div><div class="line">                    <span class="keyword">new</span> Dish(<span class="string">"pizza"</span>, <span class="keyword">true</span>, <span class="number">550</span>, Dish.Type.OTHER),</div><div class="line">                    <span class="keyword">new</span> Dish(<span class="string">"prawns"</span>, <span class="keyword">false</span>, <span class="number">400</span>, Dish.Type.FISH),</div><div class="line">                    <span class="keyword">new</span> Dish(<span class="string">"salmon"</span>, <span class="keyword">false</span>, <span class="number">450</span>, Dish.Type.FISH));</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="流简介"><a href="#流简介" class="headerlink" title="流简介"></a>流简介</h1><p>流就是从支持数据处理操作的源生成的元素序列。</p>
<ul>
<li><p>元素序列：流也提供了一个接口，可以访问特定元素类型的一组有序 值。因为集合是数据结构，所以它的主要目的是以特定的时间/空间复杂度存储和访问元 素（如 ArrayList 与 LinkedList ）。但流的目的在于表达计算， 比如你前面见到的 filter、sorted和map。集合讲的是数据，流讲的是计算。</p>
</li>
<li><p>源：流会使用一个提供数据的源，如集合、数组或输入/输出资源。 请注意，从有序集 合生成流时会保留原有的顺序。由列表生成的流，其元素顺序与列表一致。</p>
</li>
<li><p>数据处理操作：流的数据处理功能支持类似于数据库的操作，以及函数式编程语言中 的常用操作，如filter、map、reduce、find、match、sort等。流操作可以顺序执 行，也可并行执行。</p>
</li>
</ul>
<p>流操作的两个重要的特点：</p>
<ul>
<li><p><strong>流水线：</strong>很多流操作本身会返回一个流，这样多个操作就可以链接起来，形成一个大的流水线。流水线的操作可以 看作对数据源进行数据库式查询。</p>
</li>
<li><p><strong>内部迭代：</strong>与使用迭代器显式迭代的集合不同，流的迭代操作是在背后进行的。</p>
</li>
</ul>
<h1 id="流与集合"><a href="#流与集合" class="headerlink" title="流与集合"></a>流与集合</h1><p><strong>集合与流之间的差异就在于什么时候进行计算。</strong>集合是一个内存中的数据结构， 它包含数据结构中目前所有的值——集合中的每个元素都得先算出来才能添加到集合中。流则是在概念上固定的数据结构（你不能添加或删除元素），其元素则是<strong>按需计算</strong>的。</p>
<p><strong>流只能遍历一次。</strong>遍历完之后，这个流已经被消费掉了。可以从原始数据源那里再获得一个新的流来重新遍历一遍。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">List&lt;String&gt; title = Arrays.asList(<span class="string">"Java8"</span>, <span class="string">"In"</span>, <span class="string">"Action"</span>); Stream&lt;String&gt; s = title.stream()</div><div class="line">s.forEach(System.out::println); </div><div class="line">s.forEach(System.out::println); <span class="comment">//java.lang.IllegalStateException:流已被操作</span></div></pre></td></tr></table></figure>
<p>Collection接口需要用户去做迭代（比如用for-each），这称为<strong>外部迭代</strong>。Streams库使用内部迭代——它帮你把迭代做了，还把得到的流值存在了某个地方，你只要给出一个函数说要干什么就可以了。Streams库的内部迭代可以自动选择一种适 合你硬件的数据表示和并行实现。与此相反，一旦通过写for-each而选择了外部迭代，那你基 本上就要自己管理所有的并行问题了。</p>
<h1 id="流操作"><a href="#流操作" class="headerlink" title="流操作"></a>流操作</h1><p>java.util.stream.Stream 中的 Stream 接口定义了许多操作。它们可以分为两大类。</p>
<ul>
<li><strong>中间操作：</strong>filter、map、limit等可以连成一条流水线的操作；</li>
<li><strong>终端操作：</strong>collect等触发流水线执行并关闭流的操作；</li>
</ul>
<h2 id="中间操作"><a href="#中间操作" class="headerlink" title="中间操作"></a>中间操作</h2><p>诸如filter或sorted等中间操作会返回另一个流。这让多个操作可以连接起来形成一个查 询。重要的是，除非流水线上触发一个终端操作，否则中间操作不会执行任何处理，这是因为中间操作一般都可以合并起来，在终端操作时一次性全部处理。尽管filter和map是两个独立的操作，但它们合并到同一次遍历中了（我们把这种技术叫作循环 合并）。</p>
<h2 id="终端操作"><a href="#终端操作" class="headerlink" title="终端操作"></a>终端操作</h2><p>终端操作会从流的流水线生成结果。其结果是任何不是流的值，比如List、Integer，甚至void。</p>
<h2 id="使用流"><a href="#使用流" class="headerlink" title="使用流"></a>使用流</h2><p>流的使用一般包括三件事：</p>
<ul>
<li>一个数据源（如集合）来执行一个查询；</li>
<li>一个中间操作链，形成一条流的流水线；</li>
<li>一个终端操作，执行流水线，并能生成结果；</li>
</ul>
<p>流的流水线背后的理念类似于构建器模式。在构建器模式中有一个调用链用来设置一套配置（对流来说这就是一个中间操作链），接着是调用built方法（对流来说就是终端操作）。</p>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p>《Java 8 实战》</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://liuguoquan727.github.io/2017/04/27/Java8特性②Stream简介/" data-id="cj6f2gfmu005d4h19qhc5lh01" class="article-share-link">分享</a>
      
        <a href="http://liuguoquan727.github.io/2017/04/27/Java8特性②Stream简介/#ds-thread" class="article-comment-link">留言</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java8/">Java8</a></li></ul>

    </footer>
  </div>
  
</article>
 


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/8/">&laquo; 上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><a class="page-number" href="/page/11/">11</a><span class="space">&hellip;</span><a class="page-number" href="/page/26/">26</a><a class="extend next" rel="next" href="/page/10/">下一页&raquo;</a>
  </nav>
</section>
           
    <aside id="sidebar">
  
    

  
    
  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title recent-posts">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/08/16/Android启动流程①init进程分析/">Android启动流程①init进程分析</a>
          </li>
        
          <li>
            <a href="/2017/08/15/Android系统架构与源码目录/">Android系统架构与源码目录</a>
          </li>
        
          <li>
            <a href="/2017/08/14/Mac编译Android源码/">Mac编译Android源码</a>
          </li>
        
          <li>
            <a href="/2017/06/21/JavaScript⑦对象/">JavaScript⑦对象</a>
          </li>
        
          <li>
            <a href="/2017/06/19/JavaScript⑥引用类型RegExp/">JavaScript⑥引用类型RegExp</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    

  
    
  
    <!--微信公众号二维码-->


  
</aside>

      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-left">
      &copy; 2014 - 2017 刘涤生&nbsp;|&nbsp;
      主题 <a href="https://github.com/giscafer/hexo-theme-cafe/" target="_blank">Cafe</a>
    </div>
     <div id="footer-right">
      联系方式&nbsp;|&nbsp;michaelliu0727@gmail.com
    </div>
  </div>
</footer>
 <script src="/jquery/jquery.min.js"></script>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
    <a href="/categories" class="mobile-nav-link">分类</a>
  
    <a href="/tags" class="mobile-nav-link">标签</a>
  
    <a href="/about" class="mobile-nav-link">关于</a>
  
</nav>
    <img class="back-to-top-btn" src="/images/fly-to-top.png"/>
<script>
// Elevator script included on the page, already.
window.onload = function() {
  var elevator = new Elevator({
    selector:'.back-to-top-btn',
    element: document.querySelector('.back-to-top-btn'),
    duration: 1000 // milliseconds
  });
}
</script>
      







<!-- author:forvoid begin -->
<!-- author:forvoid begin -->

<!-- author:forvoid end -->

<!-- author:forvoid end -->


  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      })
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      })
    </script>
    <script type="text/javascript" src="https://cdn.rawgit.com/mathjax/MathJax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


 <script src="/js/is.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>
<script src="/js/elevator.js"></script>
  </div>
</body>
</html>