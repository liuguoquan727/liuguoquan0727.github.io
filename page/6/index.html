<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  
  <title>刘涤生 - 应尽便须尽 | MICHAEL</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="theme-color" content="#1EF128">
  
  
  <meta name="keywords" content="undefined">
  <meta name="description" content="像外行一样思考,像专家一样实践。">
<meta property="og:type" content="website">
<meta property="og:title" content="刘涤生 - 应尽便须尽">
<meta property="og:url" content="http://yoursite.com/page/6/index.html">
<meta property="og:site_name" content="刘涤生 - 应尽便须尽">
<meta property="og:description" content="像外行一样思考,像专家一样实践。">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="刘涤生 - 应尽便须尽">
<meta name="twitter:description" content="像外行一样思考,像专家一样实践。">
  
    <link rel="alternative" href="/atom.xml" title="刘涤生 - 应尽便须尽" type="application/atom+xml">
  
  <link rel="shortcut icon" href="/icon.jpg">
  <link rel="stylesheet" href="/css/style.css?v=1.2.7">
</head>

<body>
  <div id="loading" class="active"></div>

  <aside id="menu"  >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/icon.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">刘涤生</h5>
          <a href="mailto:michaelliu0727@gmail.com" title="michaelliu0727@gmail.com" class="mail">michaelliu0727@gmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                归档
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                标签
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                分类
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/liuguoquan727" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://weibo.com/liuguoquan0727" target="_blank" >
                <i class="icon icon-lg icon-weibo"></i>
                Weibo
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/about"  >
                <i class="icon icon-lg icon-link"></i>
                关于
              </a>
            </li>
        
      </ul>

      <footer class="footer">
  <p><a rel="license" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0;vertical-align:middle;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAAPCAMAAABEF7i9AAAAllBMVEUAAAD///+rsapERER3d3eIiIjMzMzu7u4iIiKUmZO6v7rKzsoODg4RERFVVVUNDQ0NDg0PEA8zMzNLTEtbXltmZmZydnF9gn2AgICPkI+ZmZmqqqq7u7vFxsXIzMgNDQwZGRkgICAhISEkJSMnKCcuMC4xMzE5Ozk7PTtBQkFCQkJDQ0Nna2eGhoaHh4ezuLLGysbd3d1wVGpAAAAA4UlEQVR42q2T1xqCMAyFk7QsBQeKA9x7j/d/OSm22CpX0nzcpA1/T05aAOuBVkMAScQFHLnEwoCo2f1TnQIGoVMewjZEjVFN4GH1Ue1Cn2jWqwfsOOj6wDwGvotsl/c8lv7KIq1eLOsT0HMFHMIE/RZyHnlphryT9zyV+8WH5e8yQw3wnQvgAFxPTKUVi555SHR/lOfLMgVTeDlSfN+TaoUsiTyeIm+bCkHvCA2FUKG48LDtYBZBknsYP/G8NTw0gaaHyuQf4H5pecrB/FYCT2sL9zAfy1Xyjou6L8X2W7YcLyBZCRtnq/zfAAAAAElFTkSuQmCC" /></a></p>
  <p>刘涤生 - 应尽便须尽 &copy; 2015 - 2016</p>
  <p>Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme
  <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a></p>
  <a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-2x icon-rss-square"></i></a>
</footer>

    </div>
  </div>
</aside>

  <main id="main">
    <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">刘涤生 - 应尽便须尽</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header index-header">

    <div class="container fade-scale">
        <h1 class="title">刘涤生 - 应尽便须尽</h1>
        <h5 class="subtitle">
            
                MICHAEL
            
        </h5>
    </div>

    

</header>

<div class="container body-wrap">

    <ul class="post-list">
    
        <li class="post-list-item fade">
            <article id="post-Java字符串"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time datetime="2016-04-17T07:17:06.000Z" itemprop="datePublished" class="post-time">
  2016-04-17 15:17:06
</time>

        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Java/">Java</a></li></ul>



    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/2016/04/17/Java字符串/">Java字符串</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent" >

    
        <h2 id="不可变String"><a href="#不可变String" class="headerlink" title="不可变String"></a>不可变String</h2><p>String对象时不可变的。查看JDK文档你就会发现，String类中每一个看起来会修改String值的方法，实际上都是创建了一个全新的String对象，这个新的String对象来包含修改后的字符串内容，而最初的String对象则没有变化。</p>
<p>看看下面的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Immutable</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * <span class="doctag">@param</span> args</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line"></div><div class="line">        String str = <span class="string">"hello"</span>;</div><div class="line">        System.out.println(str); <span class="comment">//hello</span></div><div class="line">        String str1 = upCase(str);</div><div class="line">        System.out.println(str1); <span class="comment">//HELLO</span></div><div class="line">        System.out.println(str); <span class="comment">//hello</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">upCase</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> s.toUpperCase();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>结果打印如下：</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">hello</span></div><div class="line">HELLO</div><div class="line">hello</div></pre></td></tr></table></figure>
<p>当把str传给upCase()方法时，实际上传递的是引用的一个拷贝。其实，每当把String对象作为方法的参数时，都会复制一份对象的引用，而该引用所指向的对象其实一直指向同一个内存地址，从未改变。 回到upCase方法的定义，传入其中的引用有了名字s，只有upCase方法运行的时候，局部引用s才回存在，一旦upCase运行结束，s就消失了。当然upCase的返回值，其实只是最终结果的引用。而这个引用已经指向了一个新的对象，而原本的str对象还在原始的位置。</p>
<h2 id="重载”-”与StringBuilder"><a href="#重载”-”与StringBuilder" class="headerlink" title="重载”+”与StringBuilder"></a>重载”+”与StringBuilder</h2><p>String的不可变性会带来一定的效率问题。为String对象重载的”+”操作符就是一个例子。重载的意思是，一个操作符在应用特定的类时，被赋予特殊的意义（用于String的”+”与”+=”是Java中仅有的两个重载过的操作符，而Java并不允许程序员重载任何操作符）。</p>
<p>操作符”+”可以用来连接String：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Concatention</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * <span class="doctag">@param</span> args</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        <span class="comment">// TODO Auto-generated method stub</span></div><div class="line"></div><div class="line">        String str = <span class="string">"hello"</span>;</div><div class="line">        String result = str + <span class="string">" welcom"</span> + <span class="string">" to beijing"</span>;</div><div class="line">        System.out.println(result);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">结果是:</div><div class="line">hello welcom to beijing</div></pre></td></tr></table></figure>
<p>这段代码可能是这样工作的：String有一个append（）方法，它会生成一个新的String对象，以包含”欢迎来”与str连接后的字符串。然后，该对象再与”到北京”相连，生成一个新的String对象result。 这种工作方式当然是可行的，但是为了生成最终的String，此方式会产生一大堆需要垃圾回收的中间对象。当达到一定的数量之后，性能表现会相当糟糕。</p>
<p>下面来看下以上代码到底是如何工作的，可以用JDK自带的工具javap命令来反编译以上代码。命令如下：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">javap -<span class="built_in">c</span> <span class="type">Concatention</span>  <span class="comment">//-c 表示生产JVM字节码</span></div></pre></td></tr></table></figure>
<p>编译后的字节码为：</p>
<figure class="highlight gauss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">Compiled from <span class="string">"Concatention.java"</span></div><div class="line">class Concatention &#123;</div><div class="line">  Concatention();</div><div class="line">    <span class="built_in">Code</span>:</div><div class="line">       <span class="number">0</span>: aload_0</div><div class="line">       <span class="number">1</span>: invokespecial <span class="meta">#1                  <span class="comment">// Method java/lang/Object."&lt;init&gt;":()V</span></span></div><div class="line">       <span class="number">4</span>: <span class="keyword">return</span></div><div class="line"></div><div class="line">  public static void main(java.lang.<span class="keyword">String</span>[]);</div><div class="line">    <span class="built_in">Code</span>:</div><div class="line">       <span class="number">0</span>: ldc           <span class="meta">#2                  <span class="comment">// String hello</span></span></div><div class="line">       <span class="number">2</span>: astore_1</div><div class="line">       <span class="number">3</span>: <span class="keyword">new</span>           <span class="meta">#3                  <span class="comment">// class java/lang/StringBuilder</span></span></div><div class="line">       <span class="number">6</span>: dup</div><div class="line">       <span class="number">7</span>: invokespecial <span class="meta">#4                  <span class="comment">// Method java/lang/StringBuilder."&lt;init&gt;":()V</span></span></div><div class="line">      <span class="number">10</span>: aload_1</div><div class="line">      <span class="number">11</span>: invokevirtual <span class="meta">#5                  <span class="comment">// Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;</span></span></div><div class="line">      <span class="number">14</span>: ldc           <span class="meta">#6                  <span class="comment">// String  welcom</span></span></div><div class="line">      <span class="number">16</span>: invokevirtual <span class="meta">#5                  <span class="comment">// Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;</span></span></div><div class="line">      <span class="number">19</span>: ldc           <span class="meta">#7                  <span class="comment">// String  to beijing</span></span></div><div class="line">      <span class="number">21</span>: invokevirtual <span class="meta">#5                  <span class="comment">// Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;</span></span></div><div class="line">      <span class="number">24</span>: invokevirtual <span class="meta">#8                  <span class="comment">// Method java/lang/StringBuilder.toString:()Ljava/lang/String;</span></span></div><div class="line">      <span class="number">27</span>: astore_2</div><div class="line">      <span class="number">28</span>: getstatic     <span class="meta">#9                  <span class="comment">// Field java/lang/System.out:Ljava/io/PrintStream;</span></span></div><div class="line">      <span class="number">31</span>: aload_2</div><div class="line">      <span class="number">32</span>: invokevirtual <span class="meta">#10                 <span class="comment">// Method java/io/PrintStream.println:(Ljava/lang/String;)V</span></span></div><div class="line">      <span class="number">35</span>: <span class="keyword">return</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>需要注意的重点是：编译器自动引入了java.lang.StringBuilder类。虽然我们在源代码中并没有使用StringBuilder类，但是编译器却自作主张地使用了它，因为它更高效。</p>
<p>现在，你也行会觉得可以随意使用String对象，反正编译器会自动优化性能。可是在这之前，让我们更深入地看看编译器能为我们优化到什么程序。下面的程序采用两种方式生成一个String：方法一使用说个String对象，方法二使用StringBuilder</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WhitherStringBuilder</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">implicit</span><span class="params">(String[] strs)</span> </span>&#123;</div><div class="line"></div><div class="line">        String result = <span class="string">""</span>;</div><div class="line"></div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; strs.length;i++) &#123;</div><div class="line">            result += strs[i];</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> result;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">explicit</span><span class="params">(String[] strs)</span> </span>&#123;</div><div class="line"></div><div class="line">        StringBuilder builder = <span class="keyword">new</span> StringBuilder();</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; strs.length;i++) &#123;</div><div class="line">            builder.append(strs[i]);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> builder.toString();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>现在运行<code>javap -c WitherStringBuilder</code>可以看到两个方法对应的字节码，首先是implicit()方法：</p>
<figure class="highlight gauss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">public java.lang.<span class="keyword">String</span> implicit(java.lang.<span class="keyword">String</span>[]);</div><div class="line">  <span class="built_in">Code</span>:</div><div class="line">     <span class="number">0</span>: ldc           <span class="meta">#2                  <span class="comment">// String</span></span></div><div class="line">     <span class="number">2</span>: astore_2</div><div class="line">     <span class="number">3</span>: iconst_0</div><div class="line">     <span class="number">4</span>: istore_3</div><div class="line">     <span class="number">5</span>: iload_3</div><div class="line">     <span class="number">6</span>: aload_1</div><div class="line">     <span class="number">7</span>: arraylength</div><div class="line">     <span class="number">8</span>: if_icmpge     <span class="number">38</span></div><div class="line">    <span class="number">11</span>: <span class="keyword">new</span>           <span class="meta">#3                  <span class="comment">// class java/lang/StringBuilder</span></span></div><div class="line">    <span class="number">14</span>: dup</div><div class="line">    <span class="number">15</span>: invokespecial <span class="meta">#4                  <span class="comment">// Method java/lang/StringBuilder."&lt;init&gt;":()V</span></span></div><div class="line">    <span class="number">18</span>: aload_2</div><div class="line">    <span class="number">19</span>: invokevirtual <span class="meta">#5                  <span class="comment">// Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;</span></span></div><div class="line">    <span class="number">22</span>: aload_1</div><div class="line">    <span class="number">23</span>: iload_3</div><div class="line">    <span class="number">24</span>: aaload</div><div class="line">    <span class="number">25</span>: invokevirtual <span class="meta">#5                  <span class="comment">// Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;</span></span></div><div class="line">    <span class="number">28</span>: invokevirtual <span class="meta">#6                  <span class="comment">// Method java/lang/StringBuilder.toString:()Ljava/lang/String;</span></span></div><div class="line">    <span class="number">31</span>: astore_2</div><div class="line">    <span class="number">32</span>: iinc          <span class="number">3</span>, <span class="number">1</span></div><div class="line">    <span class="number">35</span>: <span class="keyword">goto</span>          <span class="number">5</span></div><div class="line">    <span class="number">38</span>: aload_2</div><div class="line">    <span class="number">39</span>: areturn</div></pre></td></tr></table></figure>
<p>从第8行到第35行构成了一个循环体。要注意的重点是：StringBuilder是在循环之内构造的，这意味着每经过循环一次，就会创建一个新的StringBuilder对象。</p>
<p>下面是explicit()方法对应的字节码：</p>
<figure class="highlight gauss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">public java.lang.<span class="keyword">String</span> explicit(java.lang.<span class="keyword">String</span>[]);</div><div class="line">   <span class="built_in">Code</span>:</div><div class="line">      <span class="number">0</span>: <span class="keyword">new</span>           <span class="meta">#3                  <span class="comment">// class java/lang/StringBuilder</span></span></div><div class="line">      <span class="number">3</span>: dup</div><div class="line">      <span class="number">4</span>: invokespecial <span class="meta">#4                  <span class="comment">// Method java/lang/StringBuilder."&lt;init&gt;":()V</span></span></div><div class="line">      <span class="number">7</span>: astore_2</div><div class="line">      <span class="number">8</span>: iconst_0</div><div class="line">      <span class="number">9</span>: istore_3</div><div class="line">     <span class="number">10</span>: iload_3</div><div class="line">     <span class="number">11</span>: aload_1</div><div class="line">     <span class="number">12</span>: arraylength</div><div class="line">     <span class="number">13</span>: if_icmpge     <span class="number">30</span></div><div class="line">     <span class="number">16</span>: aload_2</div><div class="line">     <span class="number">17</span>: aload_1</div><div class="line">     <span class="number">18</span>: iload_3</div><div class="line">     <span class="number">19</span>: aaload</div><div class="line">     <span class="number">20</span>: invokevirtual <span class="meta">#5                  <span class="comment">// Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;</span></span></div><div class="line">     <span class="number">23</span>: <span class="keyword">pop</span></div><div class="line">     <span class="number">24</span>: iinc          <span class="number">3</span>, <span class="number">1</span></div><div class="line">     <span class="number">27</span>: <span class="keyword">goto</span>          <span class="number">10</span></div><div class="line">     <span class="number">30</span>: aload_2</div><div class="line">     <span class="number">31</span>: invokevirtual <span class="meta">#6                  <span class="comment">// Method java/lang/StringBuilder.toString:()Ljava/lang/String;</span></span></div><div class="line">     <span class="number">34</span>: areturn</div></pre></td></tr></table></figure>
<p>可以看到，不仅循环部分的代码更简短、更简单，而且它只生成一个StringBuilder对象。显示地创建StringBuilder还允许你预先为其指定大小。如果你已经知道最终的字符串大概有多长，那预先指定StringBuilder的大小可以避免多次重新分配缓冲。</p>
<p>因此，当你为一个类编写toString()方法时，如果字符串操作比较简单，那就可以信赖编译器,它会为你合理地构造最终的字符串结果。但是，如果你要在toString方法中使用循环时，最好还是自己创建一个StringBuilder对象，用它来构造最终的结果。</p>
<h2 id="无意识的递归"><a href="#无意识的递归" class="headerlink" title="无意识的递归"></a>无意识的递归</h2><p>Java中的每个类从根本上都是继承自Object，标准容器类自然也不例外。因此容器类都有toString方法，并复写了该方法，使得它生成的String结果能够表达容器自身，以及容器所包含的对象。例如ArrayList.toString()，它会遍历ArrayList中包含的所有对象，调用每个元素上的toString方法：</p>
<p>如果你希望toString()方法打印出对象的内存地址，也许你会考虑使用this关键字：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InfiniteRecursion</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"Recursion address: "</span> + <span class="keyword">this</span> + <span class="string">"\n"</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line"></div><div class="line">        List&lt;InfiniteRecursion&gt; list = <span class="keyword">new</span> ArrayList&lt;InfiniteRecursion&gt;();</div><div class="line"></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</div><div class="line">            list.add(<span class="keyword">new</span> InfiniteRecursion());</div><div class="line"></div><div class="line">        System.out.println(list);</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">打印结果</div><div class="line">Exception in thread <span class="string">"main"</span> java.lang.StackOverflowError</div><div class="line">    at java.lang.String.getChars(String.java:<span class="number">826</span>)</div><div class="line">    at java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:<span class="number">416</span>)</div><div class="line">    at java.lang.StringBuilder.append(StringBuilder.java:<span class="number">132</span>)</div><div class="line">    at com.micheal.java.staticdemo.InfiniteRecursion.toString(InfiniteRecursion.java:<span class="number">12</span>)</div><div class="line">    at com.micheal.java.staticdemo.InfiniteRecursion.toString(InfiniteRecursion.java:<span class="number">12</span>)</div><div class="line">    at com.micheal.java.staticdemo.InfiniteRecursion.toString(InfiniteRecursion.java:<span class="number">12</span>)</div></pre></td></tr></table></figure>
<p>这里发生了自动类型转换，由InfiniteRecursion类型转换成String类型。因为编译器看到一个String对象后面跟着”+”，而在后面的对象不是String而是this，于是编译器试着将this转换成一个String。它怎么转换的呢，正是通过调用this上的toString方法，于是就发生了递归调用，造成栈溢出。</p>
<p>如果你真的想要打印出对象的内存地址，应该调用Objec.toString()方法，所有，你应该调用super.toString()方法.</p>
<h2 id="String上的操作"><a href="#String上的操作" class="headerlink" title="String上的操作"></a>String上的操作</h2><p>以下是String对象具备的一些基本方法，重载的方法归纳在同一行中：</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/string-String%E4%B8%8A%E7%9A%84%E6%93%8D%E4%BD%9C1.png" alt=""> <img src="http://7xs7a3.com1.z0.glb.clouddn.com/string-String%E4%B8%8A%E7%9A%84%E6%93%8D%E4%BD%9C2.png" alt=""></p>
<p>上上图表中可以看出，当需要改变字符串的内容时，String类的方法都会返回一个新的String对象。同时，如果内容没有发生改变，String的方法只是返回指向原对象的引用而已，这可以节约存储空间以及避免额外的开销。</p>
<h2 id="格式化输出"><a href="#格式化输出" class="headerlink" title="格式化输出"></a>格式化输出</h2><h3 id="System-out-printf"><a href="#System-out-printf" class="headerlink" title="System.out.printf()"></a>System.out.printf()</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">System.out.printf(<span class="string">"Row: %d %s\n"</span>,<span class="number">12</span>,<span class="string">"just"</span>);</div></pre></td></tr></table></figure>
<h3 id="System-out-format"><a href="#System-out-format" class="headerlink" title="System.out.format()"></a>System.out.format()</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">System.out.format(<span class="string">"Row: %d %s\n"</span>,<span class="number">12</span>,<span class="string">"just"</span>);</div></pre></td></tr></table></figure>

    

        <a href="/2016/04/17/Java字符串/" class="post-more waves-effect waves-button">
            阅读全文...
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-Python基础之(二)字符串列表和元组"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time datetime="2016-04-12T15:05:37.000Z" itemprop="datePublished" class="post-time">
  2016-04-12 23:05:37
</time>

        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/python/">python</a></li></ul>



    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/2016/04/12/Python基础之(二)字符串列表和元组/">Python基础之(二)字符串、列表和元组</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent" >

    
        <h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><p>在Python中，万物皆对象，显然字符串是对象类型，用str表示。字符串类型通常用单引号或者双引号包裹起来。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">"Hello,world"</span></div><div class="line"><span class="string">'Hello,world'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'Hello,world'</span></div><div class="line"><span class="string">'Hello,world'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(<span class="string">"Hello,world"</span>)</div><div class="line">&lt;type <span class="string">'str'</span>&gt;</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h3 id="变量和字符串"><a href="#变量和字符串" class="headerlink" title="变量和字符串"></a>变量和字符串</h3><p>在Python中变量无类型，对象有类型</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="string">"hello,world"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b</div><div class="line"><span class="string">'hello,world'</span></div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> b</div><div class="line">hello,world</div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(b)</div><div class="line">&lt;type <span class="string">'str'</span>&gt;</div></pre></td></tr></table></figure>
<h3 id="连接字符串"><a href="#连接字符串" class="headerlink" title="连接字符串"></a>连接字符串</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">"py"</span> + <span class="string">"thon"</span></div><div class="line"><span class="string">'python'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span></div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">1989</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="string">"free"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> a + b</div><div class="line"></div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;pyshell#195&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    <span class="keyword">print</span> a + b</div><div class="line">TypeError: unsupported operand type(s) <span class="keyword">for</span> +: <span class="string">'int'</span> <span class="keyword">and</span> <span class="string">'str'</span></div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> b + `a` <span class="comment">#反引号将整数a转化为字符串</span></div><div class="line">free1989</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>用“+”拼接起来的字符串的两个对象必须是同一类型的。如果是数字则是求和，如果是字符串则得到一个新的字符串。</p>
<p>还有其他两种方法可以将整数转化为字符串：</p>
<ul>
<li>str():将整数对象转换为字符串对象</li>
</ul>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; print <span class="keyword">b </span>+ <span class="keyword">str(a)</span></div><div class="line"><span class="symbol">free1989</span></div></pre></td></tr></table></figure>
<ul>
<li>repr():相当于反引号``</li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;</span>&gt; print b + repr(a)</div><div class="line">free1989</div></pre></td></tr></table></figure>
<ul>
<li>int():将字符串对象转换为整数对象</li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;</span>&gt; a = <span class="string">"250"</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; b = int(a)</div><div class="line"><span class="meta">&gt;&gt;</span>&gt; b</div><div class="line"><span class="number">250</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; type(b)</div><div class="line">&lt;type <span class="string">'int'</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;</span>&gt;</div></pre></td></tr></table></figure>
<h3 id="转义字符"><a href="#转义字符" class="headerlink" title="转义字符"></a>转义字符</h3><p>在字符串中，总会有一些特殊的符号，就需要用转义符。所谓转义，就是不采用符号本来的含义，而采用另外一含义。下面表格中列出常用的转义符：</p>
<table>
<thead>
<tr>
<th>转义字符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>\</td>
<td>(在行尾时) 续行符</td>
</tr>
<tr>
<td>\</td>
<td>反斜杠符号</td>
</tr>
<tr>
<td>\’</td>
<td>单引号</td>
</tr>
<tr>
<td>\”</td>
<td>双引号</td>
</tr>
<tr>
<td>\a</td>
<td>响铃</td>
</tr>
<tr>
<td>\b</td>
<td>退格(Backspace)</td>
</tr>
<tr>
<td>\e</td>
<td>转义</td>
</tr>
<tr>
<td>\000</td>
<td>空</td>
</tr>
<tr>
<td>\n</td>
<td>换行</td>
</tr>
<tr>
<td>\v</td>
<td>纵向制表符</td>
</tr>
<tr>
<td>\t</td>
<td>横向制表符</td>
</tr>
<tr>
<td>\r</td>
<td>回车</td>
</tr>
<tr>
<td>\f</td>
<td>换页</td>
</tr>
<tr>
<td>\oyy</td>
<td>八进制数，yy代表的字符，例如：\o12代表换行</td>
</tr>
<tr>
<td>\xyy</td>
<td>十六进制数，yy代表的字符，例如：\x0a代表换行</td>
</tr>
<tr>
<td>\other</td>
<td>其它的字符以普通格式输出</td>
</tr>
</tbody>
</table>
<h3 id="原始字符串"><a href="#原始字符串" class="headerlink" title="原始字符串"></a>原始字符串</h3><p>用转义符能够让字符串中的某些符号表示原来的含义，而不是被解析成某种具有特别能力的符号。下面看看这个代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>dos = <span class="string">"c:\news"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>dos</div><div class="line"><span class="string">'c:\news'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> dos <span class="comment">#当用print打印时就出现问题了</span></div><div class="line">c:</div><div class="line">ews</div></pre></td></tr></table></figure>
<p>如何避免上述代码的问题？有两种方法，其一是前面介绍的转义符解决。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>dos = <span class="string">"c:\\news"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> dos</div><div class="line">c:\news</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>其二是声明为原始字符串</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>dos = <span class="string">r"c:\news"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> dos</div><div class="line">c:\news</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>dos = <span class="string">r"c:\news\python"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> dos</div><div class="line">c:\news\python</div></pre></td></tr></table></figure>
<p>如<code>r&quot;c:\news&quot;</code>，由r开头引起的字符串就是声明了后面引号里的东西是原始字符串，在里面放任何字符都表示该字符的原始含义，不需要再用转义符了。</p>
<h3 id="raw-input和print"><a href="#raw-input和print" class="headerlink" title="raw_input和print"></a>raw_input和print</h3><p>下面实现接收和打印用户通过键盘输入的内容：</p>
<p>不过在写这个功能前，要了解函数：</p>
<ul>
<li>Python 2：<code>raw_input()</code></li>
<li>Python 3: <code>input()</code></li>
</ul>
<p>这是Python的内建函数（built-in function）。关于内建函数，可以分别通过下面的链接查看：</p>
<ul>
<li><a href="https://docs.python.org/2/library/functions.html" target="_blank" rel="external">Python 2的内建函数</a></li>
<li><a href="https://docs.python.org/3.5/library/functions.html" target="_blank" rel="external">Python 3的内建函数</a></li>
</ul>
<p>关于Python的内建函数，下面列出来，供参考：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">abs</span>()	<span class="selector-tag">divmod</span>()	<span class="selector-tag">input</span>()	<span class="selector-tag">open</span>()	<span class="selector-tag">staticmethod</span>()</div><div class="line"><span class="keyword">all</span>()	<span class="selector-tag">enumerate</span>()	<span class="selector-tag">int</span>()	<span class="selector-tag">ord</span>()	<span class="selector-tag">str</span>()</div><div class="line"><span class="selector-tag">any</span>()	<span class="selector-tag">eval</span>()	<span class="selector-tag">isinstance</span>()	<span class="selector-tag">pow</span>()	<span class="selector-tag">sum</span>()</div><div class="line"><span class="selector-tag">basestring</span>()	<span class="selector-tag">execfile</span>()	<span class="selector-tag">issubclass</span>()	<span class="selector-tag">print</span>()	<span class="selector-tag">super</span>()</div><div class="line"><span class="selector-tag">bin</span>()	<span class="selector-tag">file</span>()	<span class="selector-tag">iter</span>()	<span class="selector-tag">property</span>()	<span class="selector-tag">tuple</span>()</div><div class="line"><span class="selector-tag">bool</span>()	<span class="selector-tag">filter</span>()	<span class="selector-tag">len</span>()	<span class="selector-tag">range</span>()	<span class="selector-tag">type</span>()</div><div class="line"><span class="selector-tag">bytearray</span>()	<span class="selector-tag">float</span>()	<span class="selector-tag">list</span>()	<span class="selector-tag">raw_input</span>()	<span class="selector-tag">unichr</span>()</div><div class="line"><span class="selector-tag">callable</span>()	<span class="selector-tag">format</span>()	<span class="selector-tag">locals</span>()	<span class="selector-tag">reduce</span>()	<span class="selector-tag">unicode</span>()</div><div class="line"><span class="selector-tag">chr</span>()	<span class="selector-tag">frozenset</span>()	<span class="selector-tag">long</span>()	<span class="selector-tag">reload</span>()	<span class="selector-tag">vars</span>()</div><div class="line"><span class="selector-tag">classmethod</span>()	<span class="selector-tag">getattr</span>()	<span class="selector-tag">map</span>()	<span class="selector-tag">repr</span>()	<span class="selector-tag">xrange</span>()</div><div class="line"><span class="selector-tag">cmp</span>()	<span class="selector-tag">globals</span>()	<span class="selector-tag">max</span>()	<span class="selector-tag">reversed</span>()	<span class="selector-tag">zip</span>()</div><div class="line"><span class="selector-tag">compile</span>()	<span class="selector-tag">hasattr</span>()	<span class="selector-tag">memoryview</span>()	<span class="selector-tag">round</span>()	<span class="selector-tag">__import__</span>()</div><div class="line"><span class="selector-tag">complex</span>()	<span class="selector-tag">hash</span>()	<span class="selector-tag">min</span>()	<span class="selector-tag">set</span>()	</div><div class="line"><span class="selector-tag">delattr</span>()	<span class="selector-tag">help</span>()	<span class="selector-tag">next</span>()	<span class="selector-tag">setattr</span>()	</div><div class="line"><span class="selector-tag">dict</span>()	<span class="selector-tag">hex</span>()	<span class="selector-tag">object</span>()	<span class="selector-tag">slice</span>()	</div><div class="line"><span class="selector-tag">dir</span>()	<span class="selector-tag">id</span>()	<span class="selector-tag">oct</span>()	<span class="selector-tag">sorted</span>()</div></pre></td></tr></table></figure>
<p>怎么才能知道哪个函数怎么用，并且用来干什么的呢？</p>
<ul>
<li>help(abs)命令</li>
<li><p><a href="https://docs.python.org/2/library/functions.html" target="_blank" rel="external">Python的官网https://docs.python.org/2/library/functions.html</a></p>
</li>
<li><p>raw_input</p>
</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; raw_input("input your name: ")</div><div class="line">input your name: michael</div><div class="line">'michael'</div><div class="line">&gt;&gt;&gt; name = raw_input("input your name: ")</div><div class="line">input your name: michael</div><div class="line">&gt;&gt;&gt; name</div><div class="line">'michael'</div><div class="line">&gt;&gt;&gt; type name</div><div class="line">SyntaxError: invalid syntax</div><div class="line">&gt;&gt;&gt; type(name)</div><div class="line">&lt;type 'str'&gt;</div><div class="line">&gt;&gt;&gt; age = raw_input("How old are you? ");</div><div class="line">How old are you? 25  #输入数字</div><div class="line">&gt;&gt;&gt; age</div><div class="line">'25'</div><div class="line">&gt;&gt;&gt; type(age)</div><div class="line">&lt;type 'str'&gt;  #返回仍是str类型</div></pre></td></tr></table></figure>
<ul>
<li>print</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> <span class="string">"Hello, world"</span></div><div class="line">Hello, world</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">"python"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> a</div><div class="line">python</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="string">"good"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> a,b</div><div class="line">python good</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>特别提醒的是，print的返回值默认是以<code>\n</code>结尾的，所以每个输出语句之后自动换行。</p>
<h3 id="索引和切片"><a href="#索引和切片" class="headerlink" title="索引和切片"></a>索引和切片</h3><h4 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h4><p>在Python中，把像字符串这样的对象类型统称为<strong>序列</strong>，顾名思义，序列就是有序排列。在这个序列中，每个人都有编号，编号和每个字符一一对应，在Python中这些编号称为<strong>索引</strong>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>lang = <span class="string">"study python"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lang[<span class="number">0</span>]</div><div class="line"><span class="string">'s'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lang[<span class="number">1</span>]</div><div class="line"><span class="string">'t'</span></div></pre></td></tr></table></figure>
<p>也可以这样做：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">"study python"</span>[<span class="number">0</span>]</div><div class="line"><span class="string">'s'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">"study python"</span>[<span class="number">1</span>]</div><div class="line"><span class="string">'t'</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>通过字符找到其在字符串中的索引值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>lang = <span class="string">"study python"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lang.index(<span class="string">"p"</span>)</div><div class="line"><span class="number">6</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lang.<span class="keyword">in</span></div><div class="line">SyntaxError: invalid syntax</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lang.index(<span class="string">"y"</span>)</div><div class="line"><span class="number">4</span></div></pre></td></tr></table></figure>
<h4 id="切片"><a href="#切片" class="headerlink" title="切片"></a>切片</h4><p>不管是得到一个字符还是多个字符，通过索引得到字符的过程称为<strong>切片</strong>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>lang = <span class="string">"study python"</span></div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lang[<span class="number">2</span>:<span class="number">9</span>] <span class="comment">#得到从2号到9号之间的字符串（包括2号但不包括9号）</span></div><div class="line"><span class="string">'udy pyt'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b = lang[<span class="number">1</span>:] <span class="comment">#得到从1号到最末尾的字符</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b</div><div class="line"><span class="string">'tudy python'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c = lang[:] <span class="comment">#得到所有的字符</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c</div><div class="line"><span class="string">'study python'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>d = lang[:<span class="number">10</span>] <span class="comment">#得到从0到10号之前的字符</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>d</div><div class="line"><span class="string">'study pyth'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lang[<span class="number">1</span>:<span class="number">12</span>] </div><div class="line"><span class="string">'tudy python'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lang[<span class="number">0</span>:<span class="number">13</span>] <span class="comment">#如果第二个数字的长度大于字符串的长度，得到的返回结果就自动到最大长度终止，但是这种获得切片的方法是值得提倡的。特别是如果在循环中，这样做很可能会遇到麻烦。</span></div><div class="line"><span class="string">'study python'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lang[<span class="number">0</span>:<span class="number">14</span>]</div><div class="line"><span class="string">'study python</span></div></pre></td></tr></table></figure>
<p>如果在切片的时候，冒号左右都不写数字，就是前面所操作的<code>c = lang[:]</code>,其结果是变量的值c与源字符串lang一样，即复制了一份，那是不是真的复制呢？下面的方式检验一下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>id(c)</div><div class="line"><span class="number">44841944</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>id(lang)</div><div class="line"><span class="number">44841944</span></div></pre></td></tr></table></figure>
<p>从上面可以看出,两个内存地址一样，说明c和lang两个变量指向的是同一个对象。用<code>c = lang[:]</code>的方式并没有生成一个新的字符串，而是将变量c这个标签页贴在原来那个字符串上了。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>lang = <span class="string">"study python"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c = lang</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>id(c)</div><div class="line"><span class="number">50456160</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>id(lang)</div><div class="line"><span class="number">50456160</span></div></pre></td></tr></table></figure>
<p>上述这种情况，变量c和lang也指向同一个对象。</p>
<h3 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h3><p>所有序列都有如下操作，字符串是序列的子集。</p>
<ul>
<li>len():返回序列长度</li>
<li>+:连接两个序列</li>
<li>*:重复序列元素</li>
<li>in: 判断元素是否存在于序列中</li>
<li>max():返回最大值</li>
<li>min():返回最小值</li>
<li>cmp(str1,str2): 比较两个序列值是否相同</li>
</ul>
<h4 id="“-”连接字符串"><a href="#“-”连接字符串" class="headerlink" title="“+”连接字符串"></a>“+”连接字符串</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>str1 = <span class="string">"study"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>str2 = <span class="string">"python"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>str1 + str2</div><div class="line"><span class="string">'studypython'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>str1 + <span class="string">"--&gt;"</span> + str2</div><div class="line"><span class="string">'study--&gt;python'</span></div></pre></td></tr></table></figure>
<h4 id="in"><a href="#in" class="headerlink" title="in"></a>in</h4><p>in用来判断某个字符串是不是在另外一个字符串内，或者判断某个字符串内是否包含某个字符串，包含则返回True，否则返回false。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>str = <span class="string">"study python"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">"s"</span> <span class="keyword">in</span> str</div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">"i"</span> <span class="keyword">in</span> str</div><div class="line"><span class="keyword">False</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">"su"</span> <span class="keyword">in</span> str</div><div class="line"><span class="keyword">False</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">"stu"</span> <span class="keyword">in</span> str</div><div class="line"><span class="keyword">True</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h4 id="max"><a href="#max" class="headerlink" title="max()"></a>max()</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<blockquote>
<blockquote>
<blockquote>
<p>str = “python”<br>max(str)<br>‘y’<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure></p>
</blockquote>
</blockquote>
</blockquote>
<h4 id="min"><a href="#min" class="headerlink" title="min()"></a>min()</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>str = <span class="string">"python"</span></div><div class="line"><span class="string">'y'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>min(str)</div><div class="line"><span class="string">'h'</span></div></pre></td></tr></table></figure>
<h4 id="cmp"><a href="#cmp" class="headerlink" title="cmp()"></a>cmp()</h4><p>将两个字符串进行比较，首先将字符串中的符号转化为对应的数字，然后再比较</p>
<ul>
<li>如果返回的数值小于0，说明前者小于后者</li>
<li>等于0，表示两者相等</li>
<li>大于0，表示前者大于后者</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>cmp(<span class="string">"aaa"</span>,<span class="string">"abc"</span>)  <span class="comment">#</span></div><div class="line"><span class="number">-1</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>cmp(<span class="string">"abc"</span>,<span class="string">"aaa"</span>);</div><div class="line"><span class="number">1</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>cmp(<span class="string">"abc"</span>,<span class="string">"abc"</span>);</div><div class="line"><span class="number">0</span></div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>ord(<span class="string">"a"</span>) <span class="comment">#返回字符的ASCII值</span></div><div class="line"><span class="number">97</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>chr(<span class="number">97</span>)  <span class="comment">#返回ASCII值所对应的字符</span></div><div class="line"><span class="string">'a'</span></div></pre></td></tr></table></figure>
<h4 id="“-”"><a href="#“-”" class="headerlink" title="“*”"></a>“*”</h4><p>以指定的次数重复打印字符串</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>str = <span class="string">"python"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>str * <span class="number">4</span></div><div class="line"><span class="string">'pythonpythonpythonpython'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> <span class="string">"-"</span> * <span class="number">20</span></div><div class="line">--------------------</div></pre></td></tr></table></figure>
<h4 id="len"><a href="#len" class="headerlink" title="len()"></a>len()</h4><p>len()返回字符串的长度，返回值类型是int型</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">"hello"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>m = len(a)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>m</div><div class="line"><span class="number">5</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(m)</div><div class="line">&lt;type <span class="string">'int'</span>&gt;</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h3 id="常用的字符串方法"><a href="#常用的字符串方法" class="headerlink" title="常用的字符串方法"></a>常用的字符串方法</h3><p>字符串的方法有很多，可以通过dir来查看：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;</span>&gt; dir(str)</div><div class="line">[<span class="string">'__add__'</span>, <span class="string">'__class__'</span>, <span class="string">'__contains__'</span>, <span class="string">'__delattr__'</span>, <span class="string">'__doc__'</span>, <span class="string">'__eq__'</span>, <span class="string">'__format__'</span>, <span class="string">'__ge__'</span>, <span class="string">'__getattribute__'</span>, <span class="string">'__getitem__'</span>, <span class="string">'__getnewargs__'</span>, <span class="string">'__getslice__'</span>, <span class="string">'__gt__'</span>, <span class="string">'__hash__'</span>, <span class="string">'__init__'</span>, <span class="string">'__le__'</span>, <span class="string">'__len__'</span>, <span class="string">'__lt__'</span>, <span class="string">'__mod__'</span>, <span class="string">'__mul__'</span>, <span class="string">'__ne__'</span>, <span class="string">'__new__'</span>, <span class="string">'__reduce__'</span>, <span class="string">'__reduce_ex__'</span>, <span class="string">'__repr__'</span>, <span class="string">'__rmod__'</span>, <span class="string">'__rmul__'</span>, <span class="string">'__setattr__'</span>, <span class="string">'__sizeof__'</span>, <span class="string">'__str__'</span>, <span class="string">'__subclasshook__'</span>, <span class="string">'_formatter_field_name_split'</span>, <span class="string">'_formatter_parser'</span>, <span class="string">'capitalize'</span>, <span class="string">'center'</span>, <span class="string">'count'</span>, <span class="string">'decode'</span>, <span class="string">'encode'</span>, <span class="string">'endswith'</span>, <span class="string">'expandtabs'</span>, <span class="string">'find'</span>, <span class="string">'format'</span>, <span class="string">'index'</span>, <span class="string">'isalnum'</span>, <span class="string">'isalpha'</span>, <span class="string">'isdigit'</span>, <span class="string">'islower'</span>, <span class="string">'isspace'</span>, <span class="string">'istitle'</span>, <span class="string">'isupper'</span>, <span class="string">'join'</span>, <span class="string">'ljust'</span>, <span class="string">'lower'</span>, <span class="string">'lstrip'</span>, <span class="string">'partition'</span>, <span class="string">'replace'</span>, <span class="string">'rfind'</span>, <span class="string">'rindex'</span>, <span class="string">'rjust'</span>, <span class="string">'rpartition'</span>, <span class="string">'rsplit'</span>, <span class="string">'rstrip'</span>, <span class="string">'split'</span>, <span class="string">'splitlines'</span>, <span class="string">'startswith'</span>, <span class="string">'strip'</span>, <span class="string">'swapcase'</span>, <span class="string">'title'</span>, <span class="string">'translate'</span>, <span class="string">'upper'</span>, <span class="string">'zfill'</span>]</div></pre></td></tr></table></figure>
<h4 id="判断字符串是否全是字母"><a href="#判断字符串是否全是字母" class="headerlink" title="判断字符串是否全是字母"></a>判断字符串是否全是字母</h4><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;</span>&gt; <span class="string">"python"</span>.isalpha()  <span class="comment">#字符串全是字母，返回TRUE</span></div><div class="line">True</div><div class="line"><span class="meta">&gt;&gt;</span>&gt; <span class="string">"2python"</span>.isalpha() <span class="comment">#字符串含有非字母，返回FALSE</span></div><div class="line">False</div><div class="line"><span class="meta">&gt;&gt;</span>&gt;</div></pre></td></tr></table></figure>
<h4 id="分割字符串"><a href="#分割字符串" class="headerlink" title="分割字符串"></a>分割字符串</h4><p>split()作用是将字符串根据某个分隔符进行分割。</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;</span>&gt; str = <span class="string">"I love Beijing"</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; str.split(<span class="string">" "</span>)</div><div class="line">[<span class="string">'I'</span>, <span class="string">'love'</span>, <span class="string">'Beijing'</span>]  <span class="comment">#返回值为名叫列表（list）的类型</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; str = <span class="string">"www.baidu.com"</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; str.split(<span class="string">","</span>)</div><div class="line">[<span class="string">'www'</span>, <span class="string">'baidu'</span>, <span class="string">'com'</span>]</div><div class="line"><span class="meta">&gt;&gt;</span>&gt;</div></pre></td></tr></table></figure>
<h4 id="去掉字符串两头的空格"><a href="#去掉字符串两头的空格" class="headerlink" title="去掉字符串两头的空格"></a>去掉字符串两头的空格</h4><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;</span>&gt; str = <span class="string">"  python  "</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; str.strip()  <span class="comment">#去掉字符串左右空格</span></div><div class="line"><span class="string">'python'</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; str.lstrip() <span class="comment">#去掉字符串左边空格</span></div><div class="line"><span class="string">'python  '</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; str.rstrip() <span class="comment">#去掉字符串右边空格</span></div><div class="line"><span class="string">'  python'</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt;</div></pre></td></tr></table></figure>
<h4 id="字符大小写转换"><a href="#字符大小写转换" class="headerlink" title="字符大小写转换"></a>字符大小写转换</h4><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;</span>&gt; str = <span class="string">"pyThon"</span> </div><div class="line"><span class="meta">&gt;&gt;</span>&gt; str.upper() <span class="comment">#将小写字母完全变为大写字母</span></div><div class="line"><span class="string">'PYTHON'</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; str.lower() <span class="comment">#将大写字母完全变成小写字母</span></div><div class="line"><span class="string">'python'</span></div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; str.isupper() <span class="comment">#判断是否全是大写字母</span></div><div class="line">False</div><div class="line"><span class="meta">&gt;&gt;</span>&gt; str.islower() <span class="comment">#判断是否全是小写字母</span></div><div class="line">False</div><div class="line"><span class="meta">&gt;&gt;</span>&gt; str = <span class="string">"this is book"</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; str.capitalize() <span class="comment">#把所有单词的第一个字母转化为小写字母</span></div><div class="line"><span class="string">'This is book'</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; str.istitle() <span class="comment">#判断每个单词的第一个字母是否为大写字母</span></div><div class="line">False</div><div class="line"><span class="meta">&gt;&gt;</span>&gt;</div></pre></td></tr></table></figure>
<h4 id="join连接字符串"><a href="#join连接字符串" class="headerlink" title="join连接字符串"></a>join连接字符串</h4><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;</span>&gt; b = <span class="string">"www.baidu.com"</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; c = b.split(<span class="string">"."</span>)</div><div class="line"><span class="meta">&gt;&gt;</span>&gt; c</div><div class="line">[<span class="string">'www'</span>, <span class="string">'baidu'</span>, <span class="string">'com'</span>]</div><div class="line"><span class="meta">&gt;&gt;</span>&gt; <span class="string">"."</span>.join(c)</div><div class="line"><span class="string">'www.baidu.com'</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; <span class="string">"**"</span>.join(c)</div><div class="line"><span class="string">'www**baidu**com'</span></div></pre></td></tr></table></figure>
<h3 id="字符串格式化输出"><a href="#字符串格式化输出" class="headerlink" title="字符串格式化输出"></a>字符串格式化输出</h3><h4 id="使用占位符"><a href="#使用占位符" class="headerlink" title="使用占位符"></a>使用占位符</h4><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;</span>&gt; <span class="string">"I like %s"</span> % <span class="string">"Python"</span> <span class="comment">#%s表示字符串</span></div><div class="line"><span class="string">'I like Python'</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; <span class="string">"%d years old"</span> % <span class="number">25</span> <span class="comment">#%d表示整数</span></div><div class="line"><span class="string">'25 years old'</span></div><div class="line"><span class="string">"I like 'python'"</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; <span class="string">"%s is %d years old"</span> % (<span class="string">"deason"</span>,<span class="number">25</span>)</div><div class="line"><span class="string">'deason is 25 years old'</span></div></pre></td></tr></table></figure>
<ul>
<li>%s 字符串（采用str()的显示）</li>
<li>%r 字符串（采用repr（）的显示）</li>
<li>%c 单个字符</li>
<li>%b 二进制整数</li>
<li>%d 十进制整数</li>
<li>%e 指数（底数为e）</li>
<li>%f 浮点数</li>
</ul>
<h4 id="使用format格式化"><a href="#使用format格式化" class="headerlink" title="使用format格式化"></a>使用format格式化</h4><p>{}作为占位符</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;</span>&gt; str = <span class="string">"I like &#123;&#125;"</span>.format(<span class="string">"python"</span>);</div><div class="line">&gt;&gt;&gt; str</div><div class="line"><span class="string">'I like python'</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; str = <span class="string">"&#123;0&#125; is &#123;1&#125; years old"</span>.format(<span class="string">"michael"</span>,<span class="number">25</span>)</div><div class="line"><span class="meta">&gt;&gt;</span>&gt; str</div><div class="line"><span class="string">'michael is 25 years old'</span></div></pre></td></tr></table></figure>
<h4 id="字典式格式化"><a href="#字典式格式化" class="headerlink" title="字典式格式化"></a>字典式格式化</h4><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;</span>&gt; lang = <span class="string">"python"</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; print <span class="string">"I love %(program)s"</span> <span class="string">%&#123;"program":lang&#125;</span></div><div class="line">I love python</div><div class="line"><span class="meta">&gt;&gt;</span>&gt; print <span class="string">"I love %(program)s"</span> <span class="string">%&#123;"program":"python"&#125;</span></div><div class="line">I love python</div></pre></td></tr></table></figure>
<p>综上，推荐使用:string.format()</p>
<h2 id="Python列表list"><a href="#Python列表list" class="headerlink" title="Python列表list"></a>Python列表list</h2><p>此前已经知道了Python的三种对象类型：int、float和str。下面开始学习一种新的Python对象类型：list。list在Python中具有非常强大的功能。</p>
<h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>在Python中，用方括号表示一个list：[]，方括号里面的元素类型，可以是int型数据，也可以是str类型的数据，甚至也可以是bool类型数据。而像Java语言，数组里面只能存在一种类型的数据。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a=[]  <span class="comment">#定义了一个空的列表，变量a相当于一个贴在其上的标签</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(a)  <span class="comment">#用内置函数type()查看变量a引用对象的类型，为list</span></div><div class="line">&lt;type <span class="string">'list'</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>bool(a) <span class="comment">#用内置函数bool()查看a的布尔值，因为是空，所以为False</span></div><div class="line"><span class="keyword">False</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> a</div><div class="line">[]</div></pre></td></tr></table></figure>
<p>下面看看list具体的使用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a=[<span class="string">'a'</span>,<span class="number">3</span>,<span class="string">'hello'</span>,<span class="keyword">True</span>]  <span class="comment">#list中可以有多中数据类型</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="string">'a'</span>, <span class="number">3</span>, <span class="string">'hello'</span>, <span class="keyword">True</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(a)</div><div class="line">&lt;type <span class="string">'list'</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>bool(a)</div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> a</div><div class="line">[<span class="string">'a'</span>, <span class="number">3</span>, <span class="string">'hello'</span>, <span class="keyword">True</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">3</span>]</div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(a[<span class="number">3</span>])</div><div class="line">&lt;type <span class="string">'bool'</span>&gt;</div></pre></td></tr></table></figure>
<h3 id="索引和切片-1"><a href="#索引和切片-1" class="headerlink" title="索引和切片"></a>索引和切片</h3><h4 id="索引-1"><a href="#索引-1" class="headerlink" title="索引"></a>索引</h4><p>和字符串中的索引类似，只不过list是以元素为单位，而不是以字符为单位进行索引。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a=[<span class="number">2</span>,<span class="number">3</span>,<span class="keyword">True</span>,<span class="string">"Hello,world"</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="number">2</span>, <span class="number">3</span>, <span class="keyword">True</span>, <span class="string">'Hello,world'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">0</span>]</div><div class="line"><span class="number">2</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">1</span>]</div><div class="line"><span class="number">3</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">2</span>]</div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">3</span>]</div><div class="line"><span class="string">'Hello,world'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(a[<span class="number">0</span>])</div><div class="line">&lt;type <span class="string">'int'</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(a[<span class="number">2</span>])</div><div class="line">&lt;type <span class="string">'bool'</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(a[<span class="number">3</span>])</div><div class="line">&lt;type <span class="string">'str'</span>&gt;</div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.index(<span class="number">2</span>)</div><div class="line"><span class="number">0</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.index(<span class="number">3</span>)</div><div class="line"><span class="number">1</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.index(<span class="keyword">True</span>)</div><div class="line"><span class="number">2</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.index(<span class="string">"Hello,world"</span>)</div><div class="line"><span class="number">3</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h4 id="切片-1"><a href="#切片-1" class="headerlink" title="切片"></a>切片</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst = [<span class="string">'python'</span>,<span class="string">'java'</span>,<span class="string">'c++'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst[<span class="number">-1</span>]</div><div class="line"><span class="string">'c++'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst[<span class="number">-3</span>:<span class="number">-1</span>]</div><div class="line">[<span class="string">'python'</span>, <span class="string">'java'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst[<span class="number">-1</span>:<span class="number">-3</span>]</div><div class="line">[]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst[<span class="number">0</span>:<span class="number">3</span>]</div><div class="line">[<span class="string">'python'</span>, <span class="string">'java'</span>, <span class="string">'c++'</span>]</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>序列的切片，一定要左边的数字小于右边的数字，lst[-1:-3]就没有遵守这个规则，返回的是一个空。</p>
<h3 id="反转"><a href="#反转" class="headerlink" title="反转"></a>反转</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>mList = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>mList[::<span class="number">-1</span>]</div><div class="line">[<span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>m</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>mList</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>当然，也可以对字符串进行反转:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>lang=<span class="string">"python"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lang[::<span class="number">-1</span>]</div><div class="line"><span class="string">'nohtyp'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lang</div><div class="line"><span class="string">'python'</span></div></pre></td></tr></table></figure>
<p>可以看出，不管是str还是list，反转之后原来的值没有改变。这说明，这里的反转不是把原来的值倒过来，而是新生成了一个值，生成的值跟原来的值相比是倒过来的。</p>
<p>Python还有一种方法使list反转，且比较容易阅读和理解，特别推荐：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">mList = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">7</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list(reversed(mList))</div><div class="line">[<span class="number">7</span>, <span class="number">8</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]</div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s=<span class="string">'abcd'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list(reversed(s))</div><div class="line">[<span class="string">'d'</span>, <span class="string">'c'</span>, <span class="string">'b'</span>, <span class="string">'a'</span>]</div><div class="line"><span class="string">'abcd'</span></div></pre></td></tr></table></figure>
<h3 id="对list的操作"><a href="#对list的操作" class="headerlink" title="对list的操作"></a>对list的操作</h3><h4 id="len-1"><a href="#len-1" class="headerlink" title="len()"></a>len()</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst=[<span class="string">'python'</span>,<span class="string">'java'</span>,<span class="string">'c++'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>len(lst)</div><div class="line"><span class="number">3</span></div></pre></td></tr></table></figure>
<h4 id="连接连个序列"><a href="#连接连个序列" class="headerlink" title="+,连接连个序列"></a>+,连接连个序列</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst=[<span class="string">'python'</span>,<span class="string">'java'</span>,<span class="string">'c++'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst</div><div class="line">[<span class="string">'python'</span>, <span class="string">'java'</span>, <span class="string">'c++'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>alst =[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst + alst</div><div class="line">[<span class="string">'python'</span>, <span class="string">'java'</span>, <span class="string">'c++'</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</div></pre></td></tr></table></figure>
<h4 id="重复元素"><a href="#重复元素" class="headerlink" title="*,重复元素"></a>*,重复元素</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst * <span class="number">3</span></div><div class="line">[<span class="string">'python'</span>, <span class="string">'java'</span>, <span class="string">'c++'</span>, <span class="string">'python'</span>, <span class="string">'java'</span>, <span class="string">'c++'</span>, <span class="string">'python'</span>, <span class="string">'java'</span>, <span class="string">'c++'</span>]</div></pre></td></tr></table></figure>
<h4 id="in-1"><a href="#in-1" class="headerlink" title="in"></a>in</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'python'</span> <span class="keyword">in</span> lst</div><div class="line"><span class="keyword">True</span></div></pre></td></tr></table></figure>
<h4 id="max-和min"><a href="#max-和min" class="headerlink" title="max()和min()"></a>max()和min()</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>max(alst)</div><div class="line"><span class="number">5</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>min(alst)</div><div class="line"><span class="number">1</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>max(lst)</div><div class="line"><span class="string">'python'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>min(lst)</div><div class="line"><span class="string">'c++'</span></div></pre></td></tr></table></figure>
<h4 id="cmp-1"><a href="#cmp-1" class="headerlink" title="cmp()"></a>cmp()</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="number">2</span>,<span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b = [<span class="number">2</span>,<span class="number">4</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>cmp(a,b)</div><div class="line"><span class="number">-1</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>cmp(b,a)</div><div class="line"><span class="number">1</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c=[<span class="number">2</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>cmp(a,c)</div><div class="line"><span class="number">1</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>d=[<span class="string">'2'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>cmp(a,d)</div><div class="line"><span class="number">-1</span></div></pre></td></tr></table></figure>
<h4 id="追加元素"><a href="#追加元素" class="headerlink" title="追加元素"></a>追加元素</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst</div><div class="line">[<span class="string">'python'</span>, <span class="string">'java'</span>, <span class="string">'c++'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst.append(<span class="string">"html5"</span>) <span class="comment">#将元素追加到list的尾部</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst</div><div class="line">[<span class="string">'python'</span>, <span class="string">'java'</span>, <span class="string">'c++'</span>, <span class="string">'html5'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst.append(<span class="number">100</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst</div><div class="line">[<span class="string">'python'</span>, <span class="string">'java'</span>, <span class="string">'c++'</span>, <span class="string">'html5'</span>, <span class="number">100</span>]</div></pre></td></tr></table></figure>
<p>等价于：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst</div><div class="line">[<span class="string">'python'</span>, <span class="string">'java'</span>, <span class="string">'c++'</span>, <span class="string">'html5'</span>, <span class="number">100</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst[len(lst):] = [<span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst</div><div class="line">[<span class="string">'python'</span>, <span class="string">'java'</span>, <span class="string">'c++'</span>, <span class="string">'html5'</span>, <span class="number">100</span>, <span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>len(lst)</div><div class="line"><span class="number">6</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst[<span class="number">6</span>:]=[<span class="string">'javascript'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst</div><div class="line">[<span class="string">'python'</span>, <span class="string">'java'</span>, <span class="string">'c++'</span>, <span class="string">'html5'</span>, <span class="number">100</span>, <span class="number">3</span>, <span class="string">'javascript'</span>]</div></pre></td></tr></table></figure></p>
<h3 id="列表的函数"><a href="#列表的函数" class="headerlink" title="列表的函数"></a>列表的函数</h3><p>list是Python中的苦力，那么它都有哪些函数呢？</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>dir(list)</div><div class="line">[<span class="string">'__add__'</span>, <span class="string">'__class__'</span>, <span class="string">'__contains__'</span>, <span class="string">'__delattr__'</span>, <span class="string">'__delitem__'</span>, <span class="string">'__delslice__'</span>, <span class="string">'__doc__'</span>, <span class="string">'__eq__'</span>, <span class="string">'__format__'</span>, <span class="string">'__ge__'</span>, <span class="string">'__getattribute__'</span>, <span class="string">'__getitem__'</span>, <span class="string">'__getslice__'</span>, <span class="string">'__gt__'</span>, <span class="string">'__hash__'</span>, <span class="string">'__iadd__'</span>, <span class="string">'__imul__'</span>, <span class="string">'__init__'</span>, <span class="string">'__iter__'</span>, <span class="string">'__le__'</span>, <span class="string">'__len__'</span>, <span class="string">'__lt__'</span>, <span class="string">'__mul__'</span>, <span class="string">'__ne__'</span>, <span class="string">'__new__'</span>, <span class="string">'__reduce__'</span>, <span class="string">'__reduce_ex__'</span>, <span class="string">'__repr__'</span>, <span class="string">'__reversed__'</span>, <span class="string">'__rmul__'</span>, <span class="string">'__setattr__'</span>, <span class="string">'__setitem__'</span>, <span class="string">'__setslice__'</span>, <span class="string">'__sizeof__'</span>, <span class="string">'__str__'</span>, <span class="string">'__subclasshook__'</span>, <span class="string">'append'</span>, <span class="string">'count'</span>, <span class="string">'extend'</span>, <span class="string">'index'</span>, <span class="string">'insert'</span>, <span class="string">'pop'</span>, <span class="string">'remove'</span>, <span class="string">'reverse'</span>, <span class="string">'sort'</span>]</div></pre></td></tr></table></figure>
<p>先不管以双下划线开始和结尾的函数，就剩下以下几个</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="string">'append'</span>, <span class="string">'count'</span>, <span class="string">'extend'</span>, <span class="string">'index'</span>, <span class="string">'insert'</span>, <span class="string">'pop'</span>, <span class="string">'remove'</span>, <span class="string">'reverse'</span>, <span class="string">'sort'</span></div></pre></td></tr></table></figure>
<h4 id="append和extend"><a href="#append和extend" class="headerlink" title="append和extend"></a>append和extend</h4><p>list.append(x),是将某个元素x添加到已知的一个列表的尾部。</p>
<p>list.extend(L),则是将两个列表合并，或者说将列表L追加到列表list中。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b=[<span class="string">"lau"</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.extend(b)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="string">'lau'</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b</div><div class="line">[<span class="string">'lau'</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b=<span class="string">"abc"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.extend(b)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c = <span class="number">5</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.extend(c) </div><div class="line"></div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;pyshell#20&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    a.extend(c)</div><div class="line">TypeError: <span class="string">'int'</span> object <span class="keyword">is</span> <span class="keyword">not</span> iterable</div></pre></td></tr></table></figure>
<p>如果extend的参数对象是数值型则报错。<br>所以，extend的参数对象是一个list，如果是str，则Python会先把它按照字符为单位转化为list再添加到目标list中。官方文档指出extend的元素对象必须是iterable（可迭代的）。</p>
<p><strong>判断一个对象是不是可迭代的？</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s=<span class="string">"python"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>hasattr(s,<span class="string">'__iter__'</span>)</div><div class="line"><span class="keyword">False</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>hasattr(a,<span class="string">'__iter__'</span>)</div><div class="line"><span class="keyword">True</span></div></pre></td></tr></table></figure>
<p>通过内建函数hasattr()判断一个对象是不是可迭代的，它的判断本质就是看那个类型中是否有<code>__iter__</code>函数。</p>
<p><strong>append和extend函数的相同点</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b=[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>id(a)</div><div class="line"><span class="number">49822856</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>id(b)</div><div class="line"><span class="number">50066536</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.extend(b)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>id(a)</div><div class="line"><span class="number">49822856</span></div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>id(a)</div><div class="line"><span class="number">50068376</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.append(<span class="number">12</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">12</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>id(a)</div><div class="line"><span class="number">50068376</span></div></pre></td></tr></table></figure>
<p>由上面两段代码可知，append和extend函数的共同点：</p>
<ul>
<li>都是原地址修改列表，不会创建一个新的列表</li>
<li>没有返回值</li>
</ul>
<p><strong>append和extend函数的不同点</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst.append([<span class="string">"python"</span>,<span class="string">"java"</span>])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, [<span class="string">'python'</span>, <span class="string">'java'</span>]]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>len(lst)</div><div class="line"><span class="number">4</span></div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst2=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst2.extend([<span class="string">"python"</span>,<span class="string">"java"</span>])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst2</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="string">'python'</span>, <span class="string">'java'</span>]</div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>len(lst2)</div><div class="line"><span class="number">5</span></div></pre></td></tr></table></figure>
<p>可知，append是整体的追加，extend是单个的追加</p>
<h4 id="count"><a href="#count" class="headerlink" title="count"></a>count</h4><p>count的作用是计算某个元素在该list中出现的次数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.count(<span class="number">1</span>)</div><div class="line"><span class="number">4</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.append(<span class="string">'a'</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.append(<span class="string">'a'</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="string">'a'</span>, <span class="string">'a'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.count(<span class="string">'a'</span>)</div><div class="line"><span class="number">2</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.count(<span class="number">4</span>) <span class="comment">#不存在，则返回为0</span></div><div class="line"><span class="number">0</span></div></pre></td></tr></table></figure>
<h4 id="index"><a href="#index" class="headerlink" title="index"></a>index</h4><p>index计算元素在该列表首次出现的位置</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">5</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.index(<span class="number">4</span>)</div><div class="line"><span class="number">3</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.index(<span class="number">6</span>) <span class="comment">#如果不存，就报错</span></div><div class="line"></div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;pyshell#85&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    a.index(<span class="number">6</span>)</div><div class="line">ValueError: <span class="number">6</span> <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">in</span> list</div></pre></td></tr></table></figure>
<h4 id="insert"><a href="#insert" class="headerlink" title="insert"></a>insert</h4><p>list.insert(i,x),想列表中指定的位置插入元素x。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.insert(<span class="number">0</span>,<span class="number">0</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.insert(<span class="number">3</span>,<span class="number">7</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.insert(<span class="number">8</span>,<span class="number">4</span>)  <span class="comment">#若超出列表长度，则将元素插入到列表末尾</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">4</span>]</div></pre></td></tr></table></figure>
<h4 id="pop和remove"><a href="#pop和remove" class="headerlink" title="pop和remove"></a>pop和remove</h4><p>删除列表中元素的方法有两个，分别是：</p>
<ul>
<li>list.remove(x)</li>
</ul>
<p>删除列表中首次出现的元素x，如果不存在元素x，则报错</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">4</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.remove(<span class="number">4</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">4</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.remove(<span class="number">6</span>)</div><div class="line"></div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;pyshell#103&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    a.remove(<span class="number">6</span>)</div><div class="line">ValueError: list.remove(x): x <span class="keyword">not</span> <span class="keyword">in</span> list</div></pre></td></tr></table></figure>
<ul>
<li>list.pop([i])</li>
</ul>
<p>删除列表中位置i的元素并且返回该元素。如果没有指定位置i，则默认删除并返回列表的最后一个元素。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.pop(<span class="number">0</span>) <span class="comment">#删除指定位置0</span></div><div class="line"><span class="number">0</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">4</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.pop() <span class="comment">#删除默认位置</span></div><div class="line"><span class="number">4</span>  </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">5</span>]</div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.pop(<span class="number">5</span>) <span class="comment">#超过列表长度则会报错</span></div><div class="line"></div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;pyshell#116&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    a.pop(<span class="number">5</span>)</div><div class="line">IndexError: pop index out of range</div></pre></td></tr></table></figure>
<h4 id="reverse"><a href="#reverse" class="headerlink" title="reverse"></a>reverse</h4><p>将列表的元素顺序反过来,不会创建新的列表，因此没有返回值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.reverse()</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="number">7</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a=[<span class="string">'ss'</span>,<span class="string">'aaa'</span>,<span class="string">'dd'</span>]</div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.reverse()</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="string">'dd'</span>, <span class="string">'aaa'</span>, <span class="string">'ss'</span>]</div></pre></td></tr></table></figure>
<h4 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h4><p>sort是对列表进行排序，不会创建新的列表，因此没有返回值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a=[<span class="number">1</span>,<span class="number">3</span>,<span class="number">9</span>,<span class="number">7</span>,<span class="number">5</span>] </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.sort() <span class="comment">#默认从小到大的排序</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.sort(reverse = <span class="keyword">True</span>) <span class="comment">#从大到小的排序</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="number">9</span>, <span class="number">7</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">1</span>]</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst=[<span class="string">"python"</span>,<span class="string">"java"</span>,<span class="string">"c"</span>,<span class="string">"basic"</span>,<span class="string">"ruby"</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst.sort(key=len) <span class="comment">#以字符串长度为关键词进行排序</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst</div><div class="line">[<span class="string">'c'</span>, <span class="string">'java'</span>, <span class="string">'ruby'</span>, <span class="string">'basic'</span>, <span class="string">'python'</span>]</div></pre></td></tr></table></figure>
<h2 id="比较列表和字符串"><a href="#比较列表和字符串" class="headerlink" title="比较列表和字符串"></a>比较列表和字符串</h2><h3 id="相同点"><a href="#相同点" class="headerlink" title="相同点"></a>相同点</h3><ul>
<li>都属于序列，因此那些属于序列的操作对两者都适用</li>
</ul>
<h3 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h3><ul>
<li>最大区别是，列表自身可以改变，字符串自身不可以改变</li>
<li>字符串只能通过创建一个新的str来改变，新的str不是原来的字符串对象</li>
</ul>
<h3 id="多维列表"><a href="#多维列表" class="headerlink" title="多维列表"></a>多维列表</h3><ul>
<li>在字符串中，每个元素只能是字符</li>
<li>在列表中，每个元素可以是任何类型</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>matrix=[[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>],[<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>]]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(matrix)</div><div class="line">&lt;type <span class="string">'list'</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>matrix[<span class="number">0</span>][<span class="number">1</span>]</div><div class="line"><span class="number">2</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>matrix[<span class="number">0</span>]</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div></pre></td></tr></table></figure>
<h3 id="列表和字符串的相互转化"><a href="#列表和字符串的相互转化" class="headerlink" title="列表和字符串的相互转化"></a>列表和字符串的相互转化</h3><h4 id="str-split"><a href="#str-split" class="headerlink" title="str.split()"></a>str.split()</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>line=<span class="string">"hello I am good"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>line.split(<span class="string">" "</span>)</div><div class="line">[<span class="string">'hello'</span>, <span class="string">'I'</span>, <span class="string">'am'</span>, <span class="string">'good'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = line.split(<span class="string">" "</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="string">'hello'</span>, <span class="string">'I'</span>, <span class="string">'am'</span>, <span class="string">'good'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(a)</div><div class="line">&lt;type <span class="string">'list'</span>&gt;</div></pre></td></tr></table></figure>
<h4 id="“split”-join-list"><a href="#“split”-join-list" class="headerlink" title="“split”.join(list)"></a>“split”.join(list)</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="string">'hello'</span>, <span class="string">'I'</span>, <span class="string">'am'</span>, <span class="string">'good'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(a)</div><div class="line">&lt;type <span class="string">'list'</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">" "</span>.join(a)</div><div class="line"><span class="string">'hello I am good'</span></div></pre></td></tr></table></figure>
<h2 id="Python元组"><a href="#Python元组" class="headerlink" title="Python元组"></a>Python元组</h2><h3 id="定义-1"><a href="#定义-1" class="headerlink" title="定义"></a>定义</h3><p>元组（tuple）是用圆括号括起来的，元素之间用逗号隔开。</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;</span>&gt; t = <span class="number">123</span>,<span class="string">'abc'</span>,[<span class="string">"come"</span>,<span class="string">"here"</span>]</div><div class="line"><span class="meta">&gt;&gt;</span>&gt; t</div><div class="line">(<span class="number">123</span>, <span class="string">'abc'</span>, [<span class="string">'come'</span>, <span class="string">'here'</span>])</div><div class="line"><span class="meta">&gt;&gt;</span>&gt; type(t)</div><div class="line">&lt;type <span class="string">'tuple'</span>&gt;</div></pre></td></tr></table></figure>
<p>元组也是一种序列，这一点与列表、字符串类似。有以下特点：</p>
<ul>
<li>元组其中的元素不能更改，和字符串类似</li>
<li>元组中的元素可以是任何类型的数据，和列表类似</li>
</ul>
<h3 id="索引和切片-2"><a href="#索引和切片-2" class="headerlink" title="索引和切片"></a>索引和切片</h3><p>元组的索引和切片的基本操作和字符串、列表是一样的。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>t</div><div class="line">(<span class="number">123</span>, <span class="string">'abc'</span>, [<span class="string">'come'</span>, <span class="string">'here'</span>])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>t[<span class="number">2</span>]</div><div class="line">[<span class="string">'come'</span>, <span class="string">'here'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>t[<span class="number">1</span>:]</div><div class="line">(<span class="string">'abc'</span>, [<span class="string">'come'</span>, <span class="string">'here'</span>])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>t[<span class="number">2</span>][<span class="number">0</span>]</div><div class="line"><span class="string">'come'</span></div></pre></td></tr></table></figure>
<p>特别注意：如果一个元组中只有一个元素，应该在该元素后面加上一个半角的英文逗号：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a=(<span class="number">3</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(a)</div><div class="line">&lt;type <span class="string">'int'</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a=(<span class="number">3</span>,) <span class="comment">#加了逗号就是元组</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(a)</div><div class="line">&lt;type <span class="string">'tuple'</span>&gt;</div></pre></td></tr></table></figure>
<p>列表和元组之间可以实现转换，分别使用list()和tuple()</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>t</div><div class="line">(<span class="number">123</span>, <span class="string">'abc'</span>, [<span class="string">'come'</span>, <span class="string">'here'</span>])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>tlst = list(t)   <span class="comment"># tuple---&gt;list</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>tlst</div><div class="line">[<span class="number">123</span>, <span class="string">'abc'</span>, [<span class="string">'come'</span>, <span class="string">'here'</span>]]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(tlst)</div><div class="line">&lt;type <span class="string">'list'</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>t_tuple = tuple(tlst)  <span class="comment">#list---&gt;tuple</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>t_tuple</div><div class="line">(<span class="number">123</span>, <span class="string">'abc'</span>, [<span class="string">'come'</span>, <span class="string">'here'</span>])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(t_tuple)</div><div class="line">&lt;type <span class="string">'tuple'</span>&gt;</div></pre></td></tr></table></figure>
<h3 id="用途"><a href="#用途" class="headerlink" title="用途"></a>用途</h3><ul>
<li>元组比列表操作速度快。如果定义了一个值的常量集，并且唯一要用它做的是不断地遍历它，请使用元组代替列表</li>
<li>如果对不需要修改的数据进行“写保护”，可以使代码更安全，这时使用元组而不是列表。如果必须要改变这些值，则需要执行元组到列表的转换。</li>
<li>元组可以在字典中被用作key，但是列表不行。因为字典的key必须是不可变的，元组本身是不可变的。</li>
<li>元组可以用在字符串格式化中。</li>
</ul>

    

        <a href="/2016/04/12/Python基础之(二)字符串列表和元组/" class="post-more waves-effect waves-button">
            阅读全文...
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python基础/">python基础</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-Python基础之(一)基本数据类型"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time datetime="2016-04-12T15:02:50.000Z" itemprop="datePublished" class="post-time">
  2016-04-12 23:02:50
</time>

        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/python/">python</a></li></ul>



    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/2016/04/12/Python基础之(一)基本数据类型/">Python基础之(一)基本数据类型</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent" >

    
        <h2 id="数字"><a href="#数字" class="headerlink" title="数字"></a>数字</h2><ul>
<li><strong>基本类型</strong></li>
</ul>
<p>首先，进入Python交互模式中：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">//整数</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">3</span></div><div class="line"><span class="number">3</span></div><div class="line"></div><div class="line">//长整数</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">33333333333333333333333333</span></div><div class="line"><span class="number">33333333333333333333333333L</span></div><div class="line"></div><div class="line">//浮点数</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">3.22222222222</span></div><div class="line"><span class="number">3.22222222222</span></div><div class="line"></div><div class="line">//负数</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">-234</span></div><div class="line"><span class="number">-234</span></div><div class="line"></div><div class="line">//十六进制数</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">0xff</span></div><div class="line"><span class="number">255</span></div><div class="line"></div><div class="line">//八进制</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">010</span></div><div class="line"><span class="number">8</span></div></pre></td></tr></table></figure>
<p>在交互模式下：</p>
<p>如果输入3，就显示3，称为整数</p>
<p>当输入一个比较大的整数时，Python会自动会将这个大整数进行转换，转换的结果是一个“长整数”类型，为了表示它，会在其末尾显示一个L。由于这个操作是Python自动完成的，所有在Python中没有单独将“长整数”作为一个类型。</p>
<p>如果输入一个负数，直接在数字前面加上符号即可</p>
<p>Python也支持二进制、八进制、十六进制数。</p>
<ul>
<li><strong>对象身份</strong></li>
</ul>
<p>每个数字在Python都是一个对象，每个对象，在内存中都有自己的一个地址，这就是它的身份，用内建函数id()可以查看每个对象的内存地址即身份。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>id(<span class="number">3</span>)</div><div class="line"><span class="number">39679608</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>id(<span class="number">-3</span>)</div><div class="line"><span class="number">39679680</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>id(<span class="number">2.33</span>)</div><div class="line"><span class="number">39712264</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>id(<span class="number">3.0</span>)</div><div class="line"><span class="number">48962672</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>以上四个不同的数字是四个不同的对象，具有四个不同的内存地址。特别要注意，在数学上，3和3.0是相等的，但在这里，它们是不同的对象。</p>
<ul>
<li><strong>对象类型</strong></li>
</ul>
<p>如果要查找一个对象的类型，则使用type()这个内建函数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(<span class="number">3</span>)</div><div class="line">&lt;type <span class="string">'int'</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(<span class="number">-3</span>)</div><div class="line">&lt;type <span class="string">'int'</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(<span class="number">0.3</span>)</div><div class="line">&lt;type <span class="string">'float'</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(<span class="number">222222222222222222222222222</span>)</div><div class="line">&lt;type <span class="string">'long'</span>&gt;</div></pre></td></tr></table></figure>
<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = <span class="number">5</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x</div><div class="line"><span class="number">5</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = <span class="number">6</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x</div><div class="line"><span class="number">6</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<ul>
<li>在Python中，对象有类型，变量无类型</li>
<li>当Python中写入5、6时，计算机就自动在其内存中某个地方建立了这两个对象，这两个对象的类型就是Int</li>
<li>上述代码中的x就好比是个标签，当x=5时，就是将x这个标签拴在了5上，通过这个x，就找到了5，于是“&gt;&gt;&gt;x”输出的结果就是5。所以这个标签x没有类型之说，它不仅可以贴在整数类型的对象上，还可以贴在其他类型的对象上。</li>
</ul>
<h2 id="简单的四则运算"><a href="#简单的四则运算" class="headerlink" title="简单的四则运算"></a>简单的四则运算</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">//加</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">3</span> + <span class="number">5</span></div><div class="line"><span class="number">8</span></div><div class="line"></div><div class="line">//减</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">5</span> - <span class="number">3</span></div><div class="line"><span class="number">2</span></div><div class="line"></div><div class="line">//乘</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">5</span> * <span class="number">3</span></div><div class="line"><span class="number">15</span></div><div class="line"></div><div class="line">//整除</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">8</span> / <span class="number">4</span></div><div class="line"><span class="number">2</span></div><div class="line"></div><div class="line">//模除</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">8</span> % <span class="number">3</span></div><div class="line"><span class="number">2</span></div><div class="line"></div><div class="line">//混合运算</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">2</span> * <span class="number">3</span> <span class="number">-4</span></div><div class="line"><span class="number">2</span></div></pre></td></tr></table></figure>
<h2 id="整数溢出问题"><a href="#整数溢出问题" class="headerlink" title="整数溢出问题"></a>整数溢出问题</h2><p>在一些高级编程语言中，整数溢出是必须正视的，但是，在Python里就无需担心了，原因就是Python为我们解决了这个问题，它支持“无限精度”的整数，所以，不用考虑整数溢出的问题，Int类型与任意精度的Long整数类型可以无缝转换，超过Int范围情况都将自动转换成Long类型。</p>
<p>如下计算：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">1234456678888914781548154815481</span> * <span class="number">618468146815418458154815481548</span></div><div class="line"><span class="number">763472134516343226654595368107241568115304361007546100244588L</span></div></pre></td></tr></table></figure>
<p>你还可以在交互模式下计算2的1000次幂，计算方法是：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">2</span> ** <span class="number">1000</span></div><div class="line"><span class="number">10715086071862673209484250490600018105614048117055336074437503883703510511249361224931983788156958581275946729175531468251871452856923140435984577574698574803934567774824230985421074605062371141877954182153046474983581941267398767559165543946077062914571196477686542167660429831652624386837205668069376L</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h2 id="除法"><a href="#除法" class="headerlink" title="除法"></a>除法</h2><h3 id="整数与整数相除"><a href="#整数与整数相除" class="headerlink" title="整数与整数相除"></a>整数与整数相除</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">2</span> / <span class="number">5</span></div><div class="line"><span class="number">0</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">2.0</span> / <span class="number">5</span></div><div class="line"><span class="number">0.4</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">2</span> / <span class="number">5.0</span></div><div class="line"><span class="number">0.4</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">2.0</span> / <span class="number">5.0</span></div><div class="line"><span class="number">0.4</span></div></pre></td></tr></table></figure>
<p>Python2.x中</p>
<ul>
<li>整数除整数，商是整数</li>
<li>整数除浮点数或浮点数除整数，商是浮点数</li>
</ul>
<h3 id="整数与浮点数相除"><a href="#整数与浮点数相除" class="headerlink" title="整数与浮点数相除"></a>整数与浮点数相除</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">9.0</span> / <span class="number">2</span></div><div class="line"><span class="number">4.5</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">9</span> / <span class="number">2.0</span></div><div class="line"><span class="number">4.5</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">9.0</span> / <span class="number">2.0</span></div><div class="line"><span class="number">4.5</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<ul>
<li>不管是除数或者被除数，只要有一个数是浮点数，结果就是浮点数。</li>
</ul>
<p>然而，下面的计算可能会有点不好理解：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">10.0</span> / <span class="number">3</span></div><div class="line"><span class="number">3.3333333333333335</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">0.1</span> + <span class="number">0.2</span></div><div class="line"><span class="number">0.30000000000000004</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">0.1</span> + <span class="number">0.1</span> - <span class="number">0.2</span></div><div class="line"><span class="number">0.0</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">0.1</span> + <span class="number">0.1</span> + <span class="number">0.1</span> - <span class="number">0.3</span></div><div class="line"><span class="number">5.551115123125783e-17</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">0.1</span> + <span class="number">0.1</span> + <span class="number">0.1</span> - <span class="number">0.2</span></div><div class="line"><span class="number">0.10000000000000003</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>原因在于十进制和二进制的转换上，计算机使用的是二进制进行计算，在上面的例子中，我们输入的是十进制，就要把十进制转换成二进制，然后在计算。但是在转化中，浮点数转化为二进制后，不会精确等于十进制的0.1。因为计算机存储的位数是有限制的，所有就出现了上述现象。</p>
<p>一般情况下，只要简单地将最终显示的结果用“四舍五入”到所期望的十进制位数，就会得到期望的最终结果。</p>
<p>对于需要非常精确的情况，可以使用decimal模块，它实现的十进制运算适合高精度要求的应用。另外fractions模块支持另外一种形式的运算，它实现的运算基于有理数。最高要求则是使用有SciPy提供的Numerical Python包和其他用于数学和统计学的包。</p>
<h3 id="引用模块解决除法问题"><a href="#引用模块解决除法问题" class="headerlink" title="引用模块解决除法问题"></a>引用模块解决除法问题</h3><p>我们可以通过以下两种形式引入模块：</p>
<ul>
<li>形式1：import module-name。import后面跟空格，然后是模块名称，例如 import os</li>
<li>形式2：from module1 import module11。module1是一个大模块，里面还有子模块module11，只想用module11，就这么写。</li>
</ul>
<p>如下是解决除法问题的模块：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> __future__ <span class="keyword">import</span> division</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">5</span> /<span class="number">2</span></div><div class="line"><span class="number">2.5</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">9</span> / <span class="number">2</span></div><div class="line"><span class="number">4.5</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">9.0</span> / <span class="number">2</span></div><div class="line"><span class="number">4.5</span></div></pre></td></tr></table></figure>
<p>引用了此模块后，不管什么情况，都能够得到浮点数的结果了。</p>
<h3 id="余数"><a href="#余数" class="headerlink" title="余数"></a>余数</h3><ul>
<li>模除，用%符号来取得两个数相除的余数</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">5</span> % <span class="number">2</span></div><div class="line"><span class="number">1</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">9</span> % <span class="number">4</span></div><div class="line"><span class="number">1</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<ul>
<li>内建函数divmod()</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>divmod(<span class="number">5</span>,<span class="number">2</span>)</div><div class="line">(<span class="number">2</span>, <span class="number">1</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>divmod(<span class="number">9</span>,<span class="number">4</span>)</div><div class="line">(<span class="number">2</span>, <span class="number">1</span>)</div></pre></td></tr></table></figure>
<p>内建函数divmod()返回的是两个值，这两个值在一个圆括号内，圆括号内的数字第一个表示商，第二个表示余数。</p>
<h3 id="四舍五入"><a href="#四舍五入" class="headerlink" title="四舍五入"></a>四舍五入</h3><p>内建函数round（）。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>round(<span class="number">1.234567</span>,<span class="number">2</span>)</div><div class="line"><span class="number">1.23</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>round(<span class="number">1.234567</span>,<span class="number">3</span>)</div><div class="line"><span class="number">1.235</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>round(<span class="number">10.0</span> /<span class="number">3</span> ,<span class="number">4</span>)</div><div class="line"><span class="number">3.3333</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>在round()中的第二个数，表示要保留的小数位数，返回值是一个四舍五入之后的数值。</p>
<p>接下里看下面的特殊情况：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>round(<span class="number">0.12345</span>,<span class="number">3</span>)</div><div class="line"><span class="number">0.123</span>  <span class="comment">#应该是1.235</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>round(<span class="number">2.235</span>,<span class="number">2</span>)</div><div class="line"><span class="number">2.23</span>   <span class="comment">#应该是2.24</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>这不是Python地Bug，归根到底是浮点数中的十进制转化为二进制引起的问题</p>
<h2 id="常用数学函数和运算优先级"><a href="#常用数学函数和运算优先级" class="headerlink" title="常用数学函数和运算优先级"></a>常用数学函数和运算优先级</h2><h3 id="math模块"><a href="#math模块" class="headerlink" title="math模块"></a>math模块</h3><p>math模块是Python标准库中的，所以不用安装就可以直接安装。使用方法是：</p>
<p><code>&gt;&gt;&gt; import math</code></p>
<p>这样就将math模块引用进来了，下面就可以使用这个模块提供的工具了，比如要得到圆周率：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> math</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>math.pi</div><div class="line"><span class="number">3.141592653589793</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>这个模块都能做些什么事情呢？可以用下面的方法看到：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>dir(math)</div><div class="line">[<span class="string">'__doc__'</span>, <span class="string">'__name__'</span>, <span class="string">'__package__'</span>, <span class="string">'acos'</span>, <span class="string">'acosh'</span>, <span class="string">'asin'</span>, <span class="string">'asinh'</span>, <span class="string">'atan'</span>, <span class="string">'atan2'</span>, <span class="string">'atanh'</span>, <span class="string">'ceil'</span>, <span class="string">'copysign'</span>, <span class="string">'cos'</span>, <span class="string">'cosh'</span>, <span class="string">'degrees'</span>, <span class="string">'e'</span>, <span class="string">'erf'</span>, <span class="string">'erfc'</span>, <span class="string">'exp'</span>, <span class="string">'expm1'</span>, <span class="string">'fabs'</span>, <span class="string">'factorial'</span>, <span class="string">'floor'</span>, <span class="string">'fmod'</span>, <span class="string">'frexp'</span>, <span class="string">'fsum'</span>, <span class="string">'gamma'</span>, <span class="string">'hypot'</span>, <span class="string">'isinf'</span>, <span class="string">'isnan'</span>, <span class="string">'ldexp'</span>, <span class="string">'lgamma'</span>, <span class="string">'log'</span>, <span class="string">'log10'</span>, <span class="string">'log1p'</span>, <span class="string">'modf'</span>, <span class="string">'pi'</span>, <span class="string">'pow'</span>, <span class="string">'radians'</span>, <span class="string">'sin'</span>, <span class="string">'sinh'</span>, <span class="string">'sqrt'</span>, <span class="string">'tan'</span>, <span class="string">'tanh'</span>, <span class="string">'trunc'</span>]</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>dir(module)可以查看任何模块所包含的工具。<br>help(function)可以用来查看每个函数的使用情况。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>help(math.pow)</div><div class="line">Help on built-<span class="keyword">in</span> function pow <span class="keyword">in</span> module math:</div><div class="line"></div><div class="line">pow(...)</div><div class="line">    pow(x, y)</div><div class="line">    </div><div class="line">    Return x**y (x to the power of y).</div><div class="line"></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>下面来看看一些基本函数的使用：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#开平方</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; math.sqrt(<span class="number">9</span>)</div><div class="line"><span class="number">3.0</span></div><div class="line"></div><div class="line"><span class="comment">#绝对值</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; math.fabs(-<span class="number">2</span>)</div><div class="line"><span class="number">2.0</span></div><div class="line"></div><div class="line"><span class="comment">#模除</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; math.fmod(<span class="number">5</span>,<span class="number">3</span>)</div><div class="line"><span class="number">2.0</span></div></pre></td></tr></table></figure>
<h3 id="两个函数"><a href="#两个函数" class="headerlink" title="两个函数"></a>两个函数</h3><ul>
<li>1.求绝对值</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>abs(<span class="number">10</span>)</div><div class="line"><span class="number">10</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>abs(<span class="number">-10</span>)</div><div class="line"><span class="number">10</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>abs(<span class="number">-1.2</span>)</div><div class="line"><span class="number">1.2</span></div></pre></td></tr></table></figure>
<ul>
<li>2.四舍五入</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>round(<span class="number">1.234</span>)</div><div class="line"><span class="number">1.0</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>round(<span class="number">1.234</span>,<span class="number">2</span>)</div><div class="line"><span class="number">1.23</span></div></pre></td></tr></table></figure>
<h3 id="运算优先级"><a href="#运算优先级" class="headerlink" title="运算优先级"></a>运算优先级</h3><p>运算规则表：</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>lamba</td>
<td>Lamba表达式</td>
</tr>
<tr>
<td>or</td>
<td>布尔或</td>
</tr>
<tr>
<td>and</td>
<td>布尔与</td>
</tr>
<tr>
<td>not x</td>
<td>布尔非</td>
</tr>
<tr>
<td>in,not in</td>
<td>成员测试</td>
</tr>
<tr>
<td>is,is not</td>
<td>同一性测试</td>
</tr>
<tr>
<td>&lt;,&lt;=,&gt;,&gt;=,!=,==</td>
<td>比较</td>
</tr>
<tr>
<td>竖线</td>
<td>按位或</td>
</tr>
<tr>
<td>^</td>
<td>按位异或</td>
</tr>
<tr>
<td>&amp;</td>
<td>按位与</td>
</tr>
<tr>
<td>&lt;&lt;,&gt;&gt;</td>
<td>移位</td>
</tr>
<tr>
<td>+,-</td>
<td>加减 法</td>
</tr>
<tr>
<td>*,/,%</td>
<td>乘除、取余</td>
</tr>
<tr>
<td>+x,-x</td>
<td>正负号</td>
</tr>
<tr>
<td>~x</td>
<td>按位翻转</td>
</tr>
<tr>
<td>**</td>
<td>指数</td>
</tr>
</tbody>
</table>

    

        <a href="/2016/04/12/Python基础之(一)基本数据类型/" class="post-more waves-effect waves-button">
            阅读全文...
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python基础/">python基础</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-Java中的构造函数调用顺序"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time datetime="2016-04-05T13:21:56.000Z" itemprop="datePublished" class="post-time">
  2016-04-05 21:21:56
</time>

        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Java/">Java</a></li></ul>



    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/2016/04/05/Java中的构造函数调用顺序/">Java中的构造函数调用顺序</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent" >

    
        <p>面试题中经常这样的题目，分析子类父类构造函数的调用顺序，下面开始分情况讨论父类子类构造函数的调用顺序：</p>
<p>先创建两个类A和B，其中B继承A</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">A</span><span class="params">()</span> </span>&#123;</div><div class="line">		System.out.println(<span class="string">"A的无参构造函数"</span>);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">A</span><span class="params">(String msg)</span> </span>&#123;</div><div class="line">		System.out.println(<span class="string">"A的有参构造函数: "</span> + msg);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</div><div class="line">		System.out.println(<span class="string">"A的print方法"</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span></span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">B</span><span class="params">()</span> </span>&#123;</div><div class="line">		System.out.println(<span class="string">"B的无参构造函数"</span>);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">B</span><span class="params">(String msg)</span></span>&#123;</div><div class="line">	<span class="comment">//	super(msg); //此句代码表示调用父类A的有参构造函数，不加此句代码则表示调用父类A的默认无参构造函数</span></div><div class="line">		System.out.println(<span class="string">"B的有参构造函数: "</span> + msg);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</div><div class="line">		System.out.println(<span class="string">"B的print方法"</span>);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span></span>&#123;</div><div class="line">		System.out.println(<span class="string">"A的add方法"</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>调用上述类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">	<span class="comment">// TODO Auto-generated method stub</span></div><div class="line">	B b = <span class="keyword">new</span> B();</div><div class="line">	B b1 = <span class="keyword">new</span> B(<span class="string">"hello"</span>);</div><div class="line">	b.print();</div><div class="line">	b.add();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>运行结果：</p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">A的无参构造函数</div><div class="line"><span class="keyword">B的无参构造函数</span></div><div class="line">A的无参构造函数: hello</div><div class="line"><span class="keyword">B的有参构造函数: </span>hello</div><div class="line"><span class="keyword">B的print方法</span></div><div class="line">A的<span class="keyword">add方法</span></div></pre></td></tr></table></figure>
<p>从运行结果可得出以下结论:</p>
<ul>
<li>实例化无参子类B时，先调用父类A的无参构造函数，再调用B的无参构造函数；</li>
<li>实例化有参子类B时，先调用父类A的默认无参构造函数，再调用B的有参构造函数；若要调用A的有参构造函数，则在类B的有参构造函数的第一行加上super(msg)这句代码。</li>
<li>子类B调用方法时有两种情况：一是如果子类B中的方法和父类A中的print方法一致时，则调用子类B中print的方法，但是可通过super.print()调用父类中的print方法;二是如果子类B中无add方法而父类A中有add方法时，则子类B的示例直接调用父类A中的add方法；</li>
<li>父类A不能调用子类B中的方法和变量</li>
</ul>

    

        <a href="/2016/04/05/Java中的构造函数调用顺序/" class="post-more waves-effect waves-button">
            阅读全文...
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/面试/">面试</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-Java中static关键字详解"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time datetime="2016-04-05T13:20:58.000Z" itemprop="datePublished" class="post-time">
  2016-04-05 21:20:58
</time>

        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Java/">Java</a></li></ul>



    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/2016/04/05/Java中static关键字详解/">Java中static关键字详解</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent" >

    
        <p>static是Java的一个关键字，我们在Java开发中经常使用static，static主要用于下面五种情况：</p>
<h2 id="静态变量"><a href="#静态变量" class="headerlink" title="静态变量"></a>静态变量</h2><p>我们可以将类级别的变量声明为static，静态变量是属于类的，而不是属于类创建的对象或实例的。因为静态变量被类的所有实例共用，所以是线程不安全的。通常静态变量还和关键字final一起用，作为所有对象共用的资源或常量。如果静态变量不是私有的，那么可以通过ClassName.variableName来访问它。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> count;</div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> String name;</div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String DB_NAME = <span class="string">"contacts"</span>;</div></pre></td></tr></table></figure>
<h2 id="静态方法"><a href="#静态方法" class="headerlink" title="静态方法"></a>静态方法</h2><p>静态方法也属于类，不属于实例。静态类只能访问类的静态变量或调用类的静态方法。通常静态方法作为工具方法，被其他类使用，而不需要创建类的实例。<br>静态方法如果没有使用静态变量，则是线程安全的。因为静态方法内部声明的变量，每个线程调用时都会重新创建一份，而不会共用同一个存储单元。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MathUtils</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> x + y;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="静态块"><a href="#静态块" class="headerlink" title="静态块"></a>静态块</h2><p>静态块是类加载器加载对象时要执行的一组语句，它用于初始化静态变量，通常用于类加载的时候创建静态资源。我们在静态块中不能访问非静态变量。我们可以在一个类中有多个静态块，尽管这么做没什么意义，静态块只会在类加载到内存中的时候执行一次。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FinalDemo</span> </span>&#123;</div><div class="line">	</div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> String str;</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * <span class="doctag">@param</span> args</div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="comment">// TODO Auto-generated method stub</span></div><div class="line">		<span class="keyword">new</span> FinalDemo();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> x + y;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="keyword">static</span> &#123;</div><div class="line">		System.out.println(<span class="string">"静态块3"</span>);</div><div class="line">		<span class="comment">//仅能访问静态变量和静态方法</span></div><div class="line">		str = <span class="string">"Just"</span>;</div><div class="line">		add(<span class="number">3</span>,<span class="number">4</span>);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="keyword">static</span> &#123;</div><div class="line">		System.out.println(<span class="string">"静态块1"</span>);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">FinalDemo</span><span class="params">()</span> </span>&#123;</div><div class="line">		System.out.println(<span class="string">"构造函数"</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>运行结果：<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">静态块<span class="number">3</span></div><div class="line">静态块<span class="number">1</span></div><div class="line">构造函数</div></pre></td></tr></table></figure></p>
<blockquote>
<p>由运行结果可知：</p>
<ul>
<li>静态块最先加载，其次是构造函数；</li>
<li>有多个静态块时，按静态块顺序加载；</li>
<li>静态块内部代码按顺序运行;</li>
</ul>
</blockquote>
<h2 id="静态类"><a href="#静态类" class="headerlink" title="静态类"></a>静态类</h2><p>一般我们对嵌套类使用static关键字，static不能用于最外层的类。静态的嵌套类和其他外层的类别无区别，嵌套只是方便打包。</p>
<p>下面我们来看一个使用static关键字的例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FinalDemo</span> </span>&#123;</div><div class="line">	</div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 静态变量</div><div class="line">	 */</div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> String str;</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * <span class="doctag">@param</span> args</div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="comment">// TODO Auto-generated method stub</span></div><div class="line">		System.out.println(<span class="string">"str: "</span> + str);</div><div class="line">		System.out.println(<span class="string">"add(3,4):"</span>+add(<span class="number">3</span>, <span class="number">4</span>));</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 静态方法</div><div class="line">	 * <span class="doctag">@param</span> x</div><div class="line">	 * <span class="doctag">@param</span> y</div><div class="line">	 * <span class="doctag">@return</span></div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> x + y;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 静态块</div><div class="line">	 */</div><div class="line">	<span class="keyword">static</span> &#123;</div><div class="line">		System.out.println(<span class="string">"静态块3"</span>);</div><div class="line">		<span class="comment">//仅能访问静态变量和静态方法</span></div><div class="line">		str = <span class="string">"Test"</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 静态类</div><div class="line">	 * TODO</div><div class="line">	 */</div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyStaticClass</span> </span>&#123;</div><div class="line">		</div><div class="line">		<span class="function"><span class="keyword">public</span> String <span class="title">getTag</span><span class="params">()</span> </span>&#123;</div><div class="line">			<span class="comment">//只能访问外部类的静态变量或方法</span></div><div class="line">			<span class="keyword">return</span> str;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>运行结果是：<br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">静态块<span class="number">3</span></div><div class="line">str: Test</div><div class="line"><span class="keyword">add</span><span class="bash">(3,4):7</span></div><div class="line">staticclass tag: Test</div></pre></td></tr></table></figure></p>
<h2 id="静态导包"><a href="#静态导包" class="headerlink" title="静态导包"></a>静态导包</h2><p>静态导包就是java包的静态导入，用import static静态导入包是JDK1.5引入的特性。<br>一般我们导入一个类都用import com.java…className；而静态导入是这样：<code>import static com.java..className.*</code>。这里多了static关键字，还有就是类名后面多了<code>.*</code>，意思是导入这个类里所有的静态方法。当然也可以只导入某个静态方法，只要把<code>.*</code>替换成静态方法名就行了。然后在这个类中，就可以直接调用方法名来调用静态方法，而不必用<code>ClassName.</code>方法名的方式来调用。</p>
<p>优点：<br>这种方法可以简化一些操作，例如打印System.out.println()，就可以将其导入一个静态方法，在使用时直接println()就可以了。下面通过代码来看看两种方式的导包:</p>
<p>普通导包:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NormalImport</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span> <span class="params">(String[] args)</span> </span>&#123;</div><div class="line"></div><div class="line">        System.out.println(Integer.MAX_VALUE);</div><div class="line">        System.out.println(Integer.toHexString(<span class="number">42</span>));</div><div class="line"></div><div class="line">    &#125;</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>静态导包:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StaticImport</span> </span>&#123;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span> <span class="params">(String[] args)</span> </span>&#123;</div><div class="line"></div><div class="line">        out.println(MAX_VALUE);</div><div class="line">        out.println(toHexString(<span class="number">43</span>));</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>两个类的运行结果都是一样的。</p>
<p>静态导包的几条原则：</p>
<ul>
<li>必须是import static而不是static import</li>
<li>提防含糊不清的static成员。例如，如果对Integer类和Long类执行了静态导入，引用MAX_VALUE时将导致一个编译器错误，因为Integer和Long都有一个MAX_VALUE常量，并且Java不会知道你在引用哪个MAX_VALUE。</li>
</ul>

    

        <a href="/2016/04/05/Java中static关键字详解/" class="post-more waves-effect waves-button">
            阅读全文...
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-Java中final关键字详解"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time datetime="2016-04-05T13:19:55.000Z" itemprop="datePublished" class="post-time">
  2016-04-05 21:19:55
</time>

        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Java/">Java</a></li></ul>



    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/2016/04/05/Java中final关键字详解/">Java中final关键字详解</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent" >

    
        <p>Java开发中，我们常常见到final关键字，经常在使用匿名内部类的时候可能会经常用到final关键字。Java中的String类就是一个final类，下面我们就来详细了解一下final这个关键字的用法。</p>
<h2 id="final关键字的基本用法"><a href="#final关键字的基本用法" class="headerlink" title="final关键字的基本用法"></a>final关键字的基本用法</h2><p>Java中，final关键字可以用来修饰类、方法和变量（包括成员变量和局部变量）。下面就从这三个方面来学习下final关键字的基本用法。</p>
<h3 id="修饰类"><a href="#修饰类" class="headerlink" title="修饰类"></a>修饰类</h3><p>当final关键字修饰一个类时，表明这个类不能被继承。final类中的成员变量可以根据需要设为final，但是要注意final类中的所有成员方法都会被隐式地指定为final方法。</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/final-final%E4%BF%AE%E9%A5%B0%E7%B1%BB.png" alt=""></p>
<blockquote>
<p>在使用final修饰类的时候，要注意谨慎选择，除非这个类真的在以后不会用来继承或者是出于安全的考虑，尽量不要讲类设计为final类。</p>
</blockquote>
<h3 id="修饰方法"><a href="#修饰方法" class="headerlink" title="修饰方法"></a>修饰方法</h3><p>使用final关键字修饰方法的原因有两个：第一个原因是把方法锁定，以防止任何子类修改它的含义；第二个原因是效率。在早期的Java实现版本中，会将final方法转为内嵌调用，但是如果方法过于庞大，可能看不到内嵌调用带来的任何性能提升，不需要使用final方法进行这些优化。因此，如果想要禁止该方法在子类中被覆盖，那么久可以将该方法用final关键字修饰。</p>
<p>注：类的private方法会隐式地被指定为final方法。</p>
<h3 id="修饰变量"><a href="#修饰变量" class="headerlink" title="修饰变量"></a>修饰变量</h3><p>final修饰变量的基本语法：</p>
<ul>
<li>如果final修饰的是基本数据类型的变量，则其数值一旦在初始化之后便不能更改；</li>
<li>如果final修饰的是引用类型的变量，则其初始化之后便不能再指向另一个对象；</li>
</ul>
<p>示例如下：</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/final-final%E4%BF%AE%E9%A5%B0%E5%8F%98%E9%87%8F.png" alt=""></p>
<p>上面代码中，对变量i和obj的重新赋值都报错了。</p>
<h2 id="深入理解final关键字"><a href="#深入理解final关键字" class="headerlink" title="深入理解final关键字"></a>深入理解final关键字</h2><p>在了解final关键字的基本用法后，我们来看看final关键字容易混淆的地方。</p>
<h3 id="类的final变量和普通变量有什么区别？"><a href="#类的final变量和普通变量有什么区别？" class="headerlink" title="类的final变量和普通变量有什么区别？"></a>类的final变量和普通变量有什么区别？</h3><p>当用final作用于类的成员变量时，成员变量（注意是类的成员变量，局部变量只需要保证在使用之前被初始化赋值即可）必须在定义时或者构造器中进行初始化赋值，而且final变量一旦被初始化赋值之后，就不能再被赋值了。</p>
<p>final变量和普通变量到底有什么区别呢？先看下面的例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">	<span class="comment">// TODO Auto-generated method stub</span></div><div class="line">	</div><div class="line">	String a = <span class="string">"helloworld"</span>;</div><div class="line">	<span class="keyword">final</span> String b = <span class="string">"hello"</span>;</div><div class="line">	String c = <span class="string">"hello"</span>;</div><div class="line">	String d = b + <span class="string">"world"</span>;</div><div class="line">	String e = c + <span class="string">"world"</span>;</div><div class="line">	</div><div class="line">	System.out.println((a == d));</div><div class="line">	System.out.println((a == e));</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>运行结果:<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="literal">true</span></div><div class="line"><span class="literal">false</span></div></pre></td></tr></table></figure></p>
<p>为什么第一个比较结果是true，而第二个比较结果为false？<br>这就是final变量和普变量的区别了，当final变量是基本数据类型以及String类型时，如果在编译期间能知道它的确切值，则编译器会把它当做编译器常量使用，也就是说用到该final变量的地方相当于直接访问这个常量，不需要在运行时确定。因此在上面的代码中，由于b被final修饰，因此会被当做编译器常量，所以在使用到b的地方会直接将变量b替换为它的值，而对于变量c的访问则在运行时通过链接来运行。要注意，只有在编译期间确切知道final变量值的情况下，编译器才会进行这样的优化，下面的这段代码就不会进行这样的优化：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">	<span class="comment">// TODO Auto-generated method stub</span></div><div class="line">	</div><div class="line">	String a = <span class="string">"helloworld"</span>;</div><div class="line">	<span class="keyword">final</span> String b = getStr();</div><div class="line">	String c = <span class="string">"hello"</span>;</div><div class="line">	String d = b + <span class="string">"world"</span>;</div><div class="line">	String e = c + <span class="string">"world"</span>;</div><div class="line">	</div><div class="line">	System.out.println((a == d));</div><div class="line">	System.out.println((a == e));</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getStr</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">return</span> <span class="string">"hell0"</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>结果是：<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="literal">false</span></div><div class="line"><span class="literal">false</span></div></pre></td></tr></table></figure></p>
<h3 id="被final修饰的引用变量指向的对象内容可变吗？"><a href="#被final修饰的引用变量指向的对象内容可变吗？" class="headerlink" title="被final修饰的引用变量指向的对象内容可变吗？"></a>被final修饰的引用变量指向的对象内容可变吗？</h3><p>final修饰的引用变量一旦初始化赋值之后就不能再指向其他的对象，那么该引用变量指向的对象的内容可变吗？先看下面的例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FinalDemo</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * <span class="doctag">@param</span> args</div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="comment">// TODO Auto-generated method stub</span></div><div class="line">		<span class="keyword">final</span> Person person = <span class="keyword">new</span> Person();</div><div class="line">		person.name = <span class="string">"liu"</span>;</div><div class="line">		person.age = <span class="number">27</span>;</div><div class="line">		System.out.println(person.toString());</div><div class="line"></div><div class="line">	&#125;</div><div class="line"></div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</div><div class="line">	<span class="keyword">public</span> String name = <span class="string">"zhang"</span>;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">int</span> age = <span class="number">0</span>;</div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="string">"Person [name="</span> + name + <span class="string">", age="</span> + age + <span class="string">"]"</span>;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>结果是：</p>
<figure class="highlight inform7"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">Person</span> <span class="comment">[name=liu, age=27]</span></div></pre></td></tr></table></figure>
<blockquote>
<p>由运行结果可知，引用变量被final修饰之后，虽然不能再指向其他的对象，但是它指向的对象的内容是可变的。</p>
</blockquote>
<h3 id="final和static"><a href="#final和static" class="headerlink" title="final和static"></a>final和static</h3><p>我们经常容易把final和static关键字混淆，static作用于成员变量用来表示只保存一份副本，而final的作用是用来保证变量不可变。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FinalDemo</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * <span class="doctag">@param</span> args</div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="comment">// TODO Auto-generated method stub</span></div><div class="line">		MyClass class1 = <span class="keyword">new</span> MyClass();</div><div class="line">		System.out.println(<span class="string">"i: "</span> + class1.i);</div><div class="line">		System.out.println(<span class="string">"j: "</span> + class1.j);</div><div class="line"></div><div class="line">		MyClass class2 = <span class="keyword">new</span> MyClass();</div><div class="line">		System.out.println(<span class="string">"i: "</span> + class2.i);</div><div class="line">		System.out.println(<span class="string">"j: "</span> + class2.j);</div><div class="line">	&#125;</div><div class="line"></div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> </span>&#123;</div><div class="line">	</div><div class="line">	<span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">double</span> i = Math.random();</div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> j = Math.random();</div><div class="line">		</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>运行结果:</p>
<figure class="highlight http"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">i</span>: 0.6230804434703052</div><div class="line"><span class="attribute">j</span>: 0.8707443438720905</div><div class="line"></div><div class="line"><span class="avrasm"><span class="symbol">i:</span> <span class="number">0.6451393896255735</span></span></div><div class="line"><span class="symbol">j:</span> <span class="number">0.8707443438720905</span></div></pre></td></tr></table></figure>
<p>从结果可知，每次打印的i值不同，而j值都是一样的。从这里口可以知道final和static的区别了。</p>
<h3 id="匿名内部类中使用的外部局部变量为什么只能是final变量？"><a href="#匿名内部类中使用的外部局部变量为什么只能是final变量？" class="headerlink" title="匿名内部类中使用的外部局部变量为什么只能是final变量？"></a>匿名内部类中使用的外部局部变量为什么只能是final变量？</h3><p>保证数据的一致性。Java编译器限定必须将外部局部变量限制为final变量，不允许对外部局部变量进行更改（对应引用类型的变量，是不允许指向新的对象），这样就保证了数据的一致性。</p>
<h3 id="关于final参数的问题"><a href="#关于final参数的问题" class="headerlink" title="关于final参数的问题"></a>关于final参数的问题</h3><p>关于网上流传的“当你在方法中不需要改变作为参数的对象变量时，明确使用final进行声明，会防止你无意的修改而影响到调用方法外的变量”，这句话其实是不恰当的。<br>因为无论参数是基本数据类型的变量还是引用类型的变量，使用final声明都不会达到上面所说的效果。</p>
<p>下面看例子：</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/final-final%E4%BF%AE%E9%A5%B0%E5%8F%82%E6%95%B0.png" alt=""></p>
<p>上面的代码像是让人觉得final修饰之后，就不能在方法中更改变量i的值了。殊不知，方法changValue和main方法中的变量i根本就不是一个变量，因为对于基本类型的变量，Java参数传递采用的是值传递，相当于直接将变量进行了拷贝，所以即使没有final修饰的情况下，在方法内部改变了变量i的值也不会影响方法外的i。</p>
<p>再看下面的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FinalDemo</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * <span class="doctag">@param</span> args</div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="comment">// TODO Auto-generated method stub</span></div><div class="line">		MyClass myClass = <span class="keyword">new</span> MyClass();</div><div class="line">		StringBuffer buffer = <span class="keyword">new</span> StringBuffer(<span class="string">"hello"</span>);</div><div class="line">		myClass.changValue(buffer);</div><div class="line">		System.out.println(buffer.toString());</div><div class="line">		myClass.changValue2(buffer);</div><div class="line">		System.out.println(buffer.toString());</div><div class="line">		</div><div class="line">	&#125;</div><div class="line"></div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> </span>&#123;</div><div class="line">		</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">changValue</span><span class="params">(<span class="keyword">final</span> StringBuffer buffer)</span> </span>&#123;</div><div class="line">		buffer.append(<span class="string">"world"</span>);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">changValue2</span><span class="params">(StringBuffer buffer)</span> </span>&#123;</div><div class="line">		StringBuffer buffer2 = buffer;</div><div class="line">		buffer2.append(<span class="string">"你好"</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>运行结果是：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">helloworld</span></div><div class="line">helloworld你好</div></pre></td></tr></table></figure>
<p>由结果可知，很显然，用final进行修饰参数和不修饰参数都没有阻止在changeValue中改变buffer指向的对象的内容。原因在对于引用数据类型，Java采用的是按引用传递，传递的是引用的地址，也就是变量所对象的内存空间的地址。在这里形参和实参指向的是同一个对象，因此让形参重新指向另一个对象对实参并没有任何影响。</p>

    

        <a href="/2016/04/05/Java中final关键字详解/" class="post-more waves-effect waves-button">
            阅读全文...
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-Android动画之Interpolator"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time datetime="2016-03-31T13:47:19.000Z" itemprop="datePublished" class="post-time">
  2016-03-31 21:47:19
</time>

        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Android/">Android</a></li></ul>



    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/2016/03/31/Android动画之Interpolator/">Android动画之Interpolator</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent" >

    
        <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>Interpolator可以翻译成插值器。Android中interpolator的最底层接口如下:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> android.animation;</div><div class="line"> </div><div class="line"><span class="comment">/**</span></div><div class="line"> * 时间插值器定义了一个动画的变化率。</div><div class="line"> * 这让动画让非线性的移动轨迹，例如加速和减速。</div><div class="line"> * &lt;hr/&gt;</div><div class="line"> * A time interpolator defines the rate of change of an animation. This allows animations</div><div class="line"> * to have non-linear motion, such as acceleration and deceleration.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">TimeInterpolator</span> </span>&#123;</div><div class="line"> </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 将动画已经消耗的时间的分数映射到一个表示插值的分数。</div><div class="line">     * 然后将插值与动画的变化值相乘来推导出当前已经过去的动画时间的动画变化量。</div><div class="line">     * &lt;hr/&gt;</div><div class="line">     * Maps a value representing the elapsed fraction of an animation to a value that represents</div><div class="line">     * the interpolated fraction. This interpolated value is then multiplied by the change in</div><div class="line">     * value of an animation to derive the animated value at the current elapsed animation time.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> input  一个0到1.0表示动画当前点的值，0表示开头。1表示结尾&lt;br/&gt; A value between 0 and 1.0 indicating our current point</div><div class="line">     *        in the animation where 0 represents the start and 1.0 represents</div><div class="line">     *        the end</div><div class="line">     * <span class="doctag">@return</span>   插值。它的值可以大于1来超出目标值，也小于0来空破底线。</div><div class="line">     *         interpolators which overshoot their targets, or less than 0 for</div><div class="line">     *         interpolators that undershoot their targets.</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">float</span> <span class="title">getInterpolation</span><span class="params">(<span class="keyword">float</span> input)</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>TimeInterpolator是在Android API11加入，之前的类叫Interpolator。现在Interpolator继承了TimeInterpolator</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> android.view.animation;</div><div class="line"> </div><div class="line"><span class="keyword">import</span> android.animation.TimeInterpolator;</div><div class="line"> </div><div class="line"><span class="comment">/**</span></div><div class="line"> * </div><div class="line"> * 一个定义动画变化率的插值器。</div><div class="line"> * 它允许对基本的（如透明，缩放，平移，旋转）进行加速，减速，重复等动画效果</div><div class="line"> * &lt;hr/&gt;</div><div class="line"> * An interpolator defines the rate of change of an animation. This allows</div><div class="line"> * the basic animation effects (alpha, scale, translate, rotate) to be</div><div class="line"> * accelerated, decelerated, repeated, etc.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Interpolator</span> <span class="keyword">extends</span> <span class="title">TimeInterpolator</span> </span>&#123;</div><div class="line">    <span class="comment">// A new interface, TimeInterpolator, was introduced for the new android.animation</span></div><div class="line">    <span class="comment">// package. This older Interpolator interface extends TimeInterpolator so that users of</span></div><div class="line">    <span class="comment">// the new Animator-based animations can use either the old Interpolator implementations or</span></div><div class="line">    <span class="comment">// new classes that implement TimeInterpolator directly.</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="插值器分析"><a href="#插值器分析" class="headerlink" title="插值器分析"></a>插值器分析</h2><h3 id="AccelerateInterpolator-加速插值器"><a href="#AccelerateInterpolator-加速插值器" class="headerlink" title="AccelerateInterpolator  加速插值器"></a>AccelerateInterpolator  加速插值器</h3><p>效果：在动画开始的地方速率改变比较慢，然后开始加速</p>
<p>源码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> android.view.animation;</div><div class="line"> </div><div class="line"><span class="keyword">import</span> android.content.Context;</div><div class="line"><span class="keyword">import</span> android.content.res.TypedArray;</div><div class="line"><span class="keyword">import</span> android.util.AttributeSet;</div><div class="line"> </div><div class="line"><span class="comment">/**</span></div><div class="line"> * </div><div class="line"> * 一个开始很慢然后不断加速的插值器。</div><div class="line"> * &lt;hr/&gt;</div><div class="line"> * An interpolator where the rate of change starts out slowly and</div><div class="line"> * and then accelerates.</div><div class="line"> *</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccelerateInterpolator</span> <span class="keyword">implements</span> <span class="title">Interpolator</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">float</span> mFactor;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">double</span> mDoubleFactor;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AccelerateInterpolator</span><span class="params">()</span> </span>&#123;</div><div class="line">        mFactor = <span class="number">1.0f</span>;</div><div class="line">        mDoubleFactor = <span class="number">2.0</span>;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Constructor</div><div class="line">     * </div><div class="line">     * <span class="doctag">@param</span> factor </div><div class="line">     *     动画的快慢度。将factor设置为1.0f会产生一条y=x^2的抛物线。</div><div class="line">增加factor到1.0f之后为加大这种渐入效果（也就是说它开头更加慢，结尾更加快）</div><div class="line">     *   &lt;br/&gt;Degree to which the animation should be eased. Seting</div><div class="line">     *        factor to 1.0f produces a y=x^2 parabola（抛物线）. Increasing factor above</div><div class="line">     *        1.0f  exaggerates the ease-in effect (i.e., it starts even</div><div class="line">     *        slower and ends evens faster)</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AccelerateInterpolator</span><span class="params">(<span class="keyword">float</span> factor)</span> </span>&#123;</div><div class="line">        mFactor = factor;</div><div class="line">        mDoubleFactor = <span class="number">2</span> * mFactor;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AccelerateInterpolator</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        TypedArray a =</div><div class="line">                context.obtainStyledAttributes(attrs, com.android.internal.R.styleable.AccelerateInterpolator);</div><div class="line"> </div><div class="line">        mFactor = a.getFloat(com.android.internal.R.styleable.AccelerateInterpolator_factor, <span class="number">1.0f</span>);</div><div class="line">        mDoubleFactor = <span class="number">2</span> * mFactor;</div><div class="line"> </div><div class="line">        a.recycle();</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getInterpolation</span><span class="params">(<span class="keyword">float</span> input)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (mFactor == <span class="number">1.0f</span>) &#123;</div><div class="line">            <span class="keyword">return</span> input * input;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">return</span> (<span class="keyword">float</span>)Math.pow(input, mDoubleFactor);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>根据getInterpolation方法可知加速度的大小由参数mFactor决定。<br>当mFactor值为1.0f时，动画加速轨迹相对于一条y=x^2的抛物线。如下图</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/Interpolator-AccelerateInterpolator_1.png" alt=""></p>
<p>当mFactor不为1时，轨迹曲线是y=x^(2 * mFactor)(0 &lt; x &lt;= 1)的曲线。<br>示例：当mFractor为4时，插值器的加速轨迹曲线如下图:</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/Interpolator-AccelerateInterpolator_2.png" alt=""></p>
<p>如果你在使用AccelerateInterpolator，想要那种一开始很慢，然后突然就很快的加速的动画效果的话，就将mFractor的值设置大点。</p>
<h3 id="DecelerateInterpolator减速插值器"><a href="#DecelerateInterpolator减速插值器" class="headerlink" title="DecelerateInterpolator减速插值器"></a>DecelerateInterpolator减速插值器</h3><p>效果：在动画开始的地方速率改变比较慢，然后开始加速</p>
<p>源代码如下:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> android.view.animation;</div><div class="line"> </div><div class="line"><span class="keyword">import</span> android.content.Context;</div><div class="line"><span class="keyword">import</span> android.content.res.TypedArray;</div><div class="line"><span class="keyword">import</span> android.util.AttributeSet;</div><div class="line"> </div><div class="line"><span class="comment">/**</span></div><div class="line"> * 一个开始比较快然后减速的插值器</div><div class="line"> * &lt;hr/&gt;</div><div class="line"> * An interpolator where the rate of change starts out quickly and</div><div class="line"> * and then decelerates.</div><div class="line"> *</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DecelerateInterpolator</span> <span class="keyword">implements</span> <span class="title">Interpolator</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DecelerateInterpolator</span><span class="params">()</span> </span>&#123;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Constructor</div><div class="line">     * </div><div class="line">     * <span class="doctag">@param</span> factor</div><div class="line">     *        动画的快慢度。将factor值设置为1.0f时将产生一条从上向下的y=x^2抛物线。</div><div class="line">     *        增加factor到1.0f以上将使渐入的效果增强（也就是说，开头更快，结尾更慢）</div><div class="line">     *        &lt;br/&gt;</div><div class="line">     *        Degree to which the animation should be eased. Setting factor to 1.0f produces</div><div class="line">     *        an upside-down y=x^2 parabola. Increasing factor above 1.0f makes exaggerates the</div><div class="line">     *        ease-out effect (i.e., it starts even faster and ends evens slower)</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DecelerateInterpolator</span><span class="params">(<span class="keyword">float</span> factor)</span> </span>&#123;</div><div class="line">        mFactor = factor;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DecelerateInterpolator</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        TypedArray a =</div><div class="line">                context.obtainStyledAttributes(attrs, com.android.internal.R.styleable.DecelerateInterpolator);</div><div class="line"> </div><div class="line">        mFactor = a.getFloat(com.android.internal.R.styleable.DecelerateInterpolator_factor, <span class="number">1.0f</span>);</div><div class="line"> </div><div class="line">        a.recycle();</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getInterpolation</span><span class="params">(<span class="keyword">float</span> input)</span> </span>&#123;</div><div class="line">        <span class="keyword">float</span> result;</div><div class="line">        <span class="keyword">if</span> (mFactor == <span class="number">1.0f</span>) &#123;</div><div class="line">            result = (<span class="number">1.0f</span> - ((<span class="number">1.0f</span> - input) * (<span class="number">1.0f</span> - input)));</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            result = (<span class="keyword">float</span>)(<span class="number">1.0f</span> - Math.pow((<span class="number">1.0f</span> - input), <span class="number">2</span> * mFactor));</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> result;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span> mFactor = <span class="number">1.0f</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>根据getInterpolation方法可知加速度的大小由参数mFactor决定。<br>当mFactor为1.0f时，它减速的轨迹函数为y=1-(1 - X)^2;如下图</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/Interpolator-DecelerateInterpolator_1.png" alt=""></p>
<p>当mFactor不为1.0f时，它减速的轨迹函数为:y=1.0 - (1.0 -x )^(2 * mFactor)。<br>当mFactor增大到4时，曲线轨迹如下图所示：</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/Interpolator-DecelerateInterpolator_2.png" alt=""></p>
<h3 id="AccelerateDecelerateInterpolator-加速减速插值器"><a href="#AccelerateDecelerateInterpolator-加速减速插值器" class="headerlink" title="AccelerateDecelerateInterpolator  加速减速插值器"></a>AccelerateDecelerateInterpolator  加速减速插值器</h3><p>效果：动画开始与结束的地方速率改变比较慢，在中间的时候加速</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> android.view.animation;</div><div class="line"> </div><div class="line"><span class="keyword">import</span> android.content.Context;</div><div class="line"><span class="keyword">import</span> android.util.AttributeSet;</div><div class="line"> </div><div class="line"><span class="comment">/**</span></div><div class="line"> * 一个变化率开始慢从中间后开始变快。</div><div class="line"> * &lt;hr/&gt;</div><div class="line"> * An interpolator where the rate of change starts and ends slowly but</div><div class="line"> * accelerates through the middle.</div><div class="line"> * </div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccelerateDecelerateInterpolator</span> <span class="keyword">implements</span> <span class="title">Interpolator</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AccelerateDecelerateInterpolator</span><span class="params">()</span> </span>&#123;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="meta">@SuppressWarnings</span>(&#123;<span class="string">"UnusedDeclaration"</span>&#125;)</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AccelerateDecelerateInterpolator</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getInterpolation</span><span class="params">(<span class="keyword">float</span> input)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> (<span class="keyword">float</span>)(Math.cos((input + <span class="number">1</span>) * Math.PI) / <span class="number">2.0f</span>) + <span class="number">0.5f</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>根据getInterpolation方法可以得出其变化曲线如下：</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/Interpolator-AccelerateDecelerateInterpolator.png" alt=""></p>
<h3 id="LinearInterpolator-线性插值器"><a href="#LinearInterpolator-线性插值器" class="headerlink" title="LinearInterpolator 线性插值器"></a>LinearInterpolator 线性插值器</h3><p>效果:动画按常速率变化</p>
<p>源代码如下:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * An interpolator where the rate of change is constant</div><div class="line"> *</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinearInterpolator</span> <span class="keyword">implements</span> <span class="title">Interpolator</span> </span>&#123;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LinearInterpolator</span><span class="params">()</span> </span>&#123;</div><div class="line">    &#125;</div><div class="line">     </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LinearInterpolator</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">    &#125;</div><div class="line">     </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getInterpolation</span><span class="params">(<span class="keyword">float</span> input)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> input;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="BounceInterpolator-弹跳插值器"><a href="#BounceInterpolator-弹跳插值器" class="headerlink" title="BounceInterpolator 弹跳插值器"></a>BounceInterpolator 弹跳插值器</h3><p>效果:动画结束的时候弹起</p>
<p>源代码如下:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> android.view.animation;</div><div class="line"> </div><div class="line"><span class="keyword">import</span> android.content.Context;</div><div class="line"><span class="keyword">import</span> android.util.AttributeSet;</div><div class="line"> </div><div class="line"><span class="comment">/**</span></div><div class="line"> * 这个插值器的插值在后面呈弹跳状态。</div><div class="line"> * An interpolator where the change bounces at the end.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BounceInterpolator</span> <span class="keyword">implements</span> <span class="title">Interpolator</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BounceInterpolator</span><span class="params">()</span> </span>&#123;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="meta">@SuppressWarnings</span>(&#123;<span class="string">"UnusedDeclaration"</span>&#125;)</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BounceInterpolator</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">float</span> <span class="title">bounce</span><span class="params">(<span class="keyword">float</span> t)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> t * t * <span class="number">8.0f</span>;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getInterpolation</span><span class="params">(<span class="keyword">float</span> t)</span> </span>&#123;</div><div class="line">        <span class="comment">// _b(t) = t * t * 8</span></div><div class="line">        <span class="comment">// bs(t) = _b(t) for t &lt; 0.3535</span></div><div class="line">        <span class="comment">// bs(t) = _b(t - 0.54719) + 0.7 for t &lt; 0.7408</span></div><div class="line">        <span class="comment">// bs(t) = _b(t - 0.8526) + 0.9 for t &lt; 0.9644</span></div><div class="line">        <span class="comment">// bs(t) = _b(t - 1.0435) + 0.95 for t &lt;= 1.0</span></div><div class="line">        <span class="comment">// b(t) = bs(t * 1.1226)</span></div><div class="line">        t *= <span class="number">1.1226f</span>;</div><div class="line">        <span class="keyword">if</span> (t &lt; <span class="number">0.3535f</span>) <span class="keyword">return</span> bounce(t);</div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (t &lt; <span class="number">0.7408f</span>) <span class="keyword">return</span> bounce(t - <span class="number">0.54719f</span>) + <span class="number">0.7f</span>;</div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (t &lt; <span class="number">0.9644f</span>) <span class="keyword">return</span> bounce(t - <span class="number">0.8526f</span>) + <span class="number">0.9f</span>;</div><div class="line">        <span class="keyword">else</span> <span class="keyword">return</span> bounce(t - <span class="number">1.0435f</span>) + <span class="number">0.95f</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>根据getInterpolation方法得到以下插值曲线图：</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/Interpolator-BounceInterpolator.png" alt=""></p>
<h3 id="AnticipateInterpolator-回荡秋千插值器"><a href="#AnticipateInterpolator-回荡秋千插值器" class="headerlink" title="AnticipateInterpolator 回荡秋千插值器"></a>AnticipateInterpolator 回荡秋千插值器</h3><p>效果：开始的时候向后，然后向前甩</p>
<p>源代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> android.view.animation;</div><div class="line"> </div><div class="line"><span class="keyword">import</span> android.content.Context;</div><div class="line"><span class="keyword">import</span> android.content.res.TypedArray;</div><div class="line"><span class="keyword">import</span> android.util.AttributeSet;</div><div class="line"> </div><div class="line"><span class="comment">/**</span></div><div class="line"> * 一个开始向后荡，然后向前荡的插值器。</div><div class="line"> * &lt;hr/&gt;</div><div class="line"> * An interpolator where the change starts backward then flings forward.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnticipateInterpolator</span> <span class="keyword">implements</span> <span class="title">Interpolator</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">float</span> mTension;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AnticipateInterpolator</span><span class="params">()</span> </span>&#123;</div><div class="line">        mTension = <span class="number">2.0f</span>;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * <span class="doctag">@param</span> tension </div><div class="line">     *  绷紧程度，当绷紧程序为0.0f时，也就没有了反向作用力。插值器将退化成一个y=x^3的加速插值器。</div><div class="line">     * &lt;br/&gt;</div><div class="line">     * Amount of anticipation. When tension equals 0.0f, there is</div><div class="line">     *                no anticipation and the interpolator becomes a simple</div><div class="line">     *                acceleration interpolator.</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AnticipateInterpolator</span><span class="params">(<span class="keyword">float</span> tension)</span> </span>&#123;</div><div class="line">        mTension = tension;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AnticipateInterpolator</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        TypedArray a = context.obtainStyledAttributes(attrs,</div><div class="line">                com.android.internal.R.styleable.AnticipateInterpolator);</div><div class="line"> </div><div class="line">        mTension =</div><div class="line">                a.getFloat(com.android.internal.R.styleable.AnticipateInterpolator_tension, <span class="number">2.0f</span>);</div><div class="line"> </div><div class="line">        a.recycle();</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getInterpolation</span><span class="params">(<span class="keyword">float</span> t)</span> </span>&#123;</div><div class="line">        <span class="comment">// a(t) = t * t * ((tension + 1) * t - tension)</span></div><div class="line">        <span class="keyword">return</span> t * t * (((mTension + <span class="number">1</span>) * t) - mTension);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>根据getInterpolation方法：</p>
<p>当tension为默认值2时，曲线图如下：</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/Interpolator-AnticipateInterpolator_1.png" alt=""></p>
<p>当tension为4时，曲线图如下：</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/Interpolator-AnticipateInterpolator_2.png" alt=""></p>
<h3 id="AnticipateOvershootInterpolator"><a href="#AnticipateOvershootInterpolator" class="headerlink" title="AnticipateOvershootInterpolator"></a>AnticipateOvershootInterpolator</h3><p>效果：开始的时候向后，然后向前甩一定值后 返回最后的值</p>
<p>源代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> android.view.animation;</div><div class="line"> </div><div class="line"><span class="keyword">import</span> android.content.Context;</div><div class="line"><span class="keyword">import</span> android.content.res.TypedArray;</div><div class="line"><span class="keyword">import</span> android.util.AttributeSet;</div><div class="line"> </div><div class="line"><span class="comment">/**</span></div><div class="line"> * 一个插值器它开始向上推，然后向下荡，荡过最低线。然后再回到最低线。</div><div class="line"> * &lt;hr/&gt;</div><div class="line"> * An interpolator where the change starts backward then flings forward and overshoots</div><div class="line"> * the target value and finally goes back to the final value.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnticipateOvershootInterpolator</span> <span class="keyword">implements</span> <span class="title">Interpolator</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">float</span> mTension;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AnticipateOvershootInterpolator</span><span class="params">()</span> </span>&#123;</div><div class="line">        mTension = <span class="number">2.0f</span> * <span class="number">1.5f</span>;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * <span class="doctag">@param</span> tension </div><div class="line">     *  anticipation/overshoot的比值。当和tension值为0.0f时，</div><div class="line">     *  也就没有anticipation/overshoot的比值了，插值器退化为一个加速/减速插值器。</div><div class="line">     *  &lt;br/&gt;</div><div class="line">     * Amount of anticipation/overshoot. When tension equals 0.0f,</div><div class="line">     *                there is no anticipation/overshoot and the interpolator becomes</div><div class="line">     *                a simple acceleration/deceleration interpolator.</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AnticipateOvershootInterpolator</span><span class="params">(<span class="keyword">float</span> tension)</span> </span>&#123;</div><div class="line">        mTension = tension * <span class="number">1.5f</span>;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * <span class="doctag">@param</span> tension Amount of anticipation/overshoot. When tension equals 0.0f,</div><div class="line">     *                there is no anticipation/overshoot and the interpolator becomes</div><div class="line">     *                a simple acceleration/deceleration interpolator.</div><div class="line">     * <span class="doctag">@param</span> extraTension </div><div class="line">     * 乘以tension的值。例如，在上面构造函数中extraTension的值为1.5f</div><div class="line">     * &lt;br/&gt;</div><div class="line">     * Amount by which to multiply the tension. For instance,</div><div class="line">     *                     to get the same overshoot as an OvershootInterpolator with</div><div class="line">     *                     a tension of 2.0f, you would use an extraTension of 1.5f.</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AnticipateOvershootInterpolator</span><span class="params">(<span class="keyword">float</span> tension, <span class="keyword">float</span> extraTension)</span> </span>&#123;</div><div class="line">        mTension = tension * extraTension;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AnticipateOvershootInterpolator</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        TypedArray a = context.obtainStyledAttributes(attrs, AnticipateOvershootInterpolator);</div><div class="line"> </div><div class="line">        mTension = a.getFloat(AnticipateOvershootInterpolator_tension, <span class="number">2.0f</span>) *</div><div class="line">                a.getFloat(AnticipateOvershootInterpolator_extraTension, <span class="number">1.5f</span>);</div><div class="line"> </div><div class="line">        a.recycle();</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">float</span> <span class="title">a</span><span class="params">(<span class="keyword">float</span> t, <span class="keyword">float</span> s)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> t * t * (((s + <span class="number">1</span>) * t) - s);</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">float</span> <span class="title">o</span><span class="params">(<span class="keyword">float</span> t, <span class="keyword">float</span> s)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> t * t * (((s + <span class="number">1</span>) * t) + s);</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getInterpolation</span><span class="params">(<span class="keyword">float</span> t)</span> </span>&#123;</div><div class="line">        <span class="comment">// a(t, s) = t * t * ((s + 1) * t - s)</span></div><div class="line">                <span class="comment">// o(t, s) = t * t * ((s + 1) * t + s)</span></div><div class="line">        <span class="comment">// f(t) = 0.5 * a(t * 2, tension * extraTension), when t &lt; 0.5</span></div><div class="line">        <span class="comment">// f(t) = 0.5 * (o(t * 2 - 2, tension * extraTension) + 2), when t &lt;= 1.0</span></div><div class="line">        <span class="keyword">if</span> (t &lt; <span class="number">0.5f</span>) <span class="keyword">return</span> <span class="number">0.5f</span> * a(t * <span class="number">2.0f</span>, mTension);</div><div class="line">        <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0.5f</span> * (o((t * <span class="number">2.0f</span>) - <span class="number">2.0f</span>, mTension) + <span class="number">2.0f</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>当tension为默认值时，曲线图为：</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/Interpolator-AnticipateOvershootInterpolator.png" alt=""></p>
<h3 id="CycleInterpolator-正弦周期变化插值器"><a href="#CycleInterpolator-正弦周期变化插值器" class="headerlink" title="CycleInterpolator 正弦周期变化插值器"></a>CycleInterpolator 正弦周期变化插值器</h3><p> 效果：动画循环播放特定的次数，速率改变沿着正弦曲线</p>
<p>源代码为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> android.view.animation;</div><div class="line"> </div><div class="line"><span class="keyword">import</span> android.content.Context;</div><div class="line"><span class="keyword">import</span> android.content.res.TypedArray;</div><div class="line"><span class="keyword">import</span> android.util.AttributeSet;</div><div class="line"> </div><div class="line"><span class="comment">/**</span></div><div class="line"> * </div><div class="line"> * 以指定的周期重复动画。变化率曲线为正弦。</div><div class="line"> * &lt;hr/&gt;</div><div class="line"> * Repeats the animation for a specified number of cycles（周期）. The</div><div class="line"> * rate of change follows a sinusoidal（正弦） pattern.</div><div class="line"> *</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CycleInterpolator</span> <span class="keyword">implements</span> <span class="title">Interpolator</span> </span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * </div><div class="line">     * <span class="doctag">@param</span> cycles 要重复的周期数</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CycleInterpolator</span><span class="params">(<span class="keyword">float</span> cycles)</span> </span>&#123;</div><div class="line">        mCycles = cycles;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CycleInterpolator</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        TypedArray a =</div><div class="line">                context.obtainStyledAttributes(attrs, com.android.internal.R.styleable.CycleInterpolator);</div><div class="line"> </div><div class="line">        mCycles = a.getFloat(com.android.internal.R.styleable.CycleInterpolator_cycles, <span class="number">1.0f</span>);</div><div class="line"> </div><div class="line">        a.recycle();</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getInterpolation</span><span class="params">(<span class="keyword">float</span> input)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> (<span class="keyword">float</span>)(Math.sin(<span class="number">2</span> * mCycles * Math.PI * input));</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span> mCycles;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>当cycle值为1时，即变化一周时，曲线图如下：</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/Interpolator-CycleInterpolator%20png.png" alt=""></p>
<h3 id="OvershootInterpolator"><a href="#OvershootInterpolator" class="headerlink" title="OvershootInterpolator"></a>OvershootInterpolator</h3><p>效果：向前甩一定值后再回到原来位置</p>
<p>源代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> android.view.animation;</div><div class="line"> </div><div class="line"><span class="keyword">import</span> android.content.Context;</div><div class="line"><span class="keyword">import</span> android.content.res.TypedArray;</div><div class="line"><span class="keyword">import</span> android.util.AttributeSet;</div><div class="line"> </div><div class="line"><span class="comment">/**</span></div><div class="line"> * An interpolator where the change flings forward and overshoots the last value</div><div class="line"> * then comes back.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OvershootInterpolator</span> <span class="keyword">implements</span> <span class="title">Interpolator</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">float</span> mTension;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">OvershootInterpolator</span><span class="params">()</span> </span>&#123;</div><div class="line">        mTension = <span class="number">2.0f</span>;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * <span class="doctag">@param</span> tension Amount of overshoot. When tension equals 0.0f, there is</div><div class="line">     *                no overshoot and the interpolator becomes a simple</div><div class="line">     *                deceleration interpolator.</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">OvershootInterpolator</span><span class="params">(<span class="keyword">float</span> tension)</span> </span>&#123;</div><div class="line">        mTension = tension;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">OvershootInterpolator</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        TypedArray a = context.obtainStyledAttributes(attrs,</div><div class="line">                com.android.internal.R.styleable.OvershootInterpolator);</div><div class="line"> </div><div class="line">        mTension =</div><div class="line">                a.getFloat(com.android.internal.R.styleable.OvershootInterpolator_tension, <span class="number">2.0f</span>);</div><div class="line"> </div><div class="line">        a.recycle();</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getInterpolation</span><span class="params">(<span class="keyword">float</span> t)</span> </span>&#123;</div><div class="line">        <span class="comment">// _o(t) = t * t * ((tension + 1) * t + tension)</span></div><div class="line">        <span class="comment">// o(t) = _o(t - 1) + 1</span></div><div class="line">        t -= <span class="number">1.0f</span>;</div><div class="line">        <span class="keyword">return</span> (t * t * (((mTension + <span class="number">1</span>) * t) + mTension)) + <span class="number">1.0f</span>;</div><div class="line">        <span class="comment">//plot &#123;(x-1)(x-1)((tension+1)(x-1)+tension)+1,(0&lt;x&lt;=1)&#125;</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>当tension为默认值2时，曲线图如下：</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/Interpolator-OvershootInterpolator%20_1.png" alt=""></p>
<p>当tension的值为4时，曲线图如下：</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/Interpolator-OvershootInterpolator_3.png" alt=""></p>

    

        <a href="/2016/03/31/Android动画之Interpolator/" class="post-more waves-effect waves-button">
            阅读全文...
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android动画/">Android动画</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-HTML5之Canvas"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time datetime="2016-03-28T14:34:25.000Z" itemprop="datePublished" class="post-time">
  2016-03-28 22:34:25
</time>

        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/HTML5/">HTML5</a></li></ul>



    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/2016/03/28/HTML5之Canvas/">HTML5之Canvas</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent" >

    
        <h2 id="Canvas"><a href="#Canvas" class="headerlink" title="Canvas"></a>Canvas</h2><p>Canvas是HTML5新增的组件，它就是一块画布，可以用JavaScript在上画绘制各种图标、动画等。</p>
<h3 id="Web页面增加画布"><a href="#Web页面增加画布" class="headerlink" title="Web页面增加画布"></a>Web页面增加画布</h3><p>Canvas元素是一个标准的HTML5元素，可以直接在HTML5页面中添加<code>&lt;canvas&gt;</code>标签，如</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE HTML&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Look what I Drew<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"draw"</span> <span class="attr">width</span>=<span class="string">"600"</span> <span class="attr">height</span>=<span class="string">"200"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>width属性定义它在web页面中水平方向所占的像素，height定义了它在web页面中垂直方向所占的像素。</p>
<p>注意：上面的web页面无法显示画布的，除非你在画布上绘制了内容。</p>
<h3 id="显示画布"><a href="#显示画布" class="headerlink" title="显示画布"></a>显示画布</h3><p>现在找到一个证据，证明画布在我们的页面中确实存在。我们可以通过位canvas指定CSS样式，下面来增加一个简单的样式，为画布增加一个1像素宽的黑色边框。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE HTML&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Look what I Drew<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">	<span class="comment">&lt;!--指定样式--&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></div><div class="line">        <span class="selector-tag">canvas</span>&#123;</div><div class="line">            <span class="attribute">border</span>: <span class="number">1px</span> solid black;</div><div class="line">        &#125;</div><div class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"draw"</span> <span class="attr">width</span>=<span class="string">"600"</span> <span class="attr">height</span>=<span class="string">"200"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>效果:</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/Canvas-canvas%E5%8A%A0%E6%A0%B7%E5%BC%8F.png" alt=""></p>
<ul>
<li>一个页面可以有多个画布，但是要为每个Canvas指定唯一的id</li>
<li>默认情况下，画布是透明的</li>
</ul>
<h3 id="在画布上绘图"><a href="#在画布上绘图" class="headerlink" title="在画布上绘图"></a>在画布上绘图</h3><p>接下来我们开始在画布上绘制一个矩形。要画这个矩形，首先要确定矩形的位置，其次是矩形的大小。这里把矩形画在x=10像素、y=10像素的位置，让它的高度和宽度都等于100像素。</p>
<ul>
<li>1.首先获得Canvas元素的引用</li>
<li>2.获取画布的一个“2d”上下文</li>
<li>3.使用这个上下文莱绘制图像</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE HTML&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Look what I Drew<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></div><div class="line">        <span class="selector-tag">canvas</span>&#123;</div><div class="line">            <span class="attribute">border</span>: <span class="number">1px</span> solid black;</div><div class="line">        &#125;</div><div class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">        <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="comment">//在画布上画个矩形</span></div><div class="line">            <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'draw'</span>);</div><div class="line">            <span class="keyword">var</span> context = canvas.getContext(<span class="string">"2d"</span>);</div><div class="line">            context.fillRect(<span class="number">10</span>,<span class="number">10</span>,<span class="number">100</span>,<span class="number">100</span>);</div><div class="line">        &#125;;</div><div class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"draw"</span> <span class="attr">width</span>=<span class="string">"600"</span> <span class="attr">height</span>=<span class="string">"200"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="失败处理"><a href="#失败处理" class="headerlink" title="失败处理"></a>失败处理</h3><p>因为Canvas是HTML5中新增的特性，所以会遇到有些浏览器不支持的情况，这是我们就需要查看canvas对象中是否存在getContext方法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">		<span class="comment">//在画布上画个矩形</span></div><div class="line">		<span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'draw'</span>);</div><div class="line">		<span class="comment">//判断浏览器是否支持Canvas</span></div><div class="line">		<span class="keyword">if</span> (canvas.getContext) &#123;</div><div class="line">			<span class="built_in">console</span>.info(<span class="string">"you hava canvas"</span>);</div><div class="line">			<span class="keyword">var</span> context = canvas.getContext(<span class="string">"2d"</span>);</div><div class="line">			context.fillRect(<span class="number">10</span>,<span class="number">10</span>,<span class="number">100</span>,<span class="number">100</span>);</div><div class="line">		&#125; <span class="keyword">else</span> &#123;</div><div class="line">			<span class="built_in">console</span>.info(<span class="string">"soory, no canvas support ApI"</span>);</div><div class="line">		&#125;</div><div class="line"></div><div class="line"></div><div class="line">	&#125;;</div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/Canvas-%E7%94%BB%E5%B8%83%E4%B8%8A%E7%94%BB%E7%9F%A9%E5%BD%A2.png" alt=""></p>
<p>此外我们还可以这样做：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="selector-tag">canvas</span> id=<span class="string">"draw"</span> <span class="attribute">width</span>=<span class="string">"600"</span> height=<span class="string">"200"</span>&gt;Please upgrade your browser!&lt;/canvas&gt;</div></pre></td></tr></table></figure>
<p>只要浏览器看到不认识的元素，默认行为就显示其中包含的文本。所以，不支持Canvas的浏览器看到<code>&lt;canvas&gt;</code>元素时，它们就会显示Please upgrade your browser!。另一方面，支持画布的浏览器会直接忽略画布标记之间的所有文本，所以不会显示这个文本。</p>
<h2 id="实例演示"><a href="#实例演示" class="headerlink" title="实例演示"></a>实例演示</h2><p>现在，我们开始通过一个实例来学习使用Canvas绘制矩形、圆、文本、图片等功能。先看看效果：</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/Canvas-%E7%A4%BA%E4%BE%8B%E6%95%88%E6%9E%9C.png" alt=""></p>
<h3 id="建立HTML，并增加form表单"><a href="#建立HTML，并增加form表单" class="headerlink" title="建立HTML，并增加form表单"></a>建立HTML，并增加form表单</h3><p>先新建一个HTML的页面，并增加form表单控件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE HTML&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>TweetShirt<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></div><div class="line">        <span class="selector-tag">canvas</span>&#123;</div><div class="line">            <span class="attribute">border</span>: <span class="number">1px</span> solid black;</div><div class="line">        &#125;</div><div class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span> = <span class="string">"tweetshirt.js"</span>&gt;</span><span class="undefined"></span></div><div class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>TweetShirt<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"tshirtCanvas"</span> <span class="attr">width</span>=<span class="string">"600"</span> <span class="attr">height</span>=<span class="string">"200"</span>&gt;</span>Please upgrade your browser to use TweetShirt!<span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">form</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"backgroudColor"</span>&gt;</span>选择背景颜色: <span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span> = <span class="string">"backgroundColor"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"white"</span> <span class="attr">selected</span>=<span class="string">"selected"</span>&gt;</span>白色<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"black"</span>&gt;</span>黑色<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">select</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"shape"</span>&gt;</span>选择图形: <span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span> = <span class="string">"shape"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"none"</span> <span class="attr">selected</span>=<span class="string">"selected"</span>&gt;</span>无<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"circles"</span>&gt;</span>圆形<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"squares"</span>&gt;</span>正方形<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">select</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"foregroundColor"</span>&gt;</span>选择前景颜色: <span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span> = <span class="string">"foregroundColor"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"black"</span> <span class="attr">selected</span>=<span class="string">"selected"</span>&gt;</span>黑色<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"white"</span>&gt;</span>白色<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">select</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">id</span>=<span class="string">"previewButton"</span> <span class="attr">value</span>=<span class="string">"预览"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="JavaScript处理表单控件"><a href="#JavaScript处理表单控件" class="headerlink" title="JavaScript处理表单控件"></a>JavaScript处理表单控件</h3><p>新建一个JavaScript文件tweetshirt.js，首先启动预览按钮，这样点击这个按钮时它就会调用一个JavaScript函数来处理Canvas绘制。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> button = <span class="built_in">document</span>.getElementById(<span class="string">"previewButton"</span>);</div><div class="line">    button.onclick = previewHandler;</div><div class="line">&#125;</div><div class="line"></div><div class="line">&lt;!--预览点击事件--&gt;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">previewHandler</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">"tshirtCanvas"</span>);</div><div class="line">    <span class="keyword">var</span> context = canvas.getContext(<span class="string">"2d"</span>);</div><div class="line"></div><div class="line">    <span class="comment">//绘制图像之前，重置之前绘制的内容</span></div><div class="line">    fillBackgroudColor(canvas,context);</div><div class="line"></div><div class="line">    <span class="comment">//查看界面选择了哪种颜色</span></div><div class="line">    <span class="keyword">var</span> selectObj = <span class="built_in">document</span>.getElementById(<span class="string">"shape"</span>);</div><div class="line">    <span class="keyword">var</span> index = selectObj.selectedIndex; <span class="comment">//得到表单控件选项的编号的数组</span></div><div class="line">    <span class="keyword">var</span> shape = selectObj[index].value; <span class="comment">//得到选项的值</span></div><div class="line"></div><div class="line">    <span class="keyword">if</span> (shape == <span class="string">"squares"</span>) &#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> squares = <span class="number">0</span> ; squares &lt; <span class="number">20</span>; squares++) &#123;</div><div class="line">			<span class="comment">//绘制正方形</span></div><div class="line">            drawSquare(canvas,context);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (shape == <span class="string">"circles"</span>) &#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> circles = <span class="number">0</span> ; circles &lt; <span class="number">20</span>; circles++) &#123;</div><div class="line">			<span class="comment">//绘制圆</span></div><div class="line">            drawCircle(canvas,context);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">	<span class="comment">//绘制文本</span></div><div class="line">    drawText(canvas,context);</div><div class="line">	<span class="comment">//绘制图片</span></div><div class="line">    drawImage(canvas,context);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fillBackgroudColor</span>(<span class="params">canvas,context</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> selectObj = <span class="built_in">document</span>.getElementById(<span class="string">"backgroundColor"</span>);</div><div class="line">    <span class="keyword">var</span> index = selectObj.selectedIndex;</div><div class="line">    <span class="keyword">var</span> bgColor = selectObj[index].value;</div><div class="line"></div><div class="line">    <span class="comment">//fillStyle保存画布上完成绘制时所用的颜色,它是一个属性而不是方法，所以需要设置而不是调用</span></div><div class="line">    context.fillStyle = bgColor;</div><div class="line">    context.fillRect(<span class="number">0</span>,<span class="number">0</span>,<span class="number">600</span>,<span class="number">200</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="绘制矩形"><a href="#绘制矩形" class="headerlink" title="绘制矩形"></a>绘制矩形</h3><ul>
<li>指定正方形的边长</li>
<li>指定正方形的位置x和y</li>
<li>设置正方形的属性</li>
<li>绘制正方形</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//画正方形</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">drawSquare</span>(<span class="params">canvas,context</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> w = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">40</span>);</div><div class="line"></div><div class="line">    <span class="keyword">var</span> x = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * canvas.width);</div><div class="line">    <span class="keyword">var</span> y = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * canvas.height);</div><div class="line"></div><div class="line">    context.fillStyle = <span class="string">"lightblue"</span>;</div><div class="line">    context.fillRect(x,y,w,w);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/Canvas-%E7%94%BB%E5%B8%83%E4%B8%8A%E7%94%BB%E7%9F%A9%E5%BD%A2.png" alt=""></p>
<h3 id="绘制线"><a href="#绘制线" class="headerlink" title="绘制线"></a>绘制线</h3><ul>
<li>beginPath方法告诉画布开始一个新路径</li>
<li>moveTo方法把画笔移到画布上的指定点</li>
<li>lineTo方法描绘路径，从画笔的当前位置描绘到画布上的另一个点</li>
<li>closePath方法将路径的起始点连接到当前路径的最后一个点</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//绘制线</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">drawLine</span>(<span class="params">canvas, context</span>) </span>&#123;</div><div class="line">	context.beginPath();</div><div class="line">	context.moveTo(<span class="number">100</span>, <span class="number">150</span>);</div><div class="line">	context.lineTo(<span class="number">250</span>, <span class="number">75</span>);</div><div class="line">	context.lineTo(<span class="number">125</span>, <span class="number">30</span>);</div><div class="line">	context.closePath();</div><div class="line">	context.lineWidth = <span class="number">5</span>;</div><div class="line">	context.stroke();</div><div class="line">	context.fillStyle = <span class="string">"red"</span>;</div><div class="line">	context.fill();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="绘制圆形"><a href="#绘制圆形" class="headerlink" title="绘制圆形"></a>绘制圆形</h3><ul>
<li>创建一个路径</li>
<li>填充arc方法参数</li>
<li>设置圆的属性</li>
<li>填充圆</li>
</ul>
<p>先来分析arc方法</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">context</span><span class="selector-class">.arc</span>(<span class="selector-tag">x</span>,<span class="selector-tag">y</span>,<span class="selector-tag">radius</span>,<span class="selector-tag">startAngle</span>,<span class="selector-tag">endAngle</span><span class="selector-class">.direction</span>);</div></pre></td></tr></table></figure>
<ul>
<li>x和y：确定圆心在画布上的位置</li>
<li>radius：圆的半径</li>
<li>startAngle：圆弧的起始角，确定路径的起点，可以为负值（表示按负方向度量），单位为弧度</li>
<li>endAngle：圆弧的终止角，确定路径的终点，可以为负值（表示按负方向度量），单位为弧度</li>
<li>direction： true表示逆时针画弧，false表示顺时针画弧</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//画圆形</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">drawCircle</span>(<span class="params">canvas,context</span>) </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> radius = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">40</span>);</div><div class="line"></div><div class="line">    <span class="keyword">var</span> x = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * canvas.width);</div><div class="line">    <span class="keyword">var</span> y = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * canvas.height);</div><div class="line"></div><div class="line">    context.beginPath();</div><div class="line">    context.arc(x,y,radius,<span class="number">0</span>,degreeToRadians(<span class="number">360</span>),<span class="literal">true</span>);</div><div class="line">    context.fillStyle = <span class="string">"red"</span>;</div><div class="line">    context.fill();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//度数转弧度</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">degreeToRadians</span>(<span class="params">degree</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> (degree * <span class="built_in">Math</span>.PI) / <span class="number">180</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/Canvas-%E7%BB%98%E5%88%B6%E5%9C%86%E5%BD%A2.png" alt=""></p>
<h3 id="绘制文本"><a href="#绘制文本" class="headerlink" title="绘制文本"></a>绘制文本</h3><ul>
<li>设置文本的属性</li>
<li>填充文本</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//画文本</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">drawText</span>(<span class="params">canvas,context</span>) </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> selectObj = <span class="built_in">document</span>.getElementById(<span class="string">"foregroundColor"</span>);</div><div class="line">    <span class="keyword">var</span> index = selectObj.selectedIndex;</div><div class="line">    <span class="keyword">var</span> fgColor = selectObj[index].value;</div><div class="line"></div><div class="line">    context.fillStyle = fgColor; <span class="comment">//设置字体颜色</span></div><div class="line">    context.font = <span class="string">"bold 1em sans-serif"</span>; <span class="comment">//设置字体</span></div><div class="line">    context.textAlign = <span class="string">"left"</span>; <span class="comment">//设置对齐方式</span></div><div class="line">    context.fillText(<span class="string">"I saw this tweet"</span>,<span class="number">20</span>,<span class="number">40</span>); <span class="comment">//填充文本</span></div><div class="line"></div><div class="line">    context.font = <span class="string">"bold 1em sans-serif"</span>;</div><div class="line">    context.textAlign = <span class="string">"right"</span>;</div><div class="line">    context.fillText(<span class="string">"and I got was this lousy t-shirt!"</span>,canvas.width<span class="number">-20</span>,canvas.height<span class="number">-40</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/Canvas-%E7%BB%98%E5%88%B6%E6%96%87%E6%9C%AC.png" alt=""></p>
<h3 id="绘制图片"><a href="#绘制图片" class="headerlink" title="绘制图片"></a>绘制图片</h3><ul>
<li>首先，创建一个JavaScript Image对象</li>
<li>设置这个Image对象的图片来源地址</li>
<li>调用drawImage方法绘制图片</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">drawImage</span>(<span class="params">canvas,context</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> image = <span class="keyword">new</span> Image();</div><div class="line">    image.src = <span class="string">"twitterBird.png"</span>;</div><div class="line"></div><div class="line">	<span class="comment">//表示图片加载完成，就执行这个函数</span></div><div class="line">    image.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        context.drawImage(image,<span class="number">20</span>,<span class="number">120</span>,<span class="number">70</span>,<span class="number">70</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>效果:</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/Canvas-%E7%BB%98%E5%88%B6%E5%9B%BE%E7%89%87.png" alt=""></p>

    

        <a href="/2016/03/28/HTML5之Canvas/" class="post-more waves-effect waves-button">
            阅读全文...
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HTML5/">HTML5</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-JavaScript函数和对象"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time datetime="2016-03-23T15:26:37.000Z" itemprop="datePublished" class="post-time">
  2016-03-23 23:26:37
</time>

        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/HTML5/">HTML5</a></li></ul>



    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/2016/03/23/JavaScript函数和对象/">JavaScript函数和对象</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent" >

    
        <h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><h3 id="定义函数"><a href="#定义函数" class="headerlink" title="定义函数"></a>定义函数</h3><ul>
<li>创建一个函数需要用到关键字function，后面是一个函数名</li>
<li>为函数提供0或多个参数，使用参数向函数传值</li>
<li>可以返回一个值作为调用这个函数的结果，这是可选的</li>
<li>编写函数体，包含完成函数工作的所有代码</li>
</ul>
<p>JavaScript有两种方式定义函数，第一种方式如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x,y</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> x + y;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>注意，函数体内部的语句在执行时，一旦执行到return时，函数就执行完毕，并将结果返回。因此，函数内部通过运算可以实现非常复杂的逻辑。如果没有return语句，函数执行完毕后也会返回结果，只是结果为undefined。</p>
<p>由于JavaScript函数也是一个对象，上述定义的add()函数实际上是一个函数对象，而函数名add可以视为指向该函数的变量。<br>因此，第二种定义函数的方式如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> add = <span class="function"><span class="keyword">function</span> (<span class="params">x,y</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> x + y;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>这种方式下，<code>function{....}</code>是一个匿名函数，它没有函数名，但是这个匿名函数赋值给了变量add，所有通过变量add就可以调用该函数。</p>
<p>上述两种定义是等价的，注意第二种方式按照完整语法需要在末尾加一个；号，表示赋值语句结束。</p>
<blockquote>
<p>函数声明可以出现在脚本中的任何位置。使用多个外部JavaScript文件时有一点要记住，如果不同文件中有两个同名的函数，将使用浏览器最后看到的那个函数。</p>
</blockquote>
<h3 id="调用函数"><a href="#调用函数" class="headerlink" title="调用函数"></a>调用函数</h3><p>调用函数时，按顺序传入参数即可：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> sum = add(<span class="number">1</span>,<span class="number">2</span>); <span class="comment">//返回3</span></div></pre></td></tr></table></figure>
<p>由于JavaScript允许任意参数而不影响调用，因此传入的参数比定义的参数多也没有问题，虽然函数内部并不需要这些参数：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> sum = add(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>); <span class="comment">//返回3</span></div></pre></td></tr></table></figure>
<p>传入的参数比定义的少也没有问题：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> sum = add(); <span class="comment">//返回NaN</span></div></pre></td></tr></table></figure></p>
<p>此时，add的参数将受到undefined，计算结果为NaN</p>
<h2 id="变量作用域"><a href="#变量作用域" class="headerlink" title="变量作用域"></a>变量作用域</h2><h3 id="全局变量"><a href="#全局变量" class="headerlink" title="全局变量"></a>全局变量</h3><p>如果一个变量在函数外声明，这个变量就是全局变量。可以在JavaScript代码中的任何地方访问。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> x = <span class="number">3</span>; <span class="comment">//全局变量</span></div><div class="line"><span class="keyword">var</span> y = <span class="number">4</span>;</div><div class="line"><span class="keyword">var</span> add = <span class="function"><span class="keyword">function</span> (<span class="params">x,y</span>) </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> z = <span class="number">4</span>; <span class="comment">//局部变量</span></div><div class="line"></div><div class="line">    <span class="keyword">return</span> x + y + z;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="局部变量"><a href="#局部变量" class="headerlink" title="局部变量"></a>局部变量</h3><p>如果一个变量在函数内声明，这个变量就是局部变量。只能在函数体内部使用。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> x = <span class="number">3</span>; <span class="comment">//全局变量</span></div><div class="line"><span class="keyword">var</span> y = <span class="number">4</span>;</div><div class="line"><span class="keyword">var</span> add = <span class="function"><span class="keyword">function</span> (<span class="params">x,y</span>) </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> z = <span class="number">4</span>; <span class="comment">//局部变量</span></div><div class="line"></div><div class="line">    <span class="keyword">return</span> x + y + z;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="变量提升"><a href="#变量提升" class="headerlink" title="变量提升"></a>变量提升</h3><p>JavaScript函数定义有个特点，它会先扫描整个函数体的语句，把所有声明的变量提升到函数顶部</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">'use strict'</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> x = <span class="string">"hello,"</span> + y;</div><div class="line">    alert(x);</div><div class="line">    y = <span class="string">"world"</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">foo();</div></pre></td></tr></table></figure>
<p>虽然是strict模式，但语句<code>var x = &quot;hello,&quot; + y</code>并不报错，原因是变量y在稍后说明了。但是alert显示hello，undefined，说明变量y的值为undefined。这正是因为JavaScript引擎自动提升了变量y的声明，但不会提升变量y的赋值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> y; <span class="comment">// 提升变量y的申明</span></div><div class="line">    <span class="keyword">var</span> x = <span class="string">'Hello, '</span> + y;</div><div class="line">    alert(x);</div><div class="line">    y = <span class="string">'Bob'</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>由于JavaScript的这一特性，我们在函数内部定义变量时，请严格遵守“在函数内部首先声明所有变量”这一规则。最常见的做法是用一个var声明函数内部所用到的变量：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span></div><div class="line">        x = <span class="number">1</span>, <span class="comment">// x初始化为1</span></div><div class="line">        y = x + <span class="number">1</span>, <span class="comment">// y初始化为2</span></div><div class="line">        z, i; <span class="comment">// z和i为undefined</span></div><div class="line">    <span class="comment">// 其他语句:</span></div><div class="line">    <span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;<span class="number">100</span>; i++) &#123;</div><div class="line">        ...</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h2><h3 id="普通创建对象"><a href="#普通创建对象" class="headerlink" title="普通创建对象"></a>普通创建对象</h3><h4 id="创建对象"><a href="#创建对象" class="headerlink" title="创建对象"></a>创建对象</h4><p>已经有了一个包含一些属性的对象。如何使用JavaScript创建这个对象呢？方法如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> fido = &#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">"Fido"</span>;</div><div class="line">    weight: <span class="number">40</span>;</div><div class="line">    breed: <span class="string">"Mixed"</span>;</div><div class="line">    loves: [<span class="string">"walks"</span>,<span class="string">"fetching balls"</span>]</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="访问和操作对象"><a href="#访问和操作对象" class="headerlink" title="访问和操作对象"></a>访问和操作对象</h4><ul>
<li>使用“点”记法访问对象属性</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (fido.weight &gt; <span class="number">25</span>) &#123;</div><div class="line">    alert(<span class="string">"Wonderful"</span>);</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    alert(<span class="string">"keep moving"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>使用一个串结合[]记法访问属性</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> breed = fido[<span class="string">"breed"</span>];</div><div class="line"><span class="keyword">if</span> (breed == <span class="string">"mixed"</span>) &#123;</div><div class="line">    alert(<span class="string">"Best in show"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>改变属性的值</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">fido.weight = <span class="number">27</span>; <span class="comment">//改变Fido的重量</span></div><div class="line">fido.loves.push(<span class="string">"chewing bones"</span>); <span class="comment">//向它的loves数组增加一个新元素</span></div></pre></td></tr></table></figure>
<ul>
<li>枚举对象的所有属性</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> prop;</div><div class="line"><span class="keyword">for</span>(prop <span class="keyword">in</span> fido) &#123;</div><div class="line">    alert(<span class="string">"Fido has a"</span> + prop + <span class="string">" property"</span>); <span class="comment">//每次循环迭代时，变量prop会得到下一个属性名的相应串值</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>处理对象的数组</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> likes = fido.loves;</div><div class="line"><span class="keyword">var</span> likesStr = <span class="string">"Fido likes"</span>;</div><div class="line"></div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; likes.length; i++) &#123;</div><div class="line">    likesStr += <span class="string">" "</span> + likes[i];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>向函数传入一个对象</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">bark</span>(<span class="params">dog</span>) </span>&#123;</div><div class="line">    dog.weight = <span class="number">28</span>; <span class="comment">//会同时改变fido中的值</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">bark(fido);</div></pre></td></tr></table></figure>
<p>注意：将一个对象赋值给变量时，这个变量会包含这个对象的一个引用，而不是对象的副本，可以把引用想成是对象的一个指针。所有对该变量中属性的改变都会改变原对象的属性。</p>
<p>上述代码中，改变dog对象的weight属性时，实际上是修改的原对象fido的属性，而不是副本，所有不仅函数体内的dog对象发生了改变，函数体外的fido对象也发生了改变。</p>
<h4 id="给对象增加方法"><a href="#给对象增加方法" class="headerlink" title="给对象增加方法"></a>给对象增加方法</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> fido = &#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">"Fido"</span>;</div><div class="line">    weight: <span class="number">40</span>;</div><div class="line">    breed: <span class="string">"Mixed"</span>;</div><div class="line">    loves: [<span class="string">"walks"</span>,<span class="string">"fetching balls"</span>]</div><div class="line"></div><div class="line">    bark: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        alert(<span class="string">"Woof Woof"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">fido.bark(); <span class="comment">//调用方法</span></div></pre></td></tr></table></figure>
<h3 id="构造函数创建对象"><a href="#构造函数创建对象" class="headerlink" title="构造函数创建对象"></a>构造函数创建对象</h3><h4 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Dog</span>(<span class="params">name,breed,weight</span>) </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">this</span>.name = name;</div><div class="line">    <span class="keyword">this</span>.breed = breed;</div><div class="line">    <span class="keyword">this</span>.weight = weight;</div><div class="line"></div><div class="line">    <span class="keyword">this</span>.bark = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.weight) &#123;</div><div class="line">            alert(<span class="keyword">this</span>.name + <span class="string">" say Woof!"</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">注意这个语法和对象的语法有所不同。这些是语句，所有需要一个“;”结束各语句。<span class="keyword">this</span>用于指示对象中的属性，它就代表了新创建的实例对象。</div></pre></td></tr></table></figure>
<h4 id="创建对象-1"><a href="#创建对象-1" class="headerlink" title="创建对象"></a>创建对象</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> fido = <span class="keyword">new</span> Dog(<span class="string">"Fido"</span>,<span class="string">"Mixed"</span>,<span class="number">38</span>); <span class="comment">//new关键字创建一个对象</span></div><div class="line"><span class="keyword">var</span> tiny = <span class="keyword">new</span> Dog(<span class="string">"Tiny"</span>,<span class="string">"Chawalla"</span>,<span class="number">18</span>);</div><div class="line"></div><div class="line">fido.bark();</div><div class="line">tiny.bark();</div></pre></td></tr></table></figure>
<h3 id="prototype属性创建对象"><a href="#prototype属性创建对象" class="headerlink" title="prototype属性创建对象"></a>prototype属性创建对象</h3><p>prototype属性包含一个对象，所有实例对象需要共享的属性和方法，都放在这个对象里面；那些不需要共享的属性和方法，就放在构造函数里面。</p>
<p>实例对象一旦创建，将自动引用prototype对象的属性和方法。也就是说，实例对象的属性和方法分为两种，一种是本地的，一种是引用的：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">　　<span class="function"><span class="keyword">function</span> <span class="title">DOG</span>(<span class="params">name</span>)</span>&#123;</div><div class="line">　　　　<span class="keyword">this</span>.name = name;</div><div class="line">　　&#125;</div><div class="line">　　DOG.prototype = &#123; <span class="attr">species</span> : <span class="string">'犬科'</span> &#125;;</div><div class="line"></div><div class="line">　　<span class="keyword">var</span> dogA = <span class="keyword">new</span> DOG(<span class="string">'大毛'</span>);</div><div class="line">　　<span class="keyword">var</span> dogB = <span class="keyword">new</span> DOG(<span class="string">'二毛'</span>);</div><div class="line"></div><div class="line">　　alert(dogA.species); <span class="comment">// 犬科</span></div><div class="line">　　alert(dogB.species); <span class="comment">// 犬科</span></div></pre></td></tr></table></figure>
<p>现在，species属性放在prototype对象中，两个实例对象共享的，只要修改了prototype对象，就会同时影响到两个实例对象。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">　　DOG.prototype.species = <span class="string">'猫科'</span>;</div><div class="line"></div><div class="line">　　alert(dogA.species); <span class="comment">// 猫科</span></div><div class="line">　　alert(dogB.species); <span class="comment">// 猫科</span></div></pre></td></tr></table></figure>
<p>综上所述，由于所有实例对象共享同一个prototype对象，那么凶外界看起来，prototype对象就好像是实例对象的原型，而实例对象则好像继承了prototype对象一样。</p>
<h2 id="window对象"><a href="#window对象" class="headerlink" title="window对象"></a>window对象</h2><p>window对象表示你的JavaScript程序的全局环境，同时还表示应用的主窗口，因此，包含很多核心的属性和方法，主要有：</p>
<table>
<thead>
<tr>
<th>windwo</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>location</td>
<td>属性</td>
<td>包含页面的URL</td>
</tr>
<tr>
<td>status</td>
<td>属性</td>
<td>包含将在浏览器状态区显示一个字符串</td>
</tr>
<tr>
<td>onload</td>
<td>属性</td>
<td>页面完全加载后调用的函数</td>
</tr>
<tr>
<td>document</td>
<td>属性</td>
<td>包含DOM</td>
</tr>
<tr>
<td>—-</td>
<td>—-</td>
</tr>
<tr>
<td>alert</td>
<td>方法</td>
<td>显示一个提醒</td>
</tr>
<tr>
<td>prompt</td>
<td>方法</td>
<td>类似于alert，不过会从用户的到信息</td>
</tr>
<tr>
<td>open</td>
<td>方法</td>
<td>打开一个新的浏览器窗口</td>
</tr>
<tr>
<td>close</td>
<td>方法</td>
<td>关闭窗口</td>
</tr>
<tr>
<td>setTimeout</td>
<td>方法</td>
<td>指定的时间间隔后调用一个处理程序</td>
</tr>
<tr>
<td>setInterval</td>
<td>方法</td>
<td>以一个指定间隔反复调用一个处理程序</td>
</tr>
</tbody>
</table>
<p>window是个全局对象，所有即使没有在前面加上window，window的属性或方法名也能顺利解析。</p>
<h2 id="document对象"><a href="#document对象" class="headerlink" title="document对象"></a>document对象</h2><p>document实际上是window对象的一个属性，主要用于访问DOM。</p>
<h2 id="元素对象"><a href="#元素对象" class="headerlink" title="元素对象"></a>元素对象</h2><p>元素对象就是通过getElementById方法返回的对象。</p>
<h2 id="结尾"><a href="#结尾" class="headerlink" title="结尾"></a>结尾</h2><p>window.onload = init();表示希望调用函数init<br>window.onload = init; 表示把init这个函数值赋给onload属性。</p>

    

        <a href="/2016/03/23/JavaScript函数和对象/" class="post-more waves-effect waves-button">
            阅读全文...
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HTML5/">HTML5</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-JavaScript事件处理"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time datetime="2016-03-22T15:18:46.000Z" itemprop="datePublished" class="post-time">
  2016-03-22 23:18:46
</time>

        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/HTML5/">HTML5</a></li></ul>



    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/2016/03/22/JavaScript事件处理/">JavaScript事件处理</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent" >

    
        <p>了解了JavaScript的基础知识后，开始处理HTML5与用户的交互。如果页面能响应用户的输入，它们就不再知识文档，而是有生命的、有反应的应用了。</p>
<p>接下来我们开始学习JavaScript事件处理，这里通过一个添加音乐播放列表示例来描述JavaScript与用户的交互过程。效果图如下：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1014339-6a5924b3f4714fd2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="效果.png"></p>
<p>添加一首音乐到列表的步骤主要有四步：</p>
<h2 id="创建HTML页面"><a href="#创建HTML页面" class="headerlink" title="创建HTML页面"></a><strong>创建HTML页面</strong></h2><p>playlist.html<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE HTML&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>iTunes<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"playlist.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!--播放列表的样式表--&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"playlist.css"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">form</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!--</span></div><div class="line">            type:控件类型</div><div class="line">            id:</div><div class="line">            placeholder:显示一个例子，指示这个输入域中要输入什么</div><div class="line">    --&gt;</div><div class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span> = <span class="string">"songTextInput"</span> <span class="attr">size</span> = <span class="string">"40"</span> <span class="attr">placeholder</span>=<span class="string">"Song name"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">id</span>=<span class="string">"addButton"</span> <span class="attr">value</span>=<span class="string">"Add song"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!--ul是一个列表--&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"playlist"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>样式playlist.css代码为</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* playlist.css */</span></div><div class="line"></div><div class="line"><span class="selector-tag">body</span> &#123;</div><div class="line">	<span class="attribute">font-family</span>: arial, sans-serif;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-tag">ul</span><span class="selector-id">#playlist</span> &#123;</div><div class="line">	<span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#a9a9a9</span>;</div><div class="line">	<span class="attribute">-webkit-border-radius</span>: <span class="number">5px</span>;</div><div class="line">	<span class="attribute">-moz-border-radius</span>: <span class="number">5px</span>;</div><div class="line">	<span class="attribute">border-radius</span>: <span class="number">5px</span>;</div><div class="line">	<span class="attribute">margin-top</span>: <span class="number">10px</span>;</div><div class="line">	<span class="attribute">padding</span>: <span class="number">0px</span>;</div><div class="line">	<span class="attribute">list-style-type</span>: none;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-tag">ul</span><span class="selector-id">#playlist</span> <span class="selector-tag">li</span> &#123;</div><div class="line">	<span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#a9a9a9</span>;</div><div class="line">	<span class="attribute">padding</span>: <span class="number">10px</span>;</div><div class="line">	<span class="attribute">background-image</span>: <span class="built_in">-webkit-gradient</span>(linear, left top, left bottom, from(#f9f9f9), <span class="built_in">to</span>(#e3e3e3));</div><div class="line">    <span class="attribute">background-image</span>: <span class="built_in">-moz-linear-gradient</span>(#f9f9f9, #e3e3e3);</div><div class="line">    <span class="attribute">background-image</span>: <span class="built_in">-ms-linear-gradient</span>(#f9f9f9, #e3e3e3);</div><div class="line">    <span class="attribute">background-image</span>: <span class="built_in">-o-linear-gradient</span>(#f9f9f9, #e3e3e3);</div><div class="line">    <span class="attribute">background-image</span>: <span class="built_in">-webkit-linear-gradient</span>(#f9f9f9, #e3e3e3);</div><div class="line">    <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(#f9f9f9, #e3e3e3);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-tag">ul</span><span class="selector-id">#playlist</span> <span class="selector-tag">li</span><span class="selector-pseudo">:last-child</span> &#123;</div><div class="line">	<span class="attribute">-webkit-border-bottom-right-radius</span>: <span class="number">5px</span>;</div><div class="line">	<span class="attribute">-webkit-border-bottom-left-radius</span>: <span class="number">5px</span>;</div><div class="line">	<span class="attribute">-moz-border-radius-bottomright</span>: <span class="number">5px</span>;</div><div class="line">	<span class="attribute">-moz-border-radius-bottomleft</span>: <span class="number">5px</span>;</div><div class="line">	<span class="attribute">border-bottom</span>: none;</div><div class="line">	<span class="attribute">border-bottom-right-radius</span>: <span class="number">5px</span>;</div><div class="line">	<span class="attribute">border-bottom-left-radius</span>: <span class="number">5px</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-tag">ul</span><span class="selector-id">#playlist</span> <span class="selector-tag">li</span><span class="selector-pseudo">:first-child</span> &#123;</div><div class="line">	<span class="attribute">-webkit-border-top-right-radius</span>: <span class="number">5px</span>;</div><div class="line">	<span class="attribute">-webkit-border-top-left-radius</span>: <span class="number">5px</span>;</div><div class="line">	<span class="attribute">-moz-border-radius-topright</span>: <span class="number">5px</span>;</div><div class="line">	<span class="attribute">-moz-border-radius-topleft</span>: <span class="number">5px</span>;</div><div class="line">	<span class="attribute">border-top-right-radius</span>: <span class="number">5px</span>;</div><div class="line">	<span class="attribute">border-top-left-radius</span>: <span class="number">5px</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>如上述代码，head头里面加载了一个JavaScript文件playlist.js和一个播放列表样式playlist.css，body体里面包含一个form表单和一个ul列表，其中form表单包含一个文本类型和按钮类型的控件。</p>
<h2 id="处理点击事件"><a href="#处理点击事件" class="headerlink" title="处理点击事件"></a><strong>处理点击事件</strong></h2><p>处理点击事件的步骤：</p>
<ul>
<li>1.获取id为addButton控件的元素</li>
<li>2.为该元素关联点击事件</li>
<li>3.实现点击事件</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">window</span>.onload = init;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params"></span>) </span>&#123;</div><div class="line"></div><div class="line">	<span class="comment">//1</span></div><div class="line">    <span class="keyword">var</span> button = <span class="built_in">document</span>.getElementById(<span class="string">'addButton'</span>);</div><div class="line">    <span class="xml"><span class="comment">&lt;!--设置点击事件--&gt;</span></span></div><div class="line">	//2</div><div class="line">    button.onclick = handleButtonClick;</div><div class="line">&#125;</div><div class="line"></div><div class="line">//3</div><div class="line">function handleButtonClick() &#123;</div><div class="line"></div><div class="line">    alert("Button was clicked!");</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="获得歌曲名"><a href="#获得歌曲名" class="headerlink" title="获得歌曲名"></a><strong>获得歌曲名</strong></h2><p>步骤:</p>
<ul>
<li>1.获得id为songTextInput的元素</li>
<li>2.获得该元素的值</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">window</span>.onload = init;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params"></span>) </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> button = <span class="built_in">document</span>.getElementById(<span class="string">'addButton'</span>);</div><div class="line">    <span class="xml"><span class="comment">&lt;!--设置点击事件--&gt;</span></span></div><div class="line">    button.onclick = handleButtonClick;</div><div class="line">//    loadPlaylist();</div><div class="line">&#125;</div><div class="line"></div><div class="line">function handleButtonClick() &#123;</div><div class="line">	//1.</div><div class="line">    var textInput = document.getElementById('songTextInput');</div><div class="line">	//2.</div><div class="line">    var songname = textInput.value;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="添加歌曲到列表"><a href="#添加歌曲到列表" class="headerlink" title="添加歌曲到列表"></a><strong>添加歌曲到列表</strong></h2><p>步骤:</p>
<ul>
<li>1.创建一个新的<code>&lt;li&gt;</code>元素</li>
<li>2.将新元素的内容设置为歌曲名</li>
<li>3.将新元素添加到id为playlist的列表</li>
</ul>
<p>playlist.js<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">window</span>.onload = init;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params"></span>) </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> button = <span class="built_in">document</span>.getElementById(<span class="string">'addButton'</span>);</div><div class="line">    <span class="xml"><span class="comment">&lt;!--设置点击事件--&gt;</span></span></div><div class="line">    button.onclick = handleButtonClick;</div><div class="line">&#125;</div><div class="line"></div><div class="line">function handleButtonClick() &#123;</div><div class="line"></div><div class="line">    var textInput = document.getElementById('songTextInput');</div><div class="line">    var songname = textInput.value;</div><div class="line">	//1</div><div class="line">    var li = document.createElement("li");</div><div class="line">	//2.</div><div class="line">    li.innerHTML = songname;</div><div class="line">	//3.</div><div class="line">    var ul = document.getElementById("playlist");</div><div class="line">    ul.appendChild(li);</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="持久保存歌曲列表"><a href="#持久保存歌曲列表" class="headerlink" title="持久保存歌曲列表"></a><strong>持久保存歌曲列表</strong></h2><p>持久保存就是讲歌曲列表保存在本地，当浏览器再次打开HTML5的页面时，就会加载本地的列表显示到页面。</p>
<p>首先，建立一个新文件，list_store.js,代码如下:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">//保存数据到本地</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">save</span>(<span class="params">item</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> playlistArray = getStoreArray(<span class="string">"playlist"</span>);</div><div class="line">    playlistArray.push(item);</div><div class="line">    localStorage.setItem(<span class="string">"playlist"</span>,<span class="built_in">JSON</span>.stringify(playlistArray));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//加载本地数据</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadPlaylist</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> playlistArray = getSavedSongs();</div><div class="line">    <span class="keyword">var</span> ul = <span class="built_in">document</span>.getElementById(<span class="string">'playlist'</span>);</div><div class="line">    <span class="keyword">if</span> (playlistArray != <span class="literal">null</span>) &#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; playlistArray.length;i++) &#123;</div><div class="line">            <span class="keyword">var</span> li = <span class="built_in">document</span>.createElement(<span class="string">"li"</span>);</div><div class="line">            li.innerHTML = playlistArray[i];</div><div class="line">            ul.appendChild(li);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getSavedSongs</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> getStoreArray(<span class="string">"playlist"</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getStoreArray</span>(<span class="params">key</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> playlistArray = localStorage.getItem(key);</div><div class="line">    <span class="keyword">if</span> (playlistArray == <span class="literal">null</span> || playlistArray == <span class="string">""</span>) &#123;</div><div class="line">        playlistArray = <span class="keyword">new</span> <span class="built_in">Array</span>();</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        playlistArray = <span class="built_in">JSON</span>.parse(playlistArray);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> playlistArray;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>然后在playlist.js中加入两行代码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">window</span>.onload = init;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params"></span>) </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> button = <span class="built_in">document</span>.getElementById(<span class="string">'addButton'</span>);</div><div class="line">    <span class="xml"><span class="comment">&lt;!--设置点击事件--&gt;</span></span></div><div class="line">    button.onclick = handleButtonClick;</div><div class="line">    loadPlaylist(); //加载数据</div><div class="line">&#125;</div><div class="line"></div><div class="line">function handleButtonClick() &#123;</div><div class="line"></div><div class="line">    var textInput = document.getElementById('songTextInput');</div><div class="line">    var songname = textInput.value;</div><div class="line"></div><div class="line">    var li = document.createElement("li");</div><div class="line">    li.innerHTML = songname;</div><div class="line"></div><div class="line">    var ul = document.getElementById("playlist");</div><div class="line">    ul.appendChild(li);</div><div class="line">    save(songname); //保存数据</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>最后，在HTML的head元素中增加一个指向list_store.js的引用，增加到playlist.js的上面</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"list_store.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"playlist.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>重新加载页面，输入一些歌曲。退出浏览器，再次打开浏览器，并加载这个页面，你会看到存储的所有歌曲都安全地出现在播放列表中。</p>

    

        <a href="/2016/03/22/JavaScript事件处理/" class="post-more waves-effect waves-button">
            阅读全文...
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HTML5/">HTML5</a></li></ul>

    </div>
    
</article>

        </li>
    
    </ul>

    
<nav id="page-nav">
    <div class="inner">
    <a class="extend prev" rel="prev" href="/page/5/">上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/7/">下一页</a>
    </div>
</nav>


</div>

  </main>
  <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: false }</script>



<div class="global-share" id="globalShare">
    <div class="tit">分享到：</div>
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://yoursite.com/page/6/&title=刘涤生 - 应尽便须尽&pic=http://yoursite.com/icon.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://yoursite.com/page/6/&title=刘涤生 - 应尽便须尽&source=像外行一样思考,像专家一样实践。" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://yoursite.com/page/6/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=刘涤生 - 应尽便须尽&url=http://yoursite.com/page/6/&via=http://yoursite.com" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://yoursite.com/page/6/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK4AAACuCAAAAACKZ2kyAAABx0lEQVR42u3awWrDMBAE0P7/T7fQU6F1MrOSlRSeTqZQ++UySLP6+IjX5/f6+fx4Xf1v8vcNCxcXd5mbfLh9/v3mq2/lBlxc3PPcPLxmmZP8jCjscHFx34zbhlESl7i4uP+dmxxv8k0SLi7u+3OToMkLkTzUbjyr4eLiLnBnhene59v7XVxc3E1TibY8zQuR4ddxcXGPcB+PQPIkSQ4tOf1JzOHi4t7MzcuLtgxd305dRhguLu5xbnLgyaOnvX7xJPJwcXGPcGfjzzyq2pFJdOEDFxf3CDe/etVuhtpNTBKFuLi4Z7iz0Wl9dBlNSYYDFVxc3GVuuzXJD0std0OPgouLu8xduRo1Q7fVyR8tDi4u7s3cXa+or1Dg4uK+MTfZWLSDlvzglB+ucHFxT3JnA4+2WBkOS5LCFBcX9wbubHwy28q078TFxX0tN68zZleshgMSXFzcl3LbeGqvWeQRNpzE4uLibuW2gdKWp7NiJR/r4uLi3sfNw2vlFkS7ScLFxX0HbltePGlhNx1+lmY7uLi4R7jD+x0rJelKkOHi4h7kJqmyvrm5DD5cXNyD3L0laTt0SaITFxf3JHdWmLbHmxaHi4v7Iu4XPdT8My0PxrMAAAAASUVORK5CYII=" alt="微信分享二维码">
</div>




  <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script src="/js/main.min.js?v=1.2.7"></script>



<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=1.2.7"></script>



<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" async src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>








</body>
</html>
