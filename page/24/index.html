<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>å†è¯»æ–‹</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="åƒå¤–è¡Œä¸€æ ·æ€è€ƒ,åƒä¸“å®¶ä¸€æ ·å®è·µã€‚">
<meta property="og:type" content="website">
<meta property="og:title" content="å†è¯»æ–‹">
<meta property="og:url" content="http://liuguoquan727.github.io/page/24/index.html">
<meta property="og:site_name" content="å†è¯»æ–‹">
<meta property="og:description" content="åƒå¤–è¡Œä¸€æ ·æ€è€ƒ,åƒä¸“å®¶ä¸€æ ·å®è·µã€‚">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="å†è¯»æ–‹">
<meta name="twitter:description" content="åƒå¤–è¡Œä¸€æ ·æ€è€ƒ,åƒä¸“å®¶ä¸€æ ·å®è·µã€‚">
  
    <link rel="alternate" href="/atom.xml" title="å†è¯»æ–‹" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    
    <div id="header-inner" class="inner">
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="æœç´¢"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://liuguoquan727.github.io"></form>
      </div>
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">é¦–é¡µ</a>
        
          <a class="main-nav-link" href="/archives">å½’æ¡£</a>
        
          <a class="main-nav-link" href="/categories">åˆ†ç±»</a>
        
          <a class="main-nav-link" href="/tags">æ ‡ç­¾</a>
        
          <a class="main-nav-link" href="/about">å…³äº</a>
        
      </nav>
      
    </div>
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">å†è¯»æ–‹</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">MICHAEL</a>
        </h2>
      
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-Javaé›†åˆä¹‹HashMap" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/19/Javaé›†åˆä¹‹HashMap/" class="article-date">
  <time datetime="2015-12-19T13:30:21.000Z" itemprop="datePublished">2015-12-19 21:30:21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Java/">Java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/19/Javaé›†åˆä¹‹HashMap/">Javaé›†åˆä¹‹HashMap</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h1 id="ç­¾åï¼ˆSignatureï¼‰"><a href="#ç­¾åï¼ˆSignatureï¼‰" class="headerlink" title="ç­¾åï¼ˆSignatureï¼‰"></a>ç­¾åï¼ˆSignatureï¼‰</h1><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HashMap</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;</span></div><div class="line">       <span class="keyword">extends</span> <span class="title">AbstractMap</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;</div><div class="line">       <span class="keyword">implements</span> <span class="title">Map</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;, <span class="title">Cloneable</span>, <span class="title">Serializable</span></div></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°HashMapå®ç°äº†ï¼š</p>
<ul>
<li>æ¥å£Cloneableï¼Œç”¨äºè¡¨æ˜HashMapå¯¹è±¡ä¼šé‡å†™<code>java.lang.Object.clone()</code>æ–¹æ³•ï¼ŒHashMapå®ç°çš„æ˜¯æµ…æ‹·è´</li>
<li>æ¥å£Serializableï¼šè¡¨æ˜HashMapå¯¹è±¡å¯ä»¥è¢«åºåˆ—åŒ–</li>
</ul>
<h1 id="Mapæ¥å£"><a href="#Mapæ¥å£" class="headerlink" title="Mapæ¥å£"></a>Mapæ¥å£</h1><p>Mapæ¥å£é‡ŒåŒ…å«çš„æˆå‘˜æ–¹æ³•ä¸å¤–ä¹æ˜¯â€œå¢åˆ æ”¹æŸ¥â€ï¼ŒMapè™½ç„¶å¹¶ä¸æ˜¯Collectionï¼Œä½†å®ƒæä¾›äº†ä¸‰ç§â€œé›†åˆè§†è§’â€ï¼Œä¸ä¸‹é¢ä¸‰ä¸ªæ–¹æ³•ä¸€ä¸€å¯¹åº”ï¼š</p>
<ul>
<li><code>Set&lt;key&gt; keySet()</code>ï¼Œæä¾›keyçš„é›†åˆè§†è§’</li>
<li><code>Collection&lt;V&gt; values()</code>ï¼Œæä¾›valueçš„é›†åˆè§†è§’</li>
<li><code>Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet()</code>,æä¾›key-valueé”®å€¼å¯¹çš„é›†åˆè§†è§’</li>
</ul>
<h1 id="è®¾è®¡ç†å¿µ"><a href="#è®¾è®¡ç†å¿µ" class="headerlink" title="è®¾è®¡ç†å¿µ"></a>è®¾è®¡ç†å¿µ</h1><h2 id="å“ˆå¸Œè¡¨ï¼ˆhash-tableï¼‰"><a href="#å“ˆå¸Œè¡¨ï¼ˆhash-tableï¼‰" class="headerlink" title="å“ˆå¸Œè¡¨ï¼ˆhash tableï¼‰"></a>å“ˆå¸Œè¡¨ï¼ˆhash tableï¼‰</h2><p>HashMapæ˜¯ä¸€ç§åŸºäºå“ˆå¸Œè¡¨å®ç°çš„Mapï¼Œå“ˆå¸Œè¡¨æ˜¯ä¸€ç§é€šç”¨çš„æ•°æ®ç»“æ„ï¼Œå…¶æ¦‚å¿µæ˜¯ï¼škeyç»è¿‡hashå‡½æ•°ä½œç”¨åå¾—åˆ°ä¸€ä¸ªæ§½ï¼ˆbucketsï¼‰çš„ç´¢å¼•ï¼ˆindexï¼‰ï¼Œæ§½ä¸­ä¿å­˜ç€æˆ‘ä»¬æƒ³è¦è·å–çš„å€¼ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/hashmap-%E5%93%88%E5%B8%8C%E8%A1%A8.png" alt="hash table"></p>
<blockquote>
<p>ä¸€äº›ä¸åŒçš„keyç»è¿‡åŒä¸€hashå‡½æ•°åå¯èƒ½äº§ç”Ÿç›¸åŒçš„ç´¢å¼•ï¼Œä¹Ÿå°±ä¼šäº§ç”Ÿå†²çªï¼Œæ‰€ä»¥åˆ©ç”¨å“ˆå¸Œè¡¨è¿™ç§æ•°æ®ç»“æ„å®ç°å…·ä½“ç±»æ—¶ï¼Œéœ€è¦æ³¨æ„ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>è®¾è®¡ä¸€ä¸ªå¥½çš„hashå‡½æ•°ï¼Œä½¿å†²çªå°½å¯èƒ½çš„å‡å°‘</li>
<li>éœ€è¦è§£å†³å‘ç”Ÿå†²çªåçš„å¤„ç†</li>
</ul>
</blockquote>
<h2 id="HashMapçš„ç‰¹ç‚¹"><a href="#HashMapçš„ç‰¹ç‚¹" class="headerlink" title="HashMapçš„ç‰¹ç‚¹"></a>HashMapçš„ç‰¹ç‚¹</h2><ul>
<li>çº¿ç¨‹éå®‰å…¨ï¼Œå¹¶ä¸”å…è®¸keyä¸valueéƒ½ä¸ºnullå€¼ï¼ŒHashTableä¸ä¹‹ç›¸åï¼Œä¸ºçº¿ç¨‹å®‰å…¨ï¼Œkeyä¸valueéƒ½ä¸å…è®¸nullå€¼</li>
<li>ä¸ä¿è¯å…¶å†…éƒ¨å…ƒç´ çš„é¡ºåºï¼Œè€Œä¸”éšç€æ—¶é—´çš„æ¨ç§»ï¼ŒåŒä¸€å…ƒç´ çš„ä½ç½®ä¹Ÿå¯èƒ½æ”¹å˜ï¼ˆresizeçš„æƒ…å†µï¼‰</li>
<li>putã€getæ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸ºOï¼ˆ1ï¼‰</li>
<li>éå†å…¶é›†åˆè§†è§’çš„æ—¶é—´å¤æ‚åº¦ä¸å…¶å®¹é‡å’Œç°æœ‰å…ƒç´ çš„å¤§å°æˆæ­£æ¯”ï¼Œå¦‚æœéå†çš„æ€§èƒ½è¦æ±‚å¾ˆé«˜ï¼Œä¸è¦æŠŠcapacityè®¾ç½®çš„è¿‡é«˜æˆ–è€…æŠŠå¹³è¡¡å› å­è®¾ç½®çš„è¿‡ä½ã€‚</li>
<li>ç”±äºHashMapæ˜¯çº¿ç¨‹éå®‰å…¨çš„ï¼Œæ„å‘³ç€å¦‚æœæœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹åŒä¸€HashMapè¯•å›¾åšè¿­ä»£æ—¶æœ‰ç»“æ„ä¸Šçš„æ”¹å˜ï¼ˆæ·»åŠ ã€åˆ é™¤entryï¼Œåªæ”¹å˜entryçš„valueå€¼ä¸ç®—ç»“æ„æ”¹å˜ï¼‰ï¼Œé‚£ä¹ˆä¼šæŠ¥ConcurrentModificationExceptionå¼‚å¸¸ï¼Œä¸“ä¸šæœ¯è¯­å«fail-fastï¼Œå°½æ—©æŠ¥é”™å¯¹åº”å¤šçº¿ç¨‹ç¨‹åºæ¥è¯´æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚</li>
<li><code>Map m = Collections.synchronizedMap(new HashMap(...))</code>;é€šè¿‡è¿™ç§æ–¹å¼å¯ä»¥å¾—åˆ°ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„Mapã€‚</li>
</ul>
<h1 id="å®ç°åŸç†"><a href="#å®ç°åŸç†" class="headerlink" title="å®ç°åŸç†"></a>å®ç°åŸç†</h1><h2 id="æ„é€ å‡½æ•°"><a href="#æ„é€ å‡½æ•°" class="headerlink" title="æ„é€ å‡½æ•°"></a>æ„é€ å‡½æ•°</h2><p>HashMapéµå¾ªé›†åˆæ¡†æ¶çš„çº¦æŸï¼Œæä¾›ä¸€ä¸ªå‚æ•°ä¸ºç©ºçš„æ„é€ å‡½æ•°ä¸æœ‰ä¸€ä¸ªå‚æ•°ä¸”å‚æ•°ç±»å‹ä¸ºMapçš„æ„é€ å‡½æ•°ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æä¾›äº†ä¸¤ä¸ªæ„é€ å‡½æ•°ï¼Œç”¨äºè®¾ç½®HashMapçš„å®¹é‡ï¼ˆcapacityï¼‰å’Œå¹³è¡¡å› å­ï¼ˆloadFactorï¼‰ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashMap</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">this</span>(DEFAULT_INITIAL_CAPACITY, DEFAULT_LOAD_FACTOR);</div><div class="line">&#125;</div><div class="line">	</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashMap</span><span class="params">(Map&lt;? extends K, ? extends V&gt; m)</span> </span>&#123;</div><div class="line">	<span class="keyword">this</span>(Math.max((<span class="keyword">int</span>) (m.size() / DEFAULT_LOAD_FACTOR) + <span class="number">1</span>,</div><div class="line">				  DEFAULT_INITIAL_CAPACITY), DEFAULT_LOAD_FACTOR);</div><div class="line">	inflateTable(threshold);</div><div class="line"></div><div class="line">	putAllForCreate(m);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashMap</span><span class="params">(<span class="keyword">int</span> initialCapacity)</span> </span>&#123;</div><div class="line">	<span class="keyword">this</span>(initialCapacity, DEFAULT_LOAD_FACTOR);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashMap</span><span class="params">(<span class="keyword">int</span> initialCapacity, <span class="keyword">float</span> loadFactor)</span> </span>&#123;</div><div class="line">	<span class="comment">//åˆå§‹å®¹é‡å’ŒåŠ è½½å› å­åˆæ³•æ ¡éªŒ</span></div><div class="line">	<span class="keyword">if</span> (initialCapacity &lt; <span class="number">0</span>)</div><div class="line">		<span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Illegal initial capacity: "</span> +</div><div class="line">										   initialCapacity);</div><div class="line">	<span class="keyword">if</span> (initialCapacity &gt; MAXIMUM_CAPACITY)</div><div class="line">		initialCapacity = MAXIMUM_CAPACITY;</div><div class="line">	<span class="keyword">if</span> (loadFactor &lt;= <span class="number">0</span> || Float.isNaN(loadFactor))</div><div class="line">		<span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Illegal load factor: "</span> +</div><div class="line">										   loadFactor);</div><div class="line"></div><div class="line">	<span class="keyword">this</span>.loadFactor = loadFactor;</div><div class="line">	threshold = initialCapacity;</div><div class="line">	init();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å®¹é‡ä¸å¹³è¡¡å› å­éƒ½æœ‰ä¸ªé»˜è®¤å€¼ï¼Œå¹¶ä¸”å®¹é‡æœ‰ä¸ªæœ€å¤§å€¼</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * é»˜è®¤åˆå§‹å®¹é‡ä¸º16ï¼Œå¿…é¡»ä¸º2çš„æŒ‡æ•°å€</div><div class="line"> */</div><div class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEFAULT_INITIAL_CAPACITY = <span class="number">1</span> &lt;&lt; <span class="number">4</span>; <span class="comment">// aka 16</span></div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * æœ€å¤§å®¹é‡ä¸º2çš„30æ¬¡æ–¹</div><div class="line"> */</div><div class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MAXIMUM_CAPACITY = <span class="number">1</span> &lt;&lt; <span class="number">30</span>;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * é»˜è®¤åŠ è½½å› å­ä¸º0.75f</div><div class="line"> */</div><div class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">float</span> DEFAULT_LOAD_FACTOR = <span class="number">0.75f</span>;</div><div class="line"></div><div class="line">    <span class="comment">// Entryæ•°ç»„ï¼Œé•¿åº¦å¿…é¡»ä¸º2çš„næ¬¡å¹‚</span></div><div class="line">    <span class="keyword">transient</span> Entry[] table;</div><div class="line"></div><div class="line">	<span class="comment">// å·²å­˜å‚¨å…ƒç´ çš„æ•°é‡</span></div><div class="line">	<span class="keyword">transient</span> <span class="keyword">int</span> size ;</div><div class="line"></div><div class="line">	<span class="comment">// ä¸‹æ¬¡æ‰©å®¹çš„ä¸´ç•Œå€¼ï¼Œsize&gt;=thresholdå°±ä¼šæ‰©å®¹ï¼Œthresholdç­‰äºcapacity*load factor</span></div><div class="line">	<span class="keyword">int</span> threshold;</div><div class="line"></div><div class="line">	<span class="comment">// åŠ è½½å› å­</span></div><div class="line">	<span class="keyword">final</span> <span class="keyword">float</span> loadFactor ;</div></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œé»˜è®¤çš„å¹³è¡¡å› å­ä¸º0.75ï¼Œè¿™æ˜¯æƒè¡¡äº†æ—¶é—´å¤æ‚åº¦ä¸ç©ºé—´å¤æ‚åº¦ä¹‹åçš„æœ€å¥½å–å€¼ï¼ˆå®˜æ–¹è¯´æ³•ï¼‰ï¼Œè¿‡é«˜çš„å› å­ä¼šé™ä½å­˜å‚¨ç©ºé—´ä½†æ˜¯æŸ¥æ‰¾çš„æ—¶é—´å°±ä¼šå¢åŠ ã€‚</p>
<p>æ­¤å¤–ï¼Œæˆ‘ä»¬æ³¨æ„åˆ°å®¹é‡å¿…é¡»ä¸º2çš„æŒ‡æ•°è¢«ï¼ˆé»˜è®¤16ï¼‰ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿè§£ç­”è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦äº†è§£HashMapä¸­å“ˆå¸Œå‡½æ•°çš„è®¾è®¡åŸç†</p>
<h2 id="å“ˆå¸Œå‡½æ•°çš„è®¾è®¡åŸç†"><a href="#å“ˆå¸Œå‡½æ•°çš„è®¾è®¡åŸç†" class="headerlink" title="å“ˆå¸Œå‡½æ•°çš„è®¾è®¡åŸç†"></a>å“ˆå¸Œå‡½æ•°çš„è®¾è®¡åŸç†</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">final</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(Object k)</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> h = hashSeed;</div><div class="line">	<span class="keyword">if</span> (<span class="number">0</span> != h &amp;&amp; k <span class="keyword">instanceof</span> String) &#123;</div><div class="line">		<span class="keyword">return</span> sun.misc.Hashing.stringHash32((String) k);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	h ^= k.hashCode();</div><div class="line"></div><div class="line">	<span class="comment">// This function ensures that hashCodes that differ only by</span></div><div class="line">	<span class="comment">// constant multiples at each bit position have a bounded</span></div><div class="line">	<span class="comment">// number of collisions (approximately 8 at default load factor).</span></div><div class="line">	h ^= (h &gt;&gt;&gt; <span class="number">20</span>) ^ (h &gt;&gt;&gt; <span class="number">12</span>);</div><div class="line">	<span class="keyword">return</span> h ^ (h &gt;&gt;&gt; <span class="number">7</span>) ^ (h &gt;&gt;&gt; <span class="number">4</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * Returns index for hash code h.</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">indexFor</span><span class="params">(<span class="keyword">int</span> h, <span class="keyword">int</span> length)</span> </span>&#123;</div><div class="line">	<span class="comment">// assert Integer.bitCount(length) == 1 : "length must be a non-zero power of 2";</span></div><div class="line">	<span class="keyword">return</span> h &amp; (length-<span class="number">1</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨å“ˆå¸Œè¡¨å®¹é‡ä¸ºlengthçš„æƒ…å†µä¸‹ï¼Œä¸ºäº†ä½¿keyéƒ½èƒ½åœ¨å†²çªæœ€å°çš„æƒ…å†µä¸‹æ˜ å°„åˆ°[0,length)çš„ç´¢å¼•ï¼ˆindexï¼‰å†…ï¼ŒHasMapè®©lengthä¸º2çš„æŒ‡æ•°å€ï¼Œç„¶åç”¨`hashCode(key) &amp; (length -1)çš„æ–¹æ³•å¾—åˆ°ç´¢å¼•ã€‚</p>
<blockquote>
<p>å› ä¸ºlengthä¸º2çš„æŒ‡æ•°å€ï¼Œæ‰€ä»¥length-1æ‰€å¯¹åº”çš„äºŒè¿›åˆ¶ä½éƒ½ä¸º1ï¼Œç„¶åä¸hashCode(key)åä¸è¿ç®—ï¼Œå³å¯å¾—åˆ°[0,length)å†…çš„ç´¢å¼•ã€‚</p>
</blockquote>
<p>ä½†æ˜¯è¿™é‡Œæœ‰ä¸ªé—®é¢˜ï¼Œå¦‚æœHashCodeï¼ˆkey)çš„å€¼å¤§äºlengthçš„å€¼ï¼Œä¸¾ä¸ªä¾‹å­ï¼š</p>
<blockquote>
<p>Javaä¸­å¯¹è±¡çš„å“ˆå¸Œå€¼éƒ½æ˜¯32ä½æ•´æ•°ï¼Œè€ŒHashMapçš„é»˜è®¤å¤§å°ä¸º16ï¼Œé‚£ä¹ˆå¦‚æœæœ‰ä¸¤ä¸ªå¯¹è±¡çš„å“ˆå¸Œå€¼ä¸ºï¼š0xABAB0000ä¸0xBABA0000ï¼Œå®ƒä»¬çš„åå››ä½éƒ½æ˜¯ä¸€æ ·ï¼Œé‚£ä¹ˆä¸16å¼‚æˆ–åå¾—åˆ°ç»“æœéƒ½æ˜¯ä¸€æ ·çš„ä¸º0ï¼Œä¹Ÿå°±æ˜¯äº§ç”Ÿäº†å†²çªã€‚</p>
</blockquote>
<p>é€ æˆå†²çªçš„åŸå› å…³é”®åœ¨äº16é™åˆ¶äº†åªèƒ½ç”¨ä½ä½æ¥è®¡ç®—ï¼Œé«˜ä½ç›´æ¥èˆå¼ƒäº†ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é¢å¤–çš„å“ˆå¸Œå‡½æ•°è€Œä¸åªæ˜¯ç®€å•çš„å¯¹è±¡çš„hashCodeæ–¹æ³•äº†ã€‚å…·ä½“æ¥è¯´å°±æ˜¯HashMapä¸­hashï¼ˆï¼‰å‡½æ•°æ‰€å®ç°çš„åŠŸèƒ½äº†ã€‚</p>
<blockquote>
<p>é¦–å…ˆæœ‰ä¸ªéšæœºçš„hashSeedæ¥é™ä½å†²çªå‘ç”Ÿçš„å‡ ç‡<br>ç„¶åå¦‚æœæ˜¯å­—ç¬¦ä¸²ã€‚åˆ™ç”¨äº†sun.misc.Hashing.stringHash32((String) k)æ¥è·å–ç´¢å¼•å€¼<br>æœ€åé€šè¿‡ä¸€ç³»åˆ—çš„æ— ç¬¦å·å³ç§»æ“ä½œï¼Œæ¥æŠŠé«˜ä½ä¸åœ°ä½è¿›è¡Œå¼‚æˆ–æ“ä½œï¼Œæ¥é™ä½å†²çªå‘ç”Ÿçš„å‡ ç‡ã€‚</p>
</blockquote>
<p>å³ç§»çš„åç§»é‡20,12,7æ˜¯æ€ä¹ˆæ¥çš„å‘¢ï¼Ÿå› ä¸ºJavaä¸­å¯¹è±¡çš„å“ˆå¸Œå€¼æ˜¯32ä½çš„ï¼Œæ‰€ä»¥è¿™å‡ ä¸ªæ•°åº”è¯¥å°±æ˜¯æŠŠé«˜ä½ä¸åœ°ä½åšå¼‚æˆ–è¿ç®—ï¼Œè‡³äºè¿™å‡ ä¸ªæ•°æ˜¯å¦‚ä½•é€‰å–çš„ï¼Œå°±ä¸æ¸…æ¥šäº†ã€‚</p>
<h2 id="HashMap-Entry"><a href="#HashMap-Entry" class="headerlink" title="HashMap.Entry"></a>HashMap.Entry</h2><p>HashMapä¸­å­˜æ”¾çš„æ˜¯HashMap.Entryå¯¹è±¡ï¼Œå®ƒç»§æ‰¿è‡ªMap.Entryï¼Œå…¶æ¯”è¾ƒé‡è¦çš„æ„é€ å‡½æ•°</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; <span class="keyword">implements</span> <span class="title">Map</span>.<span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span>&#123;</div><div class="line">	<span class="keyword">final</span> K key;</div><div class="line">	V value;</div><div class="line">	Entry&lt;K,V&gt; next; <span class="comment">//æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></div><div class="line">	<span class="keyword">int</span> hash;</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * Creates new entry.</div><div class="line">	 */</div><div class="line">	Entry(<span class="keyword">int</span> h, K k, V v, Entry&lt;K,V&gt; n) &#123;</div><div class="line">		value = v;</div><div class="line">		next = n;</div><div class="line">		key = k;</div><div class="line">		hash = h;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">final</span> K <span class="title">getKey</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> key;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">final</span> V <span class="title">getValue</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> value;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">final</span> V <span class="title">setValue</span><span class="params">(V newValue)</span> </span>&#123;</div><div class="line">		V oldValue = value;</div><div class="line">		value = newValue;</div><div class="line">		<span class="keyword">return</span> oldValue;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</div><div class="line">		<span class="keyword">if</span> (!(o <span class="keyword">instanceof</span> Map.Entry))</div><div class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">		Map.Entry e = (Map.Entry)o;</div><div class="line">		Object k1 = getKey();</div><div class="line">		Object k2 = e.getKey();</div><div class="line">		<span class="keyword">if</span> (k1 == k2 || (k1 != <span class="keyword">null</span> &amp;&amp; k1.equals(k2))) &#123;</div><div class="line">			Object v1 = getValue();</div><div class="line">			Object v2 = e.getValue();</div><div class="line">			<span class="keyword">if</span> (v1 == v2 || (v1 != <span class="keyword">null</span> &amp;&amp; v1.equals(v2)))</div><div class="line">				<span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="comment">//ç”¨keyçš„hashå€¼ä¸valueçš„hashå€¼ä¸è¿ç®—çš„ç»“æœä½œä¸ºEntryçš„hashå€¼</span></div><div class="line">		<span class="keyword">return</span> Objects.hashCode(getKey()) ^ Objects.hashCode(getValue());</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">final</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> getKey() + <span class="string">"="</span> + getValue();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * å½“å‘HashMapä¸­æ·»åŠ å…ƒç´ æ—¶è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œè¿™é‡Œæ²¡æœ‰å®ç°æ˜¯ä¾›å­ç±»å›è°ƒ</div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">recordAccess</span><span class="params">(HashMap&lt;K,V&gt; m)</span> </span>&#123;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * å½“ä»HashMapä¸­åˆ é™¤å…ƒç´ æ—¶è°ƒç”¨è¿™ä¸ªæ–¹æ³•</div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">recordRemoval</span><span class="params">(HashMap&lt;K,V&gt; m)</span> </span>&#123;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒEntryå®ç°äº†å•å‘é“¾è¡¨çš„åŠŸèƒ½ï¼Œç”¨nextæˆå‘˜å˜é‡æ¥çº§è”èµ·æ¥ã€‚ä¹Ÿå°±æ˜¯è¯´HashMapçš„åº•å±‚ç»“æ„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè€Œæ•°ç»„çš„å…ƒç´ æ˜¯ä¸€ä¸ªå•å‘é“¾è¡¨ã€‚</p>
<p>ä»‹ç»å®ŒEntryï¼Œä¸‹é¢ä»‹ç»ä¸€ä¸ªé‡è¦çš„æˆå‘˜å˜é‡</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">//HashMapå†…éƒ¨ç»´æŠ¤ä¸€ä¸ªæ•°ç»„ç±»å‹çš„<span class="keyword">Entry</span>å˜é‡tableï¼Œç”¨æ¥ä¿å­˜æ·»åŠ è¿›æ¥çš„<span class="keyword">Entry</span>å¯¹è±¡</div><div class="line">transient <span class="keyword">Entry</span>&lt;K,V&gt;[] table = (<span class="keyword">Entry</span>&lt;K,V&gt;[]) EMPTY_TABLE;</div></pre></td></tr></table></figure>
<p>Entryæ˜¯å•é“¾è¡¨ï¼Œæ€ä¹ˆè¿™é‡Œåˆéœ€è¦ä¸ªæ•°ç»„ç±»å‹çš„tablå‘¢ï¼Ÿå…¶å®è¿™æ˜¯è§£å†³å†²çªçš„ä¸€ä¸ªæ–¹å¼ï¼šé“¾åœ°å€æ³•ï¼ˆå¼€æ•£åˆ—æ³•ï¼‰ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/hashmap-%E9%93%BE%E5%9C%B0%E5%9D%80%E6%B3%95.gif" alt=""></p>
<p>å°±æ˜¯ç›¸åŒç´¢å¼•å€¼çš„Entryä¼šä»¥å•å‘é“¾è¡¨çš„å½¢å¼å­˜åœ¨ã€‚<br>HashMapé‡‡ç”¨å°†ç›¸åŒçš„æ•£åˆ—å€¼å­˜å‚¨åˆ°ä¸€ä¸ªé“¾è¡¨ä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨ä¸€ä¸ªé“¾è¡¨ä¸­çš„å…ƒç´ ä»–ä»¬çš„æ•£åˆ—å€¼ç»å¯¹æ˜¯ç›¸åŒçš„ã€‚</p>
<h2 id="putæ“ä½œ"><a href="#putæ“ä½œ" class="headerlink" title="putæ“ä½œ"></a>putæ“ä½œ</h2><p>å› ä¸ºputæ“ä½œæœ‰å¯èƒ½éœ€è¦å¯¹HashMapè¿›è¡Œresizeï¼Œæ‰€ä»¥å®ç°è¾ƒå¤æ‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">inflateTable</span><span class="params">(<span class="keyword">int</span> toSize)</span> </span>&#123;</div><div class="line">    <span class="comment">//è¾…åŠ©å‡½æ•°ï¼Œç”¨äºå¡«å……HashMapåˆ°æŒ‡å®šçš„capacity</span></div><div class="line">    <span class="comment">// Find a power of 2 &gt;= toSize</span></div><div class="line">    <span class="keyword">int</span> capacity = roundUpToPowerOf2(toSize);</div><div class="line">    <span class="comment">//thresholdä¸ºresizeçš„é˜ˆå€¼ï¼Œè¶…è¿‡åHashMapä¼šè¿›è¡Œresizeï¼Œå†…å®¹çš„entryä¼šè¿›è¡Œrehash</span></div><div class="line">    threshold = (<span class="keyword">int</span>) Math.min(capacity * loadFactor, MAXIMUM_CAPACITY + <span class="number">1</span>);</div><div class="line">    table = <span class="keyword">new</span> Entry[capacity];</div><div class="line">    initHashSeedAsNeeded(capacity);</div><div class="line">&#125;</div><div class="line"><span class="comment">/**</span></div><div class="line"> * Associates the specified value with the specified key in this map.</div><div class="line"> * If the map previously contained a mapping for the key, the old</div><div class="line"> * value is replaced.</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">public</span> V <span class="title">put</span><span class="params">(K key, V value)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (table == EMPTY_TABLE) &#123;</div><div class="line">        inflateTable(threshold);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (key == <span class="keyword">null</span>)</div><div class="line">        <span class="keyword">return</span> putForNullKey(value);</div><div class="line">		</div><div class="line">	<span class="comment">//ä½¿ç”¨keyçš„hashCodeè®¡ç®—keyå¯¹åº”çš„hashå€¼</span></div><div class="line">    <span class="keyword">int</span> hash = hash(key);</div><div class="line">	</div><div class="line">	<span class="comment">//é€šè¿‡keyçš„å“ˆå¸Œå€¼æŸ¥æ‰¾åœ¨æ•°ç»„ä¸­çš„indexä½ç½®</span></div><div class="line">    <span class="keyword">int</span> i = indexFor(hash, table.length);</div><div class="line">    <span class="comment">//è¿™é‡Œçš„å¾ªç¯æ˜¯å…³é”®</span></div><div class="line">    <span class="comment">//å½“æ–°å¢çš„keyæ‰€å¯¹åº”çš„ç´¢å¼•iï¼Œå¯¹åº”table[i]ä¸­å·²ç»æœ‰å€¼æ—¶ï¼Œè¿›å…¥å¾ªç¯ä½“</span></div><div class="line">	<span class="comment">//å–å‡ºæ•°ç»„indexä½ç½®çš„é“¾è¡¨ï¼Œéå†é“¾è¡¨æŸ¥çœ‹æ˜¯å¦å·²ç»å­˜åœ¨ç›¸åŒçš„key</span></div><div class="line">    <span class="keyword">for</span> (Entry&lt;K,V&gt; e = table[i]; e != <span class="keyword">null</span>; e = e.next) &#123;</div><div class="line">        Object k;</div><div class="line">        <span class="comment">//åˆ¤æ–­æ˜¯å¦å­˜åœ¨æœ¬æ¬¡æ’å…¥çš„keyï¼Œå¦‚æœå­˜åœ¨ç”¨æœ¬æ¬¡çš„valueæ›¿æ¢ä¹‹å‰oldValueï¼Œç›¸å½“äºupdateæ“ä½œ</span></div><div class="line">        <span class="comment">//å¹¶è¿”å›ä¹‹å‰çš„oldValue</span></div><div class="line">        <span class="keyword">if</span> (e.hash == hash &amp;&amp; ((k = e.key) == key || key.equals(k))) &#123;</div><div class="line">            V oldValue = e.value;</div><div class="line">            e.value = value;</div><div class="line">            e.recordAccess(<span class="keyword">this</span>);</div><div class="line">            <span class="keyword">return</span> oldValue;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//å¦‚æœæœ¬æ¬¡æ–°å¢keyä¹‹å‰ä¸å­˜åœ¨äºHashMapä¸­ï¼ŒmodCountåŠ 1ï¼Œè¯´æ˜ç»“æ„æ”¹å˜äº†</span></div><div class="line">    modCount++;</div><div class="line">	<span class="comment">//åœ¨æ•°ç»„iä½ç½®å¤„æ·»åŠ ä¸€ä¸ªæ–°çš„é“¾è¡¨èŠ‚ç‚¹</span></div><div class="line">    addEntry(hash, key, value, i);</div><div class="line">	<span class="comment">//æ²¡æœ‰ç›¸åŒkeyçš„æƒ…å†µï¼Œè¿”å›null</span></div><div class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">private</span> V <span class="title">putForNullKey</span><span class="params">(V value)</span> </span>&#123;</div><div class="line">	<span class="keyword">for</span> (Entry&lt;K,V&gt; e = table[<span class="number">0</span>]; e != <span class="keyword">null</span>; e = e.next) &#123;</div><div class="line">		<span class="keyword">if</span> (e.key == <span class="keyword">null</span>) &#123;</div><div class="line">			V oldValue = e.value;</div><div class="line">			e.value = value;</div><div class="line">			e.recordAccess(<span class="keyword">this</span>);</div><div class="line">			<span class="keyword">return</span> oldValue;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	modCount++;</div><div class="line">	addEntry(<span class="number">0</span>, <span class="keyword">null</span>, value, <span class="number">0</span>);</div><div class="line">	<span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">addEntry</span><span class="params">(<span class="keyword">int</span> hash, K key, V value, <span class="keyword">int</span> bucketIndex)</span> </span>&#123;</div><div class="line">    <span class="comment">//å¦‚æœå¢åŠ ä¸€ä¸ªå…ƒç´ ä¼šåï¼ŒHashMapçš„å¤§å°è¶…è¿‡é˜ˆå€¼ï¼Œéœ€è¦resize</span></div><div class="line">    <span class="keyword">if</span> ((size &gt;= threshold) &amp;&amp; (<span class="keyword">null</span> != table[bucketIndex])) &#123;</div><div class="line">        <span class="comment">//å¢åŠ çš„å¹…åº¦æ˜¯ä¹‹å‰çš„1å€</span></div><div class="line">        resize(<span class="number">2</span> * table.length);</div><div class="line">        hash = (<span class="keyword">null</span> != key) ? hash(key) : <span class="number">0</span>;</div><div class="line">        bucketIndex = indexFor(hash, table.length);</div><div class="line">    &#125;</div><div class="line">    createEntry(hash, key, value, bucketIndex);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">createEntry</span><span class="params">(<span class="keyword">int</span> hash, K key, V value, <span class="keyword">int</span> bucketIndex)</span> </span>&#123;</div><div class="line">    <span class="comment">//é¦–å…ˆå¾—åˆ°è¯¥ç´¢å¼•å¤„çš„å†²çªé“¾Entriesï¼Œç¬¬ä¸€æ¬¡æ’å…¥bucketIndexä½ç½®æ—¶å†²çªé“¾ä¸ºnullï¼Œä¹Ÿå°±æ˜¯eä¸ºnull</span></div><div class="line">    Entry&lt;K,V&gt; e = table[bucketIndex];</div><div class="line">    <span class="comment">//ç„¶åæŠŠæ–°çš„Entryæ·»åŠ åˆ°å†²çªé“¾çš„å¼€å¤´ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåæ’å…¥çš„åè€Œåœ¨å‰é¢ï¼ˆç¬¬ä¸€æ¬¡è¿˜çœŸæ²¡çœ‹æ˜ç™½ï¼‰</span></div><div class="line">    <span class="comment">//table[bucketIndex]ä¸ºæ–°åŠ å…¥çš„Entryï¼Œæ˜¯bucketIndexä½ç½®çš„å†²çªé“¾çš„ç¬¬ä¸€ä¸ªå…ƒç´ </span></div><div class="line">    table[bucketIndex] = <span class="keyword">new</span> Entry&lt;&gt;(hash, key, value, e);</div><div class="line">    size++;</div><div class="line">&#125;</div><div class="line"><span class="comment">//ä¸‹é¢çœ‹çœ‹HashMapæ˜¯å¦‚ä½•è¿›è¡Œresizeï¼Œåºå±±çœŸé¢ç›®å°±è¦æ­æ™“äº†ğŸ˜Š</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">resize</span><span class="params">(<span class="keyword">int</span> newCapacity)</span> </span>&#123;</div><div class="line">    Entry[] oldTable = table;</div><div class="line">    <span class="keyword">int</span> oldCapacity = oldTable.length;</div><div class="line">    <span class="comment">//å¦‚æœå·²ç»è¾¾åˆ°æœ€å¤§å®¹é‡ï¼Œé‚£ä¹ˆå°±ç›´æ¥è¿”å›</span></div><div class="line">    <span class="keyword">if</span> (oldCapacity == MAXIMUM_CAPACITY) &#123;</div><div class="line">        threshold = Integer.MAX_VALUE;</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">	<span class="comment">//ä½¿ç”¨æ–°çš„å®¹é‡åˆ›å»ºä¸€ä¸ªæ–°çš„é“¾è¡¨æ•°ç»„</span></div><div class="line">    Entry[] newTable = <span class="keyword">new</span> Entry[newCapacity];</div><div class="line">    <span class="comment">//initHashSeedAsNeeded(newCapacity)çš„è¿”å›å€¼å†³å®šäº†æ˜¯å¦éœ€è¦é‡æ–°è®¡ç®—Entryçš„hashå€¼</span></div><div class="line">	<span class="comment">//å°†å½“å‰æ•°ç»„çš„å…ƒç´ ç§»åŠ¨åˆ°æ–°çš„æ•°ç»„</span></div><div class="line">    transfer(newTable, initHashSeedAsNeeded(newCapacity));</div><div class="line">	<span class="comment">//å°†å½“å‰æ•°ç»„çš„å¼•ç”¨æŒ‡å‘æ–°çš„æ•°ç»„</span></div><div class="line">    table = newTable;</div><div class="line">	<span class="comment">//é‡æ–°è®¡ç®—ä¸´ç•Œå€¼</span></div><div class="line">    threshold = (<span class="keyword">int</span>)Math.min(newCapacity * loadFactor, MAXIMUM_CAPACITY + <span class="number">1</span>);</div><div class="line">&#125;</div><div class="line"><span class="comment">/**</span></div><div class="line"> * Transfers all entries from current table to newTable.</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">transfer</span><span class="params">(Entry[] newTable, <span class="keyword">boolean</span> rehash)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> newCapacity = newTable.length;</div><div class="line">    <span class="comment">//éå†å½“å‰çš„tableï¼Œå°†é‡Œé¢çš„å…ƒç´ æ·»åŠ åˆ°æ–°çš„newTableä¸­</span></div><div class="line">    <span class="keyword">for</span> (Entry&lt;K,V&gt; e : table) &#123;</div><div class="line">        <span class="keyword">while</span>(<span class="keyword">null</span> != e) &#123;</div><div class="line">            Entry&lt;K,V&gt; next = e.next;</div><div class="line">            <span class="keyword">if</span> (rehash) &#123;</div><div class="line">                e.hash = <span class="keyword">null</span> == e.key ? <span class="number">0</span> : hash(e.key);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">int</span> i = indexFor(e.hash, newCapacity);</div><div class="line">            e.next = newTable[i];</div><div class="line">            <span class="comment">//æœ€åè¿™ä¸¤å¥ç”¨äº†ä¸putæ”¾è¿‡ç›¸åŒçš„æŠ€å·§</span></div><div class="line">            <span class="comment">//å°†åæ’å…¥çš„åè€Œåœ¨å‰é¢</span></div><div class="line">            newTable[i] = e;</div><div class="line">            e = next;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">/**</span></div><div class="line"> * Initialize the hashing mask value. We defer initialization until we</div><div class="line"> * really need it.</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">final</span> <span class="keyword">boolean</span> <span class="title">initHashSeedAsNeeded</span><span class="params">(<span class="keyword">int</span> capacity)</span> </span>&#123;</div><div class="line">    <span class="keyword">boolean</span> currentAltHashing = hashSeed != <span class="number">0</span>;</div><div class="line">    <span class="keyword">boolean</span> useAltHashing = sun.misc.VM.isBooted() &amp;&amp;</div><div class="line">            (capacity &gt;= Holder.ALTERNATIVE_HASHING_THRESHOLD);</div><div class="line">    <span class="comment">//è¿™é‡Œè¯´æ˜äº†ï¼Œåœ¨hashSeedä¸ä¸º0æˆ–æ»¡è¶³useAltHashæ—¶ï¼Œä¼šé‡ç®—Entryçš„hashå€¼</span></div><div class="line">    <span class="comment">//è‡³äºuseAltHashingçš„ä½œç”¨å¯ä»¥å‚è€ƒä¸‹é¢çš„é“¾æ¥</span></div><div class="line">    <span class="comment">// http://stackoverflow.com/questions/29918624/what-is-the-use-of-holder-class-in-hashmap</span></div><div class="line">    <span class="keyword">boolean</span> switching = currentAltHashing ^ useAltHashing;</div><div class="line">    <span class="keyword">if</span> (switching) &#123;</div><div class="line">        hashSeed = useAltHashing</div><div class="line">            ? sun.misc.Hashing.randomHashSeed(<span class="keyword">this</span>)</div><div class="line">            : <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> switching;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>Mapä¸­çš„å…ƒç´ è¶Šå¤šï¼Œhashå†²çªçš„å‡ ç‡ä¹Ÿå°±è¶Šå¤§ï¼Œæ•°ç»„é•¿åº¦æ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥å¯¼è‡´é“¾è¡¨è¶Šæ¥è¶Šé•¿ï¼Œé‚£ä¹ˆæŸ¥è¯¢çš„æ•ˆç‡å½“ç„¶ä¹Ÿå°±è¶Šåœ°ä¸‹äº†ã€‚HasMapçš„æ‰©å®¹resizeï¼Œéœ€è¦å°†æ‰€æœ‰çš„å…ƒç´ é‡æ–°è®¡ç®—åï¼Œä¸€ä¸ªä¸ªé‡æ–°æ’åˆ—åˆ°æ–°çš„æ•°ç»„ä¸­å»ï¼Œè¿™æ˜¯éå¸¸ä½æ•ˆçš„ï¼Œå’ŒArrayListä¸€æ ·ï¼Œåœ¨å¯é¢„çŸ¥å®¹é‡å¤§å°çš„æƒ…å†µä¸‹ï¼Œæå‰é¢„è®¾å®¹é‡ä¼šå‡å°‘HashMapçš„æ‰©å®¹ï¼Œæé«˜æ€§èƒ½ã€‚</p>
</blockquote>
<h2 id="getæ“ä½œ"><a href="#getæ“ä½œ" class="headerlink" title="getæ“ä½œ"></a>getæ“ä½œ</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> V <span class="title">get</span><span class="params">(Object key)</span> </span>&#123;</div><div class="line">    <span class="comment">//å•ç‹¬å¤„ç†keyä¸ºnullçš„æƒ…å†µ</span></div><div class="line">    <span class="keyword">if</span> (key == <span class="keyword">null</span>)</div><div class="line">        <span class="keyword">return</span> getForNullKey();</div><div class="line">    Entry&lt;K,V&gt; entry = getEntry(key);</div><div class="line">    <span class="keyword">return</span> <span class="keyword">null</span> == entry ? <span class="keyword">null</span> : entry.getValue();</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">private</span> V <span class="title">getForNullKey</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (size == <span class="number">0</span>) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//keyä¸ºnullçš„Entryç”¨äºæ”¾åœ¨table[0]ä¸­ï¼Œä½†æ˜¯åœ¨table[0]å†²çªé“¾ä¸­çš„Entryçš„keyä¸ä¸€å®šä¸ºnull</span></div><div class="line">    <span class="comment">//æ‰€ä»¥éœ€è¦éå†å†²çªé“¾ï¼ŒæŸ¥æ‰¾keyæ˜¯å¦å­˜åœ¨</span></div><div class="line">    <span class="keyword">for</span> (Entry&lt;K,V&gt; e = table[<span class="number">0</span>]; e != <span class="keyword">null</span>; e = e.next) &#123;</div><div class="line">        <span class="keyword">if</span> (e.key == <span class="keyword">null</span>)</div><div class="line">            <span class="keyword">return</span> e.value;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">final</span> Entry&lt;K,V&gt; <span class="title">getEntry</span><span class="params">(Object key)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (size == <span class="number">0</span>) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">int</span> hash = (key == <span class="keyword">null</span>) ? <span class="number">0</span> : hash(key);</div><div class="line">    <span class="comment">//é¦–å…ˆå®šä½åˆ°ç´¢å¼•åœ¨tableä¸­çš„ä½ç½®</span></div><div class="line">    <span class="comment">//ç„¶åéå†å†²çªé“¾ï¼ŒæŸ¥æ‰¾keyæ˜¯å¦å­˜åœ¨</span></div><div class="line">    <span class="keyword">for</span> (Entry&lt;K,V&gt; e = table[indexFor(hash, table.length)];</div><div class="line">         e != <span class="keyword">null</span>;</div><div class="line">         e = e.next) &#123;</div><div class="line">        Object k;</div><div class="line">        <span class="keyword">if</span> (e.hash == hash &amp;&amp;</div><div class="line">            ((k = e.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</div><div class="line">            <span class="keyword">return</span> e;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="removeæ“ä½œ"><a href="#removeæ“ä½œ" class="headerlink" title="removeæ“ä½œ"></a>removeæ“ä½œ</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> V <span class="title">remove</span><span class="params">(Object key)</span> </span>&#123;</div><div class="line">    Entry&lt;K,V&gt; e = removeEntryForKey(key);</div><div class="line">    <span class="comment">//å¯ä»¥çœ‹åˆ°åˆ é™¤çš„keyå¦‚æœå­˜åœ¨ï¼Œå°±è¿”å›å…¶æ‰€å¯¹åº”çš„value</span></div><div class="line">    <span class="keyword">return</span> (e == <span class="keyword">null</span> ? <span class="keyword">null</span> : e.value);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">final</span> Entry&lt;K,V&gt; <span class="title">removeEntryForKey</span><span class="params">(Object key)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (size == <span class="number">0</span>) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">int</span> hash = (key == <span class="keyword">null</span>) ? <span class="number">0</span> : hash(key);</div><div class="line">    <span class="keyword">int</span> i = indexFor(hash, table.length);</div><div class="line">    <span class="comment">//è¿™é‡Œç”¨äº†ä¸¤ä¸ªEntryå¯¹è±¡ï¼Œç›¸å½“äºä¸¤ä¸ªæŒ‡é’ˆï¼Œä¸ºçš„æ˜¯é˜²æ²»å†²çªé“¾å‘ç”Ÿæ–­è£‚çš„æƒ…å†µ</span></div><div class="line">    <span class="comment">//è¿™é‡Œçš„æ€è·¯å°±æ˜¯ä¸€èˆ¬çš„å•å‘é“¾è¡¨çš„åˆ é™¤æ€è·¯</span></div><div class="line">    Entry&lt;K,V&gt; prev = table[i];</div><div class="line">    Entry&lt;K,V&gt; e = prev;</div><div class="line">    <span class="comment">//å½“table[i]ä¸­å­˜åœ¨å†²çªé“¾æ—¶ï¼Œå¼€å§‹éå†é‡Œé¢çš„å…ƒç´ </span></div><div class="line">    <span class="keyword">while</span> (e != <span class="keyword">null</span>) &#123;</div><div class="line">        Entry&lt;K,V&gt; next = e.next;</div><div class="line">        Object k;</div><div class="line">		<span class="comment">//å¦‚æœhashå€¼å’Œkeyéƒ½ç›¸ç­‰åˆ™è®¤ä¸ºç›¸ç­‰</span></div><div class="line">        <span class="keyword">if</span> (e.hash == hash &amp;&amp;</div><div class="line">            ((k = e.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k)))) &#123;</div><div class="line">            modCount++;</div><div class="line">            size--;</div><div class="line">            <span class="keyword">if</span> (prev == e) <span class="comment">//å½“å†²çªé“¾åªæœ‰ä¸€ä¸ªEntryæ—¶</span></div><div class="line">                table[i] = next;</div><div class="line">            <span class="keyword">else</span></div><div class="line">                prev.next = next;</div><div class="line">            e.recordRemoval(<span class="keyword">this</span>);</div><div class="line">            <span class="keyword">return</span> e;</div><div class="line">        &#125;</div><div class="line">        prev = e;</div><div class="line">        e = next;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> e;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸€èˆ¬è€Œè¨€ï¼Œè®¤ä¸ºHashMapçš„è¿™å››ç§æ“ä½œæ—¶é—´å¤æ‚åº¦Oï¼ˆ1ï¼‰ï¼Œå› ä¸ºå®ƒhashå‡½æ•°æ€§è´¨è¾ƒå¥½ï¼Œä¿è¯äº†å†²çªå‘ç”Ÿçš„å‡ ç‡è¾ƒå°ã€‚</p>
<blockquote>
<p>ä»åˆ é™¤å’ŒæŸ¥æ‰¾æ“ä½œå¯ä»¥çœ‹å‡ºï¼Œåœ¨æ ¹æ®keyæŸ¥æ‰¾å…ƒç´ çš„æ—¶å€™ï¼Œè¿˜æ˜¯éœ€è¦é€šè¿‡éå†ï¼Œä½†æ˜¯ç”±äºå·²ç»é€šè¿‡hashå‡½æ•°å¯¹keyæ•£åˆ—ï¼Œè¦éå†çš„åªæ˜¯å‘ç”Ÿå†²çªåç”Ÿæˆçš„é“¾è¡¨ï¼Œè¿™æ ·éå†çš„ç»“æœå°±å·²ç»å°‘å¾ˆå¤šäº†ï¼Œæ¯”å®Œå…¨éå†æ•ˆç‡æå‡äº†Nå€ã€‚</p>
</blockquote>
<h2 id="fast-failçš„HashIterator"><a href="#fast-failçš„HashIterator" class="headerlink" title="fast-failçš„HashIterator"></a>fast-failçš„HashIterator</h2><p>é›†åˆç±»ç”¨Iteratorç±»æ¥éå†å…¶åŒ…å«çš„å…ƒç´ ï¼Œæ¥å£Enumerationä»¥åŠä¸æ¨èä½¿ç”¨ã€‚ç›¸æ¯”Enumerationï¼ŒIteratoræœ‰ä¸‹é¢ä¸¤ä¸ªä¼˜åŠ¿ï¼š</p>
<ul>
<li>Iteratorå…è®¸è°ƒç”¨è€…åœ¨éå†é›†åˆç±»æ—¶åˆ é™¤é›†åˆç±»ä¸­åŒ…å«çš„å…ƒç´ </li>
<li>æ¯”Enumerationå‘½åæ›´ç®€å•</li>
</ul>
<p>HashMapä¸­æä¾›çš„ä¸‰ç§é›†åˆè§†è§’ï¼Œåº•å±‚éƒ½æ˜¯ç”¨HashIteratoræ˜¯å®ç°çš„ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">HashIterator</span>&lt;<span class="title">E</span>&gt; <span class="keyword">implements</span> <span class="title">Iterator</span>&lt;<span class="title">E</span>&gt; </span>&#123;</div><div class="line">    Entry&lt;K,V&gt; next;        <span class="comment">// next entry to return</span></div><div class="line">    <span class="comment">//åœ¨åˆå§‹åŒ–Iteratorå®ä¾‹æ—¶ï¼Œçºªå½•ä¸‹å½“å‰çš„ä¿®æ”¹æ¬¡æ•°</span></div><div class="line">    <span class="keyword">int</span> expectedModCount;   <span class="comment">// For fast-fail</span></div><div class="line">    <span class="keyword">int</span> index;              <span class="comment">// current slot</span></div><div class="line">    Entry&lt;K,V&gt; current;     <span class="comment">// current entry</span></div><div class="line">    HashIterator() &#123;</div><div class="line">        expectedModCount = modCount;</div><div class="line">        <span class="keyword">if</span> (size &gt; <span class="number">0</span>) &#123; <span class="comment">// advance to first entry</span></div><div class="line">            Entry[] t = table;</div><div class="line">            <span class="comment">//éå†HashMapçš„tableï¼Œä¾æ¬¡æŸ¥æ‰¾å…ƒç´ </span></div><div class="line">            <span class="keyword">while</span> (index &lt; t.length &amp;&amp; (next = t[index++]) == <span class="keyword">null</span>)</div><div class="line">                ;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> next != <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">final</span> Entry&lt;K,V&gt; <span class="title">nextEntry</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="comment">//åœ¨è®¿é—®ä¸‹ä¸€ä¸ªEntryæ—¶ï¼Œåˆ¤æ–­æ˜¯å¦æœ‰å…¶ä»–çº¿ç¨‹æœ‰å¯¹é›†åˆçš„ä¿®æ”¹</span></div><div class="line">        <span class="comment">//è¯´æ˜HashMapæ˜¯çº¿ç¨‹éå®‰å…¨çš„</span></div><div class="line">        <span class="keyword">if</span> (modCount != expectedModCount)</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</div><div class="line">        Entry&lt;K,V&gt; e = next;</div><div class="line">        <span class="keyword">if</span> (e == <span class="keyword">null</span>)</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException();</div><div class="line">        <span class="keyword">if</span> ((next = e.next) == <span class="keyword">null</span>) &#123;</div><div class="line">            Entry[] t = table;</div><div class="line">            <span class="keyword">while</span> (index &lt; t.length &amp;&amp; (next = t[index++]) == <span class="keyword">null</span>)</div><div class="line">                ;</div><div class="line">        &#125;</div><div class="line">        current = e;</div><div class="line">        <span class="keyword">return</span> e;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (current == <span class="keyword">null</span>)</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException();</div><div class="line">        <span class="keyword">if</span> (modCount != expectedModCount)</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</div><div class="line">        Object k = current.key;</div><div class="line">        current = <span class="keyword">null</span>;</div><div class="line">        HashMap.<span class="keyword">this</span>.removeEntryForKey(k);</div><div class="line">        expectedModCount = modCount;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">ValueIterator</span> <span class="keyword">extends</span> <span class="title">HashIterator</span>&lt;<span class="title">V</span>&gt; </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> V <span class="title">next</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> nextEntry().value;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">KeyIterator</span> <span class="keyword">extends</span> <span class="title">HashIterator</span>&lt;<span class="title">K</span>&gt; </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> K <span class="title">next</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> nextEntry().getKey();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">EntryIterator</span> <span class="keyword">extends</span> <span class="title">HashIterator</span>&lt;<span class="title">Map</span>.<span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;&gt; </span>&#123;</div><div class="line">    <span class="keyword">public</span> Map.<span class="function">Entry&lt;K,V&gt; <span class="title">next</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> nextEntry();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="åºåˆ—åŒ–"><a href="#åºåˆ—åŒ–" class="headerlink" title="åºåˆ—åŒ–"></a>åºåˆ—åŒ–</h1><p>ä»æºç å¯çŸ¥ï¼Œä¿å­˜Entryçš„tableæ•°ç»„ä¸ºtransientçš„ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨è¿›è¡Œåºåˆ—åŒ–æ—¶å¹¶ä¸ä¼šåŒ…å«è¯¥æˆå‘˜ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">transient</span> Entry&lt;K,V&gt;[] table = (Entry&lt;K,V&gt;[]) EMPTY_TABLE;</div></pre></td></tr></table></figure>
<p>ä¸ºäº†è§£ç­”è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®ä¸‹é¢äº‹å®ï¼šObject.hasCodeæ–¹æ³•å¯¹äºä¸€ä¸ªç±»çš„ä¸¤ä¸ªå®ä¾‹è¿”å›çš„æ˜¯ä¸åŒçš„å“ˆå¸Œå€¼ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥è¯•æƒ³ä¸‹é¢çš„åœºæ™¯ï¼š</p>
<blockquote>
<p>æˆ‘ä»¬åœ¨æœºå™¨Aä¸Šç®—å‡ºå¯¹è±¡Açš„å“ˆå¸Œå€¼ä¸ç´¢å¼•ï¼Œç„¶åæŠŠå®ƒæ’å…¥åˆ°HashMapä¸­ï¼Œç„¶åæŠŠè¯¥HashMapåºåˆ—åŒ–åï¼Œåœ¨æœºå™¨Bä¸Šé‡æ–°ç®—å‡ºå¯¹è±¡çš„å“ˆå¸Œå€¼ä¸ç´¢å¼•ï¼Œè¿™ä¸æœºå™¨Aä¸Šç®—å‡ºçš„æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨æœºå™¨Bä¸Šgetå¯¹è±¡Aæ—¶ï¼Œä¼šå¾—åˆ°é”™è¯¯çš„ç»“æœã€‚<br>æ‰€ä»¥è¯´ï¼Œå½“åºåˆ—åŒ–ä¸€ä¸ªHashMapå¯¹è±¡æ—¶ï¼Œä¿å­˜Entryçš„tableæ˜¯ä¸éœ€è¦åºåˆ—åŒ–è¿›æ¥çš„ï¼Œå› ä¸ºå®ƒåœ¨å¦ä¸€å°æœºå™¨ä¸Šæ˜¯é”™è¯¯çš„ã€‚<br>å› ä¸ºè¿™ä¸ªåŸå› ï¼ŒHashMapé‡å†™äº†writeObjectå’ŒreadObjectæ–¹æ³•</p>
</blockquote>
<h1 id="HashMapéå†"><a href="#HashMapéå†" class="headerlink" title="HashMapéå†"></a>HashMapéå†</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HashMapDemo</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * <span class="doctag">@param</span> args</div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="comment">// TODO Auto-generated method stub</span></div><div class="line">		Map&lt;String, String&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</div><div class="line">		</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; <span class="number">4</span>;i++ ) &#123;</div><div class="line">			</div><div class="line">			map.put(<span class="string">"name"</span>+i, <span class="string">"liuguoquan"</span>+i);</div><div class="line">		&#125;</div><div class="line">		</div><div class="line"></div><div class="line">		<span class="keyword">long</span> start = System.nanoTime();</div><div class="line">		<span class="comment">//é”®çš„é›†åˆ</span></div><div class="line">		Set&lt;String&gt; set = map.keySet();</div><div class="line">		Iterator&lt;String&gt; iterator = set.iterator();</div><div class="line">		<span class="keyword">while</span> (iterator.hasNext()) &#123;</div><div class="line">			String key = (String) iterator.next();</div><div class="line">			String value = map.get(key);</div><div class="line">			System.out.println(key + <span class="string">" = "</span> + value);</div><div class="line">			</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">long</span> end = System.nanoTime();</div><div class="line">		System.out.println(<span class="string">"keySet(): "</span> + (end - start)+<span class="string">"çº³ç§’"</span>);</div><div class="line">		</div><div class="line">		<span class="comment">//foreach keyset</span></div><div class="line">		start = System.nanoTime();</div><div class="line">		<span class="keyword">for</span>(String key : map.keySet()) &#123;</div><div class="line">			String value = map.get(key);</div><div class="line">			System.out.println(key + <span class="string">" = "</span> + value);</div><div class="line">		&#125;</div><div class="line">		end = System.nanoTime();</div><div class="line">		System.out.println(<span class="string">"for keySet(): "</span> + (end - start)+<span class="string">"çº³ç§’"</span>);</div><div class="line">		</div><div class="line">		<span class="comment">//Entryé›†åˆ æ•ˆç‡è¾ƒé«˜</span></div><div class="line">		start = System.nanoTime();</div><div class="line">		Set&lt;Entry&lt;String, String&gt;&gt; entrySet = map.entrySet();</div><div class="line">		Iterator&lt;Entry&lt;String, String&gt;&gt; it = entrySet.iterator();</div><div class="line">		<span class="keyword">while</span> (it.hasNext()) &#123;</div><div class="line">			Map.Entry&lt;String, String&gt; entry = (Map.Entry&lt;String, String&gt;) it</div><div class="line">					.next();</div><div class="line">			String key = entry.getKey();</div><div class="line">			String value = entry.getValue();</div><div class="line">			System.out.println(key + <span class="string">" = "</span> + value);</div><div class="line">			</div><div class="line">		&#125;</div><div class="line">		end = System.nanoTime();</div><div class="line">		System.out.println(<span class="string">"entrySet(): "</span>+ (end - start)+<span class="string">"çº³ç§’"</span>);</div><div class="line">		</div><div class="line">		start = System.nanoTime();</div><div class="line">		<span class="comment">//foreach entry </span></div><div class="line">		<span class="keyword">for</span>(Entry&lt;String, String&gt; entry : map.entrySet()) &#123;</div><div class="line">			String key = entry.getKey();</div><div class="line">			String value = entry.getValue();</div><div class="line">			System.out.println(key + <span class="string">" = "</span> + value);</div><div class="line">		&#125;</div><div class="line">		end = System.nanoTime();</div><div class="line">		System.out.println(<span class="string">"for entrySet(): "</span>+ (end - start)+<span class="string">"çº³ç§’"</span>);</div><div class="line">		</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">ç»“æœæ‰“å°ï¼š</div><div class="line"></div><div class="line">name3 = liuguoquan3</div><div class="line">name2 = liuguoquan2</div><div class="line">name1 = liuguoquan1</div><div class="line">name0 = <span class="function">liuguoquan0</span></div><div class="line"><span class="title">keySet</span><span class="params">()</span>: 403136çº³ç§’</div><div class="line">name3 = liuguoquan3</div><div class="line">name2 = liuguoquan2</div><div class="line">name1 = liuguoquan1</div><div class="line">name0 = <span class="function">liuguoquan0</span></div><div class="line"><span class="keyword">for</span> <span class="title">keySet</span><span class="params">()</span>: 84675çº³ç§’</div><div class="line">name3 = liuguoquan3</div><div class="line">name2 = liuguoquan2</div><div class="line">name1 = liuguoquan1</div><div class="line">name0 = <span class="function">liuguoquan0</span></div><div class="line"><span class="title">entrySet</span><span class="params">()</span>: 109194çº³ç§’</div><div class="line">name3 = liuguoquan3</div><div class="line">name2 = liuguoquan2</div><div class="line">name1 = liuguoquan1</div><div class="line">name0 = <span class="function">liuguoquan0</span></div><div class="line"><span class="keyword">for</span> <span class="title">entrySet</span><span class="params">()</span>: 69850çº³ç§’</div></pre></td></tr></table></figure>
<p>ä»ä¸Šé¢çš„ç»“æœæ¥çœ‹ï¼š</p>
<ul>
<li>HashMapéå†ï¼Œå¦‚æœæ—¢éœ€è¦å¯ä»¥ä¹Ÿéœ€è¦value,ç›´æ¥ç”¨</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span>(Entry&lt;String, String&gt; entry : map.entrySet()) &#123;</div><div class="line">	String key = entry.getKey();</div><div class="line">	String value = entry.getValue();</div><div class="line">	System.out.println(key + <span class="string">" = "</span> + value);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>å¦‚æœåªæ˜¯éå†keyè€Œæ— éœ€valueçš„è¯ï¼Œå¯ä»¥ç›´æ¥ç”¨<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span>(String key : map.keySet()) &#123;</div><div class="line"></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>å‚è€ƒæ–‡ç« ï¼š</p>
<p><a href="http://www.importnew.com/17559.html" target="_blank" rel="external">ç»™jdkå†™æ³¨é‡Šç³»åˆ—ä¹‹jdk1.6å®¹å™¨(4)-HashMapæºç è§£æ</a></p>
<p><a href="http://liujiacai.net/blog/2015/09/03/java-hashmap/" target="_blank" rel="external">Java HashMap æºç è§£æ</a></p>
<p><a href="http://www.importnew.com/16301.html" target="_blank" rel="external">HashMapçš„å®ç°åŸç†</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://liuguoquan727.github.io/2015/12/19/Javaé›†åˆä¹‹HashMap/" data-id="cj6ft5et0007wqm192df3y0hj" class="article-share-link">åˆ†äº«</a>
      
        <a href="http://liuguoquan727.github.io/2015/12/19/Javaé›†åˆä¹‹HashMap/#ds-thread" class="article-comment-link">ç•™è¨€</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Collection/">Collection</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-Javaé›†åˆä¹‹ArrayListå’ŒLinkedList" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/18/Javaé›†åˆä¹‹ArrayListå’ŒLinkedList/" class="article-date">
  <time datetime="2015-12-18T13:25:21.000Z" itemprop="datePublished">2015-12-18 21:25:21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Java/">Java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/18/Javaé›†åˆä¹‹ArrayListå’ŒLinkedList/">Javaé›†åˆä¹‹ArrayListå’ŒLinkedList</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h1 id="ArrayList"><a href="#ArrayList" class="headerlink" title="ArrayList"></a>ArrayList</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>ArrayListæ˜¯ Java é›†åˆæ¡†æ¶ä¸­ä½¿ç”¨æœ€ä¸ºæ™®éçš„é›†åˆç±»ä¹‹ä¸€ã€‚ArrayList æ˜¯ä¸€ç§ List å®ç°ï¼Œå…è®¸åŒ…æ‹¬nullåœ¨å†…çš„æ‰€æœ‰å…ƒç´ ï¼Œå®ƒçš„å†…éƒ¨ç”¨ä¸€ä¸ªåŠ¨æ€æ•°ç»„æ¥å­˜å‚¨å…ƒç´ ï¼Œå› æ­¤ ArrayList èƒ½å¤Ÿåœ¨æ·»åŠ å’Œç§»é™¤å…ƒç´ çš„æ—¶å€™è¿›è¡ŒåŠ¨æ€çš„æ‰©å±•å’Œç¼©å‡ã€‚</p>
<p>ArrayListæœ‰å®¹é‡é™åˆ¶ã€‚è¶…å‡ºé™åˆ¶æ—¶ä¼šå¢åŠ 50%å®¹é‡ï¼Œç”¨System.arraycopy()å¤åˆ¶åˆ°æ–°çš„æ•°ç»„ï¼Œå› æ­¤æœ€å¥½èƒ½ç»™å‡ºæ•°ç»„å¤§å°çš„é¢„ä¼°å€¼ã€‚é»˜è®¤ç¬¬ä¸€æ¬¡æ’å…¥å…ƒç´ æ—¶åˆ›å»ºå¤§å°ä¸º10çš„æ•°ç»„ã€‚</p>
<p>ArrayListæŒ‰æ•°ç»„ä¸‹æ ‡è®¿é—®å…ƒç´ â€“get(i)/set(i,e) çš„æ€§èƒ½å¾ˆé«˜ï¼Œè¿™æ˜¯æ•°ç»„çš„åŸºæœ¬ä¼˜åŠ¿ã€‚</p>
<p>ArrayListç›´æ¥åœ¨æ•°ç»„æœ«å°¾åŠ å…¥å…ƒç´ â€“add(e)çš„æ€§èƒ½ä¹Ÿé«˜ï¼Œä½†å¦‚æœæŒ‰ä¸‹æ ‡æ’å…¥ã€åˆ é™¤å…ƒç´ â€“add(i,e), remove(i), remove(e)ï¼Œåˆ™è¦ç”¨System.arraycopy()æ¥ç§»åŠ¨éƒ¨åˆ†å—å½±å“çš„å…ƒç´ ï¼Œæ€§èƒ½å°±å˜å·®äº†ï¼Œè¿™æ˜¯åŸºæœ¬åŠ£åŠ¿ã€‚</p>
<h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayList</span>&lt;<span class="title">E</span>&gt;</span></div><div class="line">	<span class="keyword">extends</span> <span class="title">AbstractList</span>&lt;<span class="title">E</span>&gt;</div><div class="line">	<span class="keyword">implements</span> <span class="title">List</span>&lt;<span class="title">E</span>&gt;, <span class="title">RandomAccess</span>, <span class="title">Cloneable</span>, <span class="title">Serializable</span></div></pre></td></tr></table></figure>
<h2 id="ArrayListå®ç°"><a href="#ArrayListå®ç°" class="headerlink" title="ArrayListå®ç°"></a>ArrayListå®ç°</h2><p>å¯¹åº”ArrayListè€Œè¨€ï¼Œå®ƒå®ç°Listæ¥å£ã€åº•å±‚ä½¿ç”¨æ•°ç»„ä¿å­˜æ‰€æœ‰å…ƒç´ ï¼Œå…¶æ“ä½œåŸºæœ¬ä¸Šéƒ½æ˜¯å¯¹æ•°ç»„çš„æ“ä½œã€‚ä¸‹é¢æˆ‘ä»¬æ¥åˆ†æArrayListçš„æºç ï¼š</p>
<h3 id="åº•å±‚æ•°ç»„å®ç°"><a href="#åº•å±‚æ•°ç»„å®ç°" class="headerlink" title="åº•å±‚æ•°ç»„å®ç°"></a>åº•å±‚æ•°ç»„å®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">transient</span> Object[] elementData;</div></pre></td></tr></table></figure>
<h3 id="æ„é€ æ–¹æ³•"><a href="#æ„é€ æ–¹æ³•" class="headerlink" title="æ„é€ æ–¹æ³•"></a>æ„é€ æ–¹æ³•</h3><p>ArrayListæä¾›äº†ä¸‰ç§æ–¹å¼çš„æ„é€ å™¨ï¼š</p>
<ol>
<li>æ„é€ ä¸€ä¸ªé»˜è®¤åˆå§‹å®¹é‡ä¸º10çš„ç©ºåˆ—è¡¨ï¼›</li>
<li>æ„é€ ä¸€ä¸ªæŒ‡å®šåˆå§‹å®¹é‡çš„ç©ºåˆ—è¡¨ï¼›</li>
<li>æ„é€ ä¸€ä¸ªåŒ…å«æŒ‡å®šcollectioné›†åˆçš„å…ƒç´ çš„åˆ—è¡¨ï¼Œè¿™äº›å…ƒç´ æŒ‰ç…§è¯¥collectionçš„è¿­ä»£å™¨è¿”å›å®ƒä»¬çš„é¡ºåºæ’åˆ—çš„ã€‚</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">//æŒ‡å®šåˆå§‹å®¹é‡çš„ç©ºåˆ—è¡¨</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">ArrayList</span><span class="params">(<span class="keyword">int</span> initialCapacity)</span> </span>&#123;</div><div class="line">	<span class="keyword">super</span>();</div><div class="line">	<span class="keyword">if</span> (initialCapacity &lt; <span class="number">0</span>)</div><div class="line">		<span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Illegal Capacity: "</span>+</div><div class="line">										   initialCapacity);</div><div class="line">	<span class="keyword">this</span>.elementData = <span class="keyword">new</span> Object[initialCapacity];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * åˆå§‹å®¹é‡ä¸º10çš„ç©ºåˆ—è¡¨.</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">ArrayList</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">super</span>();</div><div class="line">	<span class="keyword">this</span>.elementData = EMPTY_ELEMENTDATA;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">ArrayList</span><span class="params">(Collection&lt;? extends E&gt; c)</span> </span>&#123;</div><div class="line">	elementData = c.toArray();</div><div class="line">	size = elementData.length;</div><div class="line">	<span class="comment">// c.toArray might (incorrectly) not return Object[] (see 6260652)</span></div><div class="line">	<span class="keyword">if</span> (elementData.getClass() != Object[].class)</div><div class="line">		elementData = Arrays.copyOf(elementData, size, Object[].class);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="å­˜å‚¨"><a href="#å­˜å‚¨" class="headerlink" title="å­˜å‚¨"></a>å­˜å‚¨</h3><p>ArrayListæä¾›äº†setã€addã€addAllè¿™äº›æ–¹æ³•æ·»åŠ å…ƒç´ </p>
<h4 id="set"><a href="#set" class="headerlink" title="set()"></a>set()</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ç”¨æŒ‡å®šçš„å…ƒç´ æ›¿ä»£æ­¤åˆ—è¡¨ä¸­æŒ‡å®šä½ç½®ä¸Šçš„å…ƒç´ ï¼Œå¹¶è¿”å›ä»¥å‰ä½äºè¯¥ä½ç½®ä¸Šçš„å…ƒç´ ã€‚  </span></div><div class="line"><span class="function"><span class="keyword">public</span> E <span class="title">set</span><span class="params">(<span class="keyword">int</span> index, E element)</span> </span>&#123;  </div><div class="line">    RangeCheck(index);  </div><div class="line">  </div><div class="line">    E oldValue = (E) elementData[index];  </div><div class="line">    elementData[index] = element;  </div><div class="line">    <span class="keyword">return</span> oldValue;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="add"><a href="#add" class="headerlink" title="add()"></a>add()</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// å°†æŒ‡å®šçš„å…ƒç´ æ·»åŠ åˆ°æ­¤åˆ—è¡¨çš„å°¾éƒ¨ã€‚  </span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;  </div><div class="line">    ensureCapacity(size + <span class="number">1</span>);   </div><div class="line">    elementData[size++] = e;  </div><div class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;  </div><div class="line">&#125; </div><div class="line"></div><div class="line"><span class="comment">// å°†æŒ‡å®šçš„å…ƒç´ æ’å…¥æ­¤åˆ—è¡¨ä¸­çš„æŒ‡å®šä½ç½®ã€‚  </span></div><div class="line"><span class="comment">// å¦‚æœå½“å‰ä½ç½®æœ‰å…ƒç´ ï¼Œåˆ™å‘å³ç§»åŠ¨å½“å‰ä½äºè¯¥ä½ç½®çš„å…ƒç´ ä»¥åŠæ‰€æœ‰åç»­å…ƒç´ ï¼ˆå°†å…¶ç´¢å¼•åŠ 1ï¼‰ã€‚  </span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> index, E element)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (index &gt; size || index &lt; <span class="number">0</span>)</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"Index: "</span>+index+<span class="string">", Size: "</span>+size);  </div><div class="line">    <span class="comment">// å¦‚æœæ•°ç»„é•¿åº¦ä¸è¶³ï¼Œå°†è¿›è¡Œæ‰©å®¹ã€‚  </span></div><div class="line">    ensureCapacity(size+<span class="number">1</span>);  <span class="comment">// Increments modCount!!  </span></div><div class="line">    <span class="comment">// å°† elementDataä¸­ä»Indexä½ç½®å¼€å§‹ã€é•¿åº¦ä¸ºsize-indexçš„å…ƒç´ æ‹·è´åˆ°ä»ä¸‹æ ‡ä¸ºindex+1ä½ç½®å¼€å§‹çš„æ–°çš„elementDataæ•°ç»„ä¸­ã€‚å³å°†å½“å‰ä½äºè¯¥ä½ç½®çš„å…ƒç´ ä»¥åŠæ‰€æœ‰åç»­å…ƒç´ å³ç§»ä¸€ä¸ªä½ç½®ã€‚  </span></div><div class="line">    System.arraycopy(elementData, index, elementData, index + <span class="number">1</span>, size - index);  </div><div class="line">    elementData[index] = element;  </div><div class="line">    size++;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="addAll"><a href="#addAll" class="headerlink" title="addAll()"></a>addAll()</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æŒ‰ç…§æŒ‡å®šcollectionçš„è¿­ä»£å™¨æ‰€è¿”å›çš„å…ƒç´ é¡ºåºï¼Œå°†è¯¥collectionä¸­çš„æ‰€æœ‰å…ƒç´ æ·»åŠ åˆ°æ­¤åˆ—è¡¨çš„å°¾éƒ¨ã€‚  </span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">addAll</span><span class="params">(Collection&lt;? extends E&gt; c)</span> </span>&#123;  </div><div class="line">    Object[] a = c.toArray();  </div><div class="line">    <span class="keyword">int</span> numNew = a.length;  </div><div class="line">    ensureCapacity(size + numNew);  <span class="comment">// Increments modCount  </span></div><div class="line">    System.arraycopy(a, <span class="number">0</span>, elementData, size, numNew);  </div><div class="line">    size += numNew;  </div><div class="line">    <span class="keyword">return</span> numNew != <span class="number">0</span>;  </div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// ä»æŒ‡å®šçš„ä½ç½®å¼€å§‹ï¼Œå°†æŒ‡å®šcollectionä¸­çš„æ‰€æœ‰å…ƒç´ æ’å…¥åˆ°æ­¤åˆ—è¡¨ä¸­ã€‚  </span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">addAll</span><span class="params">(<span class="keyword">int</span> index, Collection&lt;? extends E&gt; c)</span> </span>&#123;  </div><div class="line">    <span class="keyword">if</span> (index &gt; size || index &lt; <span class="number">0</span>)  </div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(  </div><div class="line">            <span class="string">"Index: "</span> + index + <span class="string">", Size: "</span> + size);  </div><div class="line">  </div><div class="line">    Object[] a = c.toArray();  </div><div class="line">    <span class="keyword">int</span> numNew = a.length;  </div><div class="line">    ensureCapacity(size + numNew);  <span class="comment">// Increments modCount  </span></div><div class="line">  </div><div class="line">    <span class="keyword">int</span> numMoved = size - index;  </div><div class="line">    <span class="keyword">if</span> (numMoved &gt; <span class="number">0</span>)  </div><div class="line">        System.arraycopy(elementData, index, elementData, index + numNew, numMoved);  </div><div class="line">  </div><div class="line">    System.arraycopy(a, <span class="number">0</span>, elementData, index, numNew);  </div><div class="line">    size += numNew;  </div><div class="line">    <span class="keyword">return</span> numNew != <span class="number">0</span>;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="è¯»å–å…ƒç´ "><a href="#è¯»å–å…ƒç´ " class="headerlink" title="è¯»å–å…ƒç´ "></a>è¯»å–å…ƒç´ </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// è¿”å›æ­¤åˆ—è¡¨ä¸­æŒ‡å®šä½ç½®ä¸Šçš„å…ƒç´ ã€‚  </span></div><div class="line"><span class="function"><span class="keyword">public</span> E <span class="title">get</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;  </div><div class="line">    RangeCheck(index);  </div><div class="line">  </div><div class="line">    <span class="keyword">return</span> (E) elementData[index];  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="åˆ é™¤å…ƒç´ "><a href="#åˆ é™¤å…ƒç´ " class="headerlink" title="åˆ é™¤å…ƒç´ "></a>åˆ é™¤å…ƒç´ </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ç§»é™¤æ­¤åˆ—è¡¨ä¸­æŒ‡å®šä½ç½®ä¸Šçš„å…ƒç´ ã€‚  </span></div><div class="line"><span class="function"><span class="keyword">public</span> E <span class="title">remove</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;  </div><div class="line">    RangeCheck(index);  </div><div class="line">  </div><div class="line">    modCount++;  </div><div class="line">    E oldValue = (E) elementData[index];  </div><div class="line">  </div><div class="line">    <span class="keyword">int</span> numMoved = size - index - <span class="number">1</span>;  </div><div class="line">    <span class="keyword">if</span> (numMoved &gt; <span class="number">0</span>)  </div><div class="line">        System.arraycopy(elementData, index+<span class="number">1</span>, elementData, index, numMoved);  </div><div class="line">    elementData[--size] = <span class="keyword">null</span>; <span class="comment">// Let gc do its work  </span></div><div class="line">  </div><div class="line">    <span class="keyword">return</span> oldValue;  </div><div class="line">&#125; </div><div class="line"></div><div class="line"><span class="comment">// ç§»é™¤æ­¤åˆ—è¡¨ä¸­é¦–æ¬¡å‡ºç°çš„æŒ‡å®šå…ƒç´ ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ã€‚è¿™æ˜¯åº”ä¸ºArrayListä¸­å…è®¸å­˜æ”¾é‡å¤çš„å…ƒç´ ã€‚  </span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">remove</span><span class="params">(Object o)</span> </span>&#123;  </div><div class="line">    <span class="comment">// ç”±äºArrayListä¸­å…è®¸å­˜æ”¾nullï¼Œå› æ­¤ä¸‹é¢é€šè¿‡ä¸¤ç§æƒ…å†µæ¥åˆ†åˆ«å¤„ç†ã€‚  </span></div><div class="line">    <span class="keyword">if</span> (o == <span class="keyword">null</span>) &#123;  </div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt; size; index++)  </div><div class="line">            <span class="keyword">if</span> (elementData[index] == <span class="keyword">null</span>) &#123;  </div><div class="line">                <span class="comment">// ç±»ä¼¼remove(int index)ï¼Œç§»é™¤åˆ—è¡¨ä¸­æŒ‡å®šä½ç½®ä¸Šçš„å…ƒç´ ã€‚  </span></div><div class="line">                fastRemove(index);  </div><div class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;  </div><div class="line">            &#125;  </div><div class="line">&#125; <span class="keyword">else</span> &#123;  </div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt; size; index++)  </div><div class="line">        <span class="keyword">if</span> (o.equals(elementData[index])) &#123;  </div><div class="line">            fastRemove(index);  </div><div class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;  </div><div class="line">        &#125;  </div><div class="line">    &#125;  </div><div class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼šä»æ•°ç»„ä¸­ç§»é™¤å…ƒç´ çš„æ“ä½œï¼Œä¹Ÿä¼šå¯¼è‡´è¢«ç§»é™¤çš„å…ƒç´ ä»¥åçš„æ‰€æœ‰å…ƒç´ çš„å‘å·¦ç§»åŠ¨ä¸€ä¸ªä½ç½®ã€‚</p>
<h3 id="è°ƒæ•´æ•°ç»„å®¹é‡"><a href="#è°ƒæ•´æ•°ç»„å®¹é‡" class="headerlink" title="è°ƒæ•´æ•°ç»„å®¹é‡"></a>è°ƒæ•´æ•°ç»„å®¹é‡</h3><p>æ¯æ¬¡å‘ArrayListä¸­æ·»åŠ å…ƒç´ æ—¶ï¼Œéƒ½è¦å»æ£€æŸ¥æ·»åŠ åå…ƒç´ çš„ä¸ªæ•°æ˜¯å¦ä¼šè¶…å‡ºå½“å‰æ•°ç»„çš„é•¿åº¦ï¼Œå¦‚æœè¶…å‡ºæ•°ç»„å°†ä¼šè¿›è¡Œæ‰©å®¹ï¼Œä»¥æ»¡è¶³æ·»åŠ æ•°æ®çš„éœ€æ±‚ã€‚æ•°ç»„æ‰©å®¹é€šè¿‡ä¸€ä¸ªå…¬å¼€çš„æ–¹æ³•ensureCapacity()æ¥å®ç°ã€‚åœ¨å®é™…æ·»åŠ å¤§é‡å…ƒç´ å‰ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•æ‰‹åŠ¨å¢åŠ ArrayListçš„å®¹é‡ï¼Œä»¥å‡å°‘é€’å¢å¼å†åˆ†é…çš„æ•°é‡ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ensureCapacity</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</div><div class="line">	<span class="comment">//æ˜¯å¦æ˜¯é»˜è®¤å®¹é‡</span></div><div class="line">	<span class="keyword">int</span> minExpand = (elementData != EMPTY_ELEMENTDATA) ? <span class="number">0</span> : DEFAULT_CAPACITY;</div><div class="line">	</div><div class="line">	<span class="keyword">if</span> (minCapacity &gt; minExpand) &#123;</div><div class="line">		<span class="comment">//æ‰©å®¹</span></div><div class="line">		ensureExplicitCapacity(minCapacity);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ensureExplicitCapacity</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</div><div class="line">	modCount++;</div><div class="line"></div><div class="line">	<span class="comment">//åˆ¤æ–­æ˜¯å¦å¤§äºå½“å‰å®¹é‡</span></div><div class="line">	<span class="keyword">if</span> (minCapacity - elementData.length &gt; <span class="number">0</span>)</div><div class="line">		grow(minCapacity);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">grow</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</div><div class="line">	<span class="comment">//</span></div><div class="line">	<span class="keyword">int</span> oldCapacity = elementData.length;</div><div class="line">	<span class="comment">//æ‰©å±•å®¹é‡ä¸ºå½“å‰å®¹é‡çš„ä¸€åŠ</span></div><div class="line">	<span class="keyword">int</span> newCapacity = oldCapacity + (oldCapacity &gt;&gt; <span class="number">1</span>);</div><div class="line">	</div><div class="line">	<span class="comment">//æ–°å®¹é‡å°äºæœ€å°å®¹é‡è¦æ±‚</span></div><div class="line">	<span class="keyword">if</span> (newCapacity - minCapacity &lt; <span class="number">0</span>)</div><div class="line">		newCapacity = minCapacity;</div><div class="line">	<span class="keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="number">0</span>)</div><div class="line">		newCapacity = hugeCapacity(minCapacity);</div><div class="line">	<span class="comment">//</span></div><div class="line">	elementData = Arrays.copyOf(elementData, newCapacity);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä»ä¸Šè¿°ä»£ç å¯ä»¥çœ‹å‡ºï¼Œæ•°ç»„è¿›è¡Œæ‰©å®¹æ—¶ï¼Œä¼šå°†è€æ•°ç»„ä¸­çš„å…ƒç´ æ‹·è´ä¸€ä»½åˆ°æ–°çš„æ•°ç»„ä¸­ï¼Œæ¯æ¬¡æ•°ç»„å®¹é‡çš„å¢é•¿å¤§çº¦æ˜¯å…¶åŸå®¹é‡çš„1.5å€ã€‚è¿™ç§æ“ä½œçš„ä»£ä»·æ˜¯å¾ˆé«˜çš„ï¼Œå› æ­¤åœ¨å®é™…ä½¿ç”¨æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥å°½é‡é¿å…æ•°ç»„å®¹é‡çš„æ‰©å¼ ã€‚å½“æˆ‘ä»¬å¯é¢„çŸ¥è¦ä¿å­˜çš„å…ƒç´ æœ‰å¤šå°‘æ—¶ï¼Œè¦åœ¨æ„é€ ArrayListå®ä¾‹æ—¶å°±æŒ‡å®šå…¶å®¹é‡å¤§å°ï¼Œä»¥é¿å…æ•°ç»„æ‰©å®¹çš„å‘é€ã€‚æˆ–è€…æ ¹æ®å®é™…éœ€æ±‚ï¼Œé€šè¿‡è°ƒç”¨ensureCapacity()æ–¹æ³•æ‰‹åŠ¨å¢åŠ ArrayListå®ä¾‹çš„å®¹é‡ã€‚</p>
<p>ArrayListè¿˜ç»™æˆ‘ä»¬æä¾›äº†å°†åº•å±‚æ•°ç»„çš„å®¹é‡è°ƒæ•´ä¸ºå½“å‰åˆ—è¡¨ä¿å­˜çš„å®é™…å…ƒç´ çš„å¤§å°çš„åŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡trimToSizeæ–¹æ³•æ¥å®ç°ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">trimToSize</span><span class="params">()</span> </span>&#123;  </div><div class="line">    modCount++;  </div><div class="line">    <span class="keyword">int</span> oldCapacity = elementData.length;  </div><div class="line">    <span class="keyword">if</span> (size &lt; oldCapacity) &#123;  </div><div class="line">        elementData = Arrays.copyOf(elementData, size);  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Fail-Fastæœºåˆ¶"><a href="#Fail-Fastæœºåˆ¶" class="headerlink" title="Fail-Fastæœºåˆ¶"></a>Fail-Fastæœºåˆ¶</h3><p>ArrayListä¹Ÿé‡‡ç”¨äº†å¿«é€Ÿå¤±è´¥çš„æœºåˆ¶ï¼Œé€šè¿‡è®°å½•modCountå‚æ•°æ¥å®ç°ã€‚åœ¨é¢å¯¹å¹¶å‘çš„ä¿®æ”¹æ—¶ï¼Œè¿­ä»£å™¨å¾ˆå¿«å°±ä¼šæŠ›å‡ºå¤±è´¥ï¼Œè€Œä¸æ˜¯å†’ç€åœ¨å°†æ¥æŸä¸ªä¸ç¡®å®šæ—¶é—´å‘ç”Ÿä»»æ„ä¸ç¡®å®šè¡Œä¸ºçš„é£é™©ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">checkForComodification</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span> (<span class="keyword">this</span>.modCount != l.modCount)</div><div class="line">		<span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="ArrayListéå†"><a href="#ArrayListéå†" class="headerlink" title="ArrayListéå†"></a>ArrayListéå†</h2><p>æœ‰ä¸‰ç§æ–¹æ³•å¯ä»¥éå†ArrayListæ•°ç»„ï¼Œåˆ†åˆ«æ˜¯forã€foreachã€Iteratorã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayListDemo</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * <span class="doctag">@param</span> args</div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="comment">// TODO Auto-generated method stub</span></div><div class="line">		List&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;String&gt;();</div><div class="line"></div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</div><div class="line">			list.add(<span class="string">"liu"</span> + i);</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="comment">// forå¾ªç¯  ä¼˜å…ˆç”¨è¿™ç§æ–¹å¼</span></div><div class="line">		<span class="keyword">int</span> len = list.size();</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</div><div class="line">			System.out.println(<span class="string">"for: "</span> + list.get(i));</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="comment">// foreachè¯­å¥</span></div><div class="line">		<span class="keyword">for</span> (String str : list) &#123;</div><div class="line"></div><div class="line">			System.out.println(<span class="string">"foreach: "</span> + str);</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="comment">// æ˜¾ç¤ºè°ƒç”¨é›†åˆè¿­ä»£å™¨</span></div><div class="line">		Iterator&lt;String&gt; it = list.iterator();</div><div class="line">		<span class="keyword">while</span> (it.hasNext()) &#123;</div><div class="line">			System.out.println(<span class="string">"iterator while: "</span> + it.next());</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="keyword">for</span> (Iterator&lt;String&gt; iterator = list.iterator(); iterator.hasNext();) &#123;</div><div class="line"></div><div class="line">			System.out.println(<span class="string">"iterator for: "</span> + iterator.next());</div><div class="line"></div><div class="line"></div><div class="line">		&#125;</div><div class="line"></div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="LinkedList"><a href="#LinkedList" class="headerlink" title="LinkedList"></a>LinkedList</h1><p>LinkedListæ˜¯ä¸€ç§åŸºäºé“¾è¡¨ç»“æ„çš„ä¸€ä¸­Listï¼Œå…·ä½“æ˜¯åŸºäºåŒå‘å¾ªç¯åˆ—è¡¨è®¾è®¡çš„ã€‚</p>
<h2 id="å®šä¹‰-1"><a href="#å®šä¹‰-1" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinkedList</span>&lt;<span class="title">E</span>&gt;</span></div><div class="line">    <span class="keyword">extends</span> <span class="title">AbstractSequentialList</span>&lt;<span class="title">E</span>&gt;</div><div class="line">    <span class="keyword">implements</span> <span class="title">List</span>&lt;<span class="title">E</span>&gt;, <span class="title">Deque</span>&lt;<span class="title">E</span>&gt;, <span class="title">Cloneable</span>, <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span></div></pre></td></tr></table></figure>
<h2 id="LinkedListå®ç°"><a href="#LinkedListå®ç°" class="headerlink" title="LinkedListå®ç°"></a>LinkedListå®ç°</h2><h3 id="åº•å±‚å­˜å‚¨"><a href="#åº•å±‚å­˜å‚¨" class="headerlink" title="åº•å±‚å­˜å‚¨"></a>åº•å±‚å­˜å‚¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">transient</span> <span class="keyword">int</span> size = <span class="number">0</span>;  <span class="comment">//å…ƒç´ æ•°é‡</span></div><div class="line"></div><div class="line"><span class="keyword">transient</span> Node&lt;E&gt; first; <span class="comment">//é“¾è¡¨çš„å¤´ç»“ç‚¹</span></div><div class="line"></div><div class="line"><span class="keyword">transient</span> Node&lt;E&gt; last; <span class="comment">//é“¾è¡¨çš„å°¾ç»“ç‚¹</span></div></pre></td></tr></table></figure>
<p>Nodeè¡¨ç¤ºé“¾è¡¨çš„èŠ‚ç‚¹å¯¹è±¡ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span>&lt;<span class="title">E</span>&gt; </span>&#123;</div><div class="line">    E item; <span class="comment">//å½“å‰å­˜å‚¨å…ƒç´ </span></div><div class="line">    Node&lt;E&gt; next; <span class="comment">//ä¸‹ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹</span></div><div class="line">    Node&lt;E&gt; prev; <span class="comment">//ä¸Šä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹</span></div><div class="line"></div><div class="line">    Node(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next) &#123;</div><div class="line">        <span class="keyword">this</span>.item = element;</div><div class="line">        <span class="keyword">this</span>.next = next;</div><div class="line">        <span class="keyword">this</span>.prev = prev;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Nodeæ˜¯LinkedListçš„å†…éƒ¨ç±»ï¼Œå…¶ä¸­å®šä¹‰äº†å½“å‰å­˜å‚¨çš„å…ƒç´ ï¼Œä»¥åŠè¯¥å…ƒç´ çš„ä¸Šä¸€ä¸ªå…ƒç´ å’Œä¸‹ä¸€ä¸ªå…ƒç´ ã€‚</p>
<h3 id="æ„é€ æ–¹æ³•-1"><a href="#æ„é€ æ–¹æ³•-1" class="headerlink" title="æ„é€ æ–¹æ³•"></a>æ„é€ æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line">* æ„é€ ä¸€ä¸ªç©ºé“¾è¡¨</div><div class="line">*/</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">LinkedList</span><span class="params">()</span> </span>&#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line">* æ„é€ ä¸€ä¸ªåŒ…å«æŒ‡å®š collection ä¸­çš„å…ƒç´ çš„åˆ—è¡¨ï¼Œè¿™äº›å…ƒç´ æŒ‰å…¶ collection çš„è¿­ä»£å™¨è¿”å›çš„é¡ºåºæ’åˆ—</div><div class="line">*/</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">LinkedList</span><span class="params">(Collection&lt;? extends E&gt; c)</span> </span>&#123;</div><div class="line">	<span class="keyword">this</span>();</div><div class="line">	addAll(c);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="add-1"><a href="#add-1" class="headerlink" title="add()"></a>add()</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">//æ·»åŠ åˆ°é“¾è¡¨æœ«å°¾</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</div><div class="line">	linkLast(e);</div><div class="line">	<span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//åœ¨æŒ‡å®šä½ç½®æ·»åŠ å…ƒç´ </span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> index, E element)</span> </span>&#123;</div><div class="line">	checkPositionIndex(index);</div><div class="line"></div><div class="line">	<span class="keyword">if</span> (index == size)</div><div class="line">		linkLast(element);</div><div class="line">	<span class="keyword">else</span></div><div class="line">		linkBefore(element, node(index));</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="addAll-1"><a href="#addAll-1" class="headerlink" title="addAll()"></a>addAll()</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">//æ·»åŠ ä¸€ä¸ªé›†åˆ</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">addAll</span><span class="params">(Collection&lt;? extends E&gt; c)</span> </span>&#123;</div><div class="line">	<span class="keyword">return</span> addAll(size, c);</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//åœ¨æŒ‡å®šä½ç½®æ·»åŠ ä¸€ä¸ªé›†åˆ</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">addAll</span><span class="params">(<span class="keyword">int</span> index, Collection&lt;? extends E&gt; c)</span> </span>&#123;</div><div class="line">	checkPositionIndex(index);</div><div class="line"></div><div class="line">	Object[] a = c.toArray();</div><div class="line">	<span class="keyword">int</span> numNew = a.length;</div><div class="line">	<span class="keyword">if</span> (numNew == <span class="number">0</span>)</div><div class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line"></div><div class="line">	Node&lt;E&gt; pred, succ;</div><div class="line">	<span class="keyword">if</span> (index == size) &#123;</div><div class="line">		succ = <span class="keyword">null</span>;</div><div class="line">		pred = last;</div><div class="line">	&#125; <span class="keyword">else</span> &#123;</div><div class="line">		succ = node(index);</div><div class="line">		pred = succ.prev;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">for</span> (Object o : a) &#123;</div><div class="line">		<span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>) E e = (E) o;</div><div class="line">		Node&lt;E&gt; newNode = <span class="keyword">new</span> Node&lt;&gt;(pred, e, <span class="keyword">null</span>);</div><div class="line">		<span class="keyword">if</span> (pred == <span class="keyword">null</span>)</div><div class="line">			first = newNode;</div><div class="line">		<span class="keyword">else</span></div><div class="line">			pred.next = newNode;</div><div class="line">		pred = newNode;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">if</span> (succ == <span class="keyword">null</span>) &#123;</div><div class="line">		last = pred;</div><div class="line">	&#125; <span class="keyword">else</span> &#123;</div><div class="line">		pred.next = succ;</div><div class="line">		succ.prev = pred;</div><div class="line">	&#125;</div><div class="line">`</div><div class="line">	size += numNew;</div><div class="line">	modCount++;</div><div class="line">	<span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">remove</span><span class="params">(Object o)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span> (o == <span class="keyword">null</span>) &#123;</div><div class="line">		<span class="keyword">for</span> (Node&lt;E&gt; x = first; x != <span class="keyword">null</span>; x = x.next) &#123;</div><div class="line">			<span class="keyword">if</span> (x.item == <span class="keyword">null</span>) &#123;</div><div class="line">				unlink(x);</div><div class="line">				<span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125; <span class="keyword">else</span> &#123;</div><div class="line">		<span class="keyword">for</span> (Node&lt;E&gt; x = first; x != <span class="keyword">null</span>; x = x.next) &#123;</div><div class="line">			<span class="keyword">if</span> (o.equals(x.item)) &#123;</div><div class="line">				unlink(x);</div><div class="line">				<span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function">E <span class="title">unlink</span><span class="params">(Node&lt;E&gt; x)</span> </span>&#123;</div><div class="line">	<span class="comment">// assert x != null;</span></div><div class="line">	<span class="keyword">final</span> E element = x.item;</div><div class="line">	<span class="keyword">final</span> Node&lt;E&gt; next = x.next;</div><div class="line">	<span class="keyword">final</span> Node&lt;E&gt; prev = x.prev;</div><div class="line"></div><div class="line">	<span class="keyword">if</span> (prev == <span class="keyword">null</span>) &#123;</div><div class="line">		first = next;</div><div class="line">	&#125; <span class="keyword">else</span> &#123;</div><div class="line">		prev.next = next;</div><div class="line">		x.prev = <span class="keyword">null</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">if</span> (next == <span class="keyword">null</span>) &#123;</div><div class="line">		last = prev;</div><div class="line">	&#125; <span class="keyword">else</span> &#123;</div><div class="line">		next.prev = prev;</div><div class="line">		x.next = <span class="keyword">null</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	x.item = <span class="keyword">null</span>;</div><div class="line">	size--;</div><div class="line">	modCount++;</div><div class="line">	<span class="keyword">return</span> element;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="ä¿®æ”¹"><a href="#ä¿®æ”¹" class="headerlink" title="ä¿®æ”¹"></a>ä¿®æ”¹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> E <span class="title">set</span><span class="params">(<span class="keyword">int</span> index, E element)</span> </span>&#123;</div><div class="line">	checkElementIndex(index);</div><div class="line">	<span class="comment">//æŸ¥æ‰¾indexå¯¹åº”çš„èŠ‚ç‚¹</span></div><div class="line">	Node&lt;E&gt; x = node(index);</div><div class="line">	E oldVal = x.item;</div><div class="line">	<span class="comment">//æ›¿æ¢æ—§å…ƒç´ </span></div><div class="line">	x.item = element;</div><div class="line">	<span class="keyword">return</span> oldVal;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="æŸ¥è¯¢"><a href="#æŸ¥è¯¢" class="headerlink" title="æŸ¥è¯¢"></a>æŸ¥è¯¢</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> E <span class="title">get</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</div><div class="line">	checkElementIndex(index);</div><div class="line">	<span class="keyword">return</span> node(index).item;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function">Node&lt;E&gt; <span class="title">node</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</div><div class="line">	<span class="comment">// assert isElementIndex(index);</span></div><div class="line"></div><div class="line">	<span class="comment">// äºŒåˆ†æ³•</span></div><div class="line">	<span class="keyword">if</span> (index &lt; (size &gt;&gt; <span class="number">1</span>)) &#123;</div><div class="line">		Node&lt;E&gt; x = first;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; index; i++)</div><div class="line">			x = x.next;</div><div class="line">		<span class="keyword">return</span> x;</div><div class="line">	&#125; <span class="keyword">else</span> &#123;</div><div class="line">		Node&lt;E&gt; x = last;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = size - <span class="number">1</span>; i &gt; index; i--)</div><div class="line">			x = x.prev;</div><div class="line">		<span class="keyword">return</span> x;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åŸºäºåŒå‘å¾ªç¯é“¾è¡¨å®ç°çš„LinkedListï¼Œé€šè¿‡ç´¢å¼•Indexçš„æ“ä½œæ—¶ä½æ•ˆçš„ï¼Œindexæ‰€å¯¹åº”çš„å…ƒç´ è¶Šé è¿‘ä¸­é—´æ‰€è´¹æ—¶é—´è¶Šé•¿ã€‚è€Œå‘é“¾è¡¨ä¸¤ç«¯æ’å…¥å’Œåˆ é™¤å…ƒç´ åˆ™æ˜¯éå¸¸é«˜æ•ˆçš„ï¼ˆå¦‚æœä¸æ˜¯ä¸¤ç«¯çš„è¯ï¼Œéƒ½éœ€è¦å¯¹é“¾è¡¨è¿›è¡Œéå†æŸ¥æ‰¾ï¼‰ã€‚</p>
<h1 id="ArrayList-vs-LinkedList"><a href="#ArrayList-vs-LinkedList" class="headerlink" title="ArrayList vs LinkedList"></a>ArrayList vs LinkedList</h1><ul>
<li>ArrayListåº•å±‚å®ç°æ˜¯æ•°ç»„ï¼ŒLinkedListå®ç°æ˜¯é“¾è¡¨</li>
<li>ArrayListçš„æŸ¥æ‰¾æ•ˆç‡é«˜äºLinkedList</li>
<li>LinkedListçš„å¢åˆ æ•ˆç‡é«˜äºArrayList</li>
</ul>
<p>ArrayListæ“ä½œï¼š</p>
<ul>
<li>æŸ¥è¯¢æ“ä½œçš„æ—¶é—´å¤æ‚åº¦æ˜¯O(1)</li>
<li>å¢åˆ æ“ä½œçš„æ—¶é—´å¤æ‚åº¦æ˜¯O(n)</li>
</ul>
<p>LinkedListï¼š</p>
<ul>
<li>æŸ¥è¯¢æ“ä½œçš„æ—¶é—´å¤æ‚åº¦æ˜¯O(n)</li>
<li>å¢åˆ æ“ä½œçš„æ—¶é—´å¤æ‚åº¦æ˜¯O(1)</li>
</ul>
<h1 id="é¢è¯•é¢˜"><a href="#é¢è¯•é¢˜" class="headerlink" title="é¢è¯•é¢˜"></a>é¢è¯•é¢˜</h1><h2 id="ArrayListçš„å¤§å°æ˜¯å¦‚ä½•è‡ªåŠ¨å¢åŠ çš„ï¼Ÿ"><a href="#ArrayListçš„å¤§å°æ˜¯å¦‚ä½•è‡ªåŠ¨å¢åŠ çš„ï¼Ÿ" class="headerlink" title="ArrayListçš„å¤§å°æ˜¯å¦‚ä½•è‡ªåŠ¨å¢åŠ çš„ï¼Ÿ"></a>ArrayListçš„å¤§å°æ˜¯å¦‚ä½•è‡ªåŠ¨å¢åŠ çš„ï¼Ÿ</h2><p>å½“æˆ‘ä»¬è¯•å›¾åœ¨ArrayListä¸­å¢åŠ ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œé¦–å…ˆä¼šæ£€æŸ¥ArrayListçš„å®¹é‡ï¼Œå·²ç¡®ä¿å·²å­˜åœ¨çš„æ•°ç»„ä¸­æœ‰è¶³å¤Ÿçš„å®¹é‡æ¥å­˜å‚¨æ–°çš„å¯¹è±¡ã€‚å¦‚æœæ²¡æœ‰è¶³å¤Ÿå®¹é‡çš„è¯ï¼Œå°±ä¼šæ–°å»ºä¸€ä¸ªé•¿åº¦æ›´é•¿çš„æ•°ç»„ï¼ˆé•¿åº¦æ˜¯åŸæ•°ç»„é•¿åº¦çš„1.5å€ï¼‰ï¼Œç„¶åä½¿ç”¨Arrays.copyOf()æ–¹æ³•å°†æ—§çš„æ•°ç»„èµ‹å€¼åˆ°æ–°çš„æ•°ç»„ä¸­å»ï¼Œå¹¶å°†ç°æœ‰çš„æ•°ç»„å¼•ç”¨æŒ‡å‘æ–°çš„æ•°ç»„ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;  </div><div class="line">    ensureCapacity(size + <span class="number">1</span>);   </div><div class="line">    elementData[size++] = e;  </div><div class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;  </div><div class="line">&#125; </div><div class="line"></div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ensureCapacity</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</div><div class="line">	modCount++;</div><div class="line"></div><div class="line">	<span class="comment">//åˆ¤æ–­æ˜¯å¦å¤§äºå½“å‰å®¹é‡</span></div><div class="line">	<span class="keyword">if</span> (minCapacity - elementData.length &gt; <span class="number">0</span>)</div><div class="line">		grow(minCapacity);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">grow</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</div><div class="line">	<span class="comment">//</span></div><div class="line">	<span class="keyword">int</span> oldCapacity = elementData.length;</div><div class="line">	<span class="comment">//æ‰©å±•å®¹é‡ä¸ºå½“å‰å®¹é‡çš„ä¸€åŠ</span></div><div class="line">	<span class="keyword">int</span> newCapacity = oldCapacity + (oldCapacity &gt;&gt; <span class="number">1</span>);</div><div class="line">	</div><div class="line">	<span class="comment">//æ–°å®¹é‡å°äºæœ€å°å®¹é‡è¦æ±‚</span></div><div class="line">	<span class="keyword">if</span> (newCapacity - minCapacity &lt; <span class="number">0</span>)</div><div class="line">		newCapacity = minCapacity;</div><div class="line">	<span class="keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="number">0</span>)</div><div class="line">		newCapacity = hugeCapacity(minCapacity);</div><div class="line">	<span class="comment">//è¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„å¯¹è±¡ï¼ŒåŒ…æ‹¬åŸæ•°ç»„ä¸­çš„å†…å®¹</span></div><div class="line">	elementData = Arrays.copyOf(elementData, newCapacity);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨ArrayListï¼Ÿä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨LinkedListï¼Ÿ"><a href="#ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨ArrayListï¼Ÿä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨LinkedListï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨ArrayListï¼Ÿä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨LinkedListï¼Ÿ"></a>ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨ArrayListï¼Ÿä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨LinkedListï¼Ÿ</h2><p>å¤šæ•°æƒ…å†µä¸‹ï¼Œå½“ä½ é‡åˆ°è®¿é—®å…ƒç´ æ¯”æ’å…¥æˆ–åˆ é™¤å…ƒç´ æ“ä½œæ›´é¢‘ç¹çš„æ—¶å€™ï¼Œä½ åº”è¯¥ä½¿ç”¨ArrayListã€‚å½“ä½ é‡åˆ°æ’å…¥æˆ–è€…åˆ é™¤å…ƒç´ æ“ä½œæ›´åŠ é¢‘ç¹ï¼Œæˆ–è€…æ ¹æœ¬ä¸éœ€è¦è®¿é—®å…ƒç´ çš„æ—¶å€™ï¼Œä½ åº”è¯¥ä½¿ç”¨LinkedListã€‚ä¸»è¦åŸå› åœ¨äºï¼Œåœ¨ArrayListä¸­è®¿é—®å…ƒç´ çš„æœ€ç³Ÿç³•çš„æ—¶é—´å¤æ‚åº¦ä¸º1ï¼Œè€Œåœ¨LinkedListä¸­å¯èƒ½å°±æ˜¯nï¼›åœ¨LinkedListä¸­æ’å…¥å’Œåˆ é™¤çš„æ—¶é—´å¤æ‚åº¦ä¸º1ï¼Œè€Œåœ¨ArrayListä¸­å¯èƒ½å°±æ˜¯nã€‚</p>
<h2 id="å½“ä¼ é€’ArrayListåˆ°æŸä¸ªæ–¹æ³•ä¸­ï¼Œæˆ–è€…æŸä¸ªæ–¹æ³•è¿”å›ArrayListï¼Œä»€ä¹ˆæ—¶å€™è¦è€ƒè™‘å®‰å…¨éšæ‚£ï¼Ÿå¦‚ä½•ä¿®æŠ¤å®‰å…¨è¿è§„è¿™ä¸ªé—®é¢˜ï¼Ÿ"><a href="#å½“ä¼ é€’ArrayListåˆ°æŸä¸ªæ–¹æ³•ä¸­ï¼Œæˆ–è€…æŸä¸ªæ–¹æ³•è¿”å›ArrayListï¼Œä»€ä¹ˆæ—¶å€™è¦è€ƒè™‘å®‰å…¨éšæ‚£ï¼Ÿå¦‚ä½•ä¿®æŠ¤å®‰å…¨è¿è§„è¿™ä¸ªé—®é¢˜ï¼Ÿ" class="headerlink" title="å½“ä¼ é€’ArrayListåˆ°æŸä¸ªæ–¹æ³•ä¸­ï¼Œæˆ–è€…æŸä¸ªæ–¹æ³•è¿”å›ArrayListï¼Œä»€ä¹ˆæ—¶å€™è¦è€ƒè™‘å®‰å…¨éšæ‚£ï¼Ÿå¦‚ä½•ä¿®æŠ¤å®‰å…¨è¿è§„è¿™ä¸ªé—®é¢˜ï¼Ÿ"></a>å½“ä¼ é€’ArrayListåˆ°æŸä¸ªæ–¹æ³•ä¸­ï¼Œæˆ–è€…æŸä¸ªæ–¹æ³•è¿”å›ArrayListï¼Œä»€ä¹ˆæ—¶å€™è¦è€ƒè™‘å®‰å…¨éšæ‚£ï¼Ÿå¦‚ä½•ä¿®æŠ¤å®‰å…¨è¿è§„è¿™ä¸ªé—®é¢˜ï¼Ÿ</h2><p>å½“ArrayListè¢«å½“åšå‚æ•°ä¼ é€’åˆ°æŸä¸ªæ–¹æ³•ä¸­ï¼Œå¦‚æœArrayListåœ¨æ²¡æœ‰è¢«å¤åˆ¶çš„æƒ…å†µä¸‹ç›´æ¥è¢«åˆ†é…ç»™æˆå‘˜å˜é‡ï¼Œé‚£ä¹ˆä¹…å¯èƒ½å‘ç”Ÿè¿™ç§æƒ…å†µï¼Œå³å½“åŸå§‹çš„ArrayListè¢«æ”¹å˜æ—¶ï¼Œä¼ é€’åˆ°è¿™ä¸ªæ–¹æ³•çš„æ•°ç»„ä¹Ÿä¼šæ”¹å˜ã€‚ä¸‹é¢æ¥çœ‹çœ‹å®ä¾‹ï¼š</p>
<p>å®‰å…¨éšæ‚£çš„æƒ…å†µï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayListDemo</span> </span>&#123;</div><div class="line">	</div><div class="line">	</div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> List&lt;String&gt; mList;</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * <span class="doctag">@param</span> args</div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="comment">// TODO Auto-generated method stub</span></div><div class="line">		List&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;String&gt;();</div><div class="line"></div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</div><div class="line">			list.add(<span class="string">"liu"</span> + i);</div><div class="line">		&#125;</div><div class="line">	</div><div class="line">		setList(list);</div><div class="line">		</div><div class="line">		<span class="comment">//æ”¹å˜æˆå‘˜å˜é‡</span></div><div class="line">		mList.set(<span class="number">0</span>, <span class="string">"lee"</span>);</div><div class="line">		</div><div class="line">		<span class="keyword">for</span>(String str : mList) &#123;</div><div class="line">			System.out.println(<span class="string">"mList: "</span>+str);</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		<span class="keyword">for</span>(String str : list) &#123;</div><div class="line">			System.out.println(<span class="string">"list: "</span> + str);</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		System.out.println(list == mList);</div><div class="line">		</div><div class="line">		<span class="comment">//æ”¹å˜åŸæ•°ç»„</span></div><div class="line">		list.set(<span class="number">0</span>, <span class="string">"Zhang"</span>);</div><div class="line">		<span class="keyword">for</span>(String str : mList) &#123;</div><div class="line">			System.out.println(<span class="string">"mList: "</span>+str);</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		<span class="keyword">for</span>(String str : list) &#123;</div><div class="line">			System.out.println(<span class="string">"list: "</span> + str);</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		System.out.println(list == mList);</div><div class="line"></div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setList</span><span class="params">(List&lt;String&gt; list)</span> </span>&#123;</div><div class="line">		mList = list;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div><div class="line"></div><div class="line">ç»“æœæ‰“å°:</div><div class="line"></div><div class="line">mList: lee</div><div class="line">mList: liu1</div><div class="line">mList: liu2</div><div class="line">list: lee</div><div class="line">list: liu1</div><div class="line">list: liu2</div><div class="line"><span class="keyword">true</span></div><div class="line">mList: Zhang</div><div class="line">mList: liu1</div><div class="line">mList: liu2</div><div class="line">list: Zhang</div><div class="line">list: liu1</div><div class="line">list: liu2</div><div class="line"><span class="keyword">true</span></div></pre></td></tr></table></figure>
<p>ä»ç»“æœå¯ä»¥çœ‹å‡ºï¼ŒåŸæ•°ç»„å’Œæˆå‘˜å˜é‡æ•°ç»„åŒæ—¶å‘é€æ”¹å˜ï¼Œè¿™æ˜¯å› ä¸ºåœ¨setList()æ–¹æ³•ä¸­æ˜¯å°†æ•°ç»„çš„å¼•ç”¨èµ‹å€¼ç»™äº†æˆå‘˜å˜é‡ã€‚</p>
<p>ä¿®å¤å®‰å…¨éšæ‚£åçš„ä»£ç ä¸ºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayListDemo</span> </span>&#123;</div><div class="line">	</div><div class="line">	</div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> List&lt;String&gt; mList;</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * <span class="doctag">@param</span> args</div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="comment">// TODO Auto-generated method stub</span></div><div class="line">		List&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;String&gt;();</div><div class="line"></div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</div><div class="line">			list.add(<span class="string">"liu"</span> + i);</div><div class="line">		&#125;</div><div class="line">	</div><div class="line">		setList(list);</div><div class="line">		</div><div class="line">		<span class="comment">//æ”¹å˜æˆå‘˜å˜é‡</span></div><div class="line">		mList.set(<span class="number">0</span>, <span class="string">"lee"</span>);</div><div class="line">		</div><div class="line">		<span class="keyword">for</span>(String str : mList) &#123;</div><div class="line">			System.out.println(<span class="string">"mList: "</span>+str);</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		<span class="keyword">for</span>(String str : list) &#123;</div><div class="line">			System.out.println(<span class="string">"list: "</span> + str);</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		System.out.println(list == mList);</div><div class="line">		</div><div class="line">		<span class="comment">//æ”¹å˜åŸæ•°ç»„</span></div><div class="line">		list.set(<span class="number">0</span>, <span class="string">"Zhang"</span>);</div><div class="line">		<span class="keyword">for</span>(String str : mList) &#123;</div><div class="line">			System.out.println(<span class="string">"mList: "</span>+str);</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		<span class="keyword">for</span>(String str : list) &#123;</div><div class="line">			System.out.println(<span class="string">"list: "</span> + str);</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		System.out.println(list == mList);</div><div class="line"></div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setList</span><span class="params">(List&lt;String&gt; list)</span> </span>&#123;</div><div class="line">		<span class="keyword">if</span> (list == <span class="keyword">null</span>) &#123;</div><div class="line">			mList = <span class="keyword">new</span> ArrayList&lt;String&gt;();</div><div class="line">		&#125; <span class="keyword">else</span> &#123;</div><div class="line">			<span class="comment">//åˆ›å»ºæ–°çš„å¯¹è±¡,å¹¶å¤åˆ¶ä¸ªmList</span></div><div class="line">			mList = <span class="keyword">new</span> ArrayList&lt;String&gt;(list);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div><div class="line"></div><div class="line">æ‰“å°:</div><div class="line"></div><div class="line">mList: lee</div><div class="line">mList: liu1</div><div class="line">mList: liu2</div><div class="line">list: liu0</div><div class="line">list: liu1</div><div class="line">list: liu2</div><div class="line"><span class="keyword">false</span></div><div class="line">mList: lee</div><div class="line">mList: liu1</div><div class="line">mList: liu2</div><div class="line">list: Zhang</div><div class="line">list: liu1</div><div class="line">list: liu2</div><div class="line"><span class="keyword">false</span></div></pre></td></tr></table></figure>
<p>ä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œç°åœ¨åŸæ•°ç»„å’Œæˆå‘˜å˜é‡mListç›¸äº’ç‹¬ç«‹ï¼Œæ”¹å˜è‡ªå·±çš„åŒæ—¶ä¸ä¼šæ”¹å˜å¯¹æ–¹çš„æ•°ç»„å†…å®¹ã€‚</p>
<blockquote>
<p>æ•°ç»„[]ä¹Ÿæ˜¯å¦‚æ­¤</p>
</blockquote>
<h2 id="å¦‚ä½•å¤åˆ¶ä¸€ä¸ªArrayListåˆ°å¦ä¸€ä¸ªArrayListä¸­å»"><a href="#å¦‚ä½•å¤åˆ¶ä¸€ä¸ªArrayListåˆ°å¦ä¸€ä¸ªArrayListä¸­å»" class="headerlink" title="å¦‚ä½•å¤åˆ¶ä¸€ä¸ªArrayListåˆ°å¦ä¸€ä¸ªArrayListä¸­å»?"></a>å¦‚ä½•å¤åˆ¶ä¸€ä¸ªArrayListåˆ°å¦ä¸€ä¸ªArrayListä¸­å»?</h2><ol>
<li>ä½¿ç”¨clone()æ–¹æ³•ï¼Œ</li>
<li>ä½¿ç”¨ArrayListæ„é€ æ–¹æ³•ï¼Œ</li>
<li>ä½¿ç”¨Collectionçš„copyæ–¹æ³•ã€‚</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayListDemo</span> </span>&#123;</div><div class="line">	</div><div class="line">	</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * <span class="doctag">@param</span> args</div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="comment">// TODO Auto-generated method stub</span></div><div class="line">		ArrayList&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;String&gt;();</div><div class="line"></div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</div><div class="line">			list.add(<span class="string">"liu"</span> + i);</div><div class="line">		&#125;</div><div class="line">	</div><div class="line">		</div><div class="line">		<span class="comment">//clone()</span></div><div class="line">		ArrayList&lt;String&gt; list1 = (ArrayList&lt;String&gt;) list.clone();</div><div class="line">		</div><div class="line">		</div><div class="line">		<span class="keyword">for</span>(String str : list1) &#123;</div><div class="line">			System.out.println(<span class="string">"list1: "</span>+str);</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		System.out.println(list1 == list);</div><div class="line">		</div><div class="line">		<span class="comment">//æ„é€ æ–¹æ³•</span></div><div class="line">		ArrayList&lt;String&gt; list2 = <span class="keyword">new</span> ArrayList&lt;String&gt;(list);</div><div class="line">		</div><div class="line">		<span class="keyword">for</span>(String str : list2) &#123;</div><div class="line">			System.out.println(<span class="string">"list2: "</span>+str);</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		System.out.println(list2 == list);</div><div class="line">		</div><div class="line">		<span class="comment">//</span></div><div class="line">		ArrayList&lt;String&gt; list3 = <span class="keyword">new</span> ArrayList&lt;String&gt;(list.size());</div><div class="line">		list3.add(<span class="string">"1"</span>);</div><div class="line">		list3.add(<span class="string">"2"</span>);</div><div class="line">		list3.add(<span class="string">"3"</span>);</div><div class="line">		</div><div class="line">		Collections.copy(list3, list);</div><div class="line">		</div><div class="line">		<span class="keyword">for</span>(String str : list3) &#123;</div><div class="line">			System.out.println(<span class="string">"list3: "</span>+str);</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		System.out.println(list3 == list);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">ç»“æœæ‰“å°ï¼š</div><div class="line"></div><div class="line">list1: liu0</div><div class="line">list1: liu1</div><div class="line">list1: liu2</div><div class="line"><span class="keyword">false</span></div><div class="line">list2: liu0</div><div class="line">list2: liu1</div><div class="line">list2: liu2</div><div class="line"><span class="keyword">false</span></div><div class="line">list3: liu0</div><div class="line">list3: liu1</div><div class="line">list3: liu2</div><div class="line"><span class="keyword">false</span></div></pre></td></tr></table></figure>
<h2 id="åœ¨ç´¢å¼•ä¸­ArrayListçš„å¢åŠ æˆ–è€…åˆ é™¤æŸä¸ªå¯¹è±¡çš„è¿è¡Œè¿‡ç¨‹ï¼Ÿæ•ˆç‡å¾ˆä½å—ï¼Ÿè§£é‡Šä¸€ä¸‹ä¸ºä»€ä¹ˆï¼Ÿ"><a href="#åœ¨ç´¢å¼•ä¸­ArrayListçš„å¢åŠ æˆ–è€…åˆ é™¤æŸä¸ªå¯¹è±¡çš„è¿è¡Œè¿‡ç¨‹ï¼Ÿæ•ˆç‡å¾ˆä½å—ï¼Ÿè§£é‡Šä¸€ä¸‹ä¸ºä»€ä¹ˆï¼Ÿ" class="headerlink" title="åœ¨ç´¢å¼•ä¸­ArrayListçš„å¢åŠ æˆ–è€…åˆ é™¤æŸä¸ªå¯¹è±¡çš„è¿è¡Œè¿‡ç¨‹ï¼Ÿæ•ˆç‡å¾ˆä½å—ï¼Ÿè§£é‡Šä¸€ä¸‹ä¸ºä»€ä¹ˆï¼Ÿ"></a>åœ¨ç´¢å¼•ä¸­ArrayListçš„å¢åŠ æˆ–è€…åˆ é™¤æŸä¸ªå¯¹è±¡çš„è¿è¡Œè¿‡ç¨‹ï¼Ÿæ•ˆç‡å¾ˆä½å—ï¼Ÿè§£é‡Šä¸€ä¸‹ä¸ºä»€ä¹ˆï¼Ÿ</h2><p>åœ¨ArrayListä¸­å¢åŠ æˆ–åˆ é™¤å…ƒç´ çš„æ—¶å€™è¦è°ƒç”¨System.arrayCopy()è¿™ä¸ªæ•°å€¼æ‹·è´å‡½æ•°ï¼Œæ¯æ¬¡å¢åŠ æˆ–åˆ é™¤å…ƒç´ éƒ½è¦è¿›è¡Œæ•°ç»„çš„æ‹·è´æ“ä½œï¼Œç›¸å¯¹æ•ˆç‡è¾ƒä½ã€‚å¦‚æœé‡åˆ°é¢‘ç¹æ’å…¥æˆ–åˆ é™¤æ“ä½œçš„æ—¶å€™ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨LinkedListæ¥ä»£æ›¿ã€‚</p>
<p>åœ¨ArrayListçš„æŸä¸ªç´¢å¼•iå¤„æ·»åŠ å…ƒç´ ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> index, E element)</span> </span>&#123;</div><div class="line">    rangeCheckForAdd(index);</div><div class="line"></div><div class="line">    ensureCapacityInternal(size + <span class="number">1</span>);  <span class="comment">// Increments modCount!!</span></div><div class="line">    System.arraycopy(elementData, index, elementData, index + <span class="number">1</span>,</div><div class="line">                     size - index);</div><div class="line">    elementData[index] = element;</div><div class="line">    size++;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨ArrayListçš„æŸä¸ªç´¢å¼•iå¤„åˆ é™¤å…ƒç´ ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> E <span class="title">remove</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</div><div class="line">    rangeCheck(index);</div><div class="line"></div><div class="line">    modCount++;</div><div class="line">    E oldValue = elementData(index);</div><div class="line"></div><div class="line">    <span class="keyword">int</span> numMoved = size - index - <span class="number">1</span>;</div><div class="line">    <span class="keyword">if</span> (numMoved &gt; <span class="number">0</span>)</div><div class="line">        System.arraycopy(elementData, index+<span class="number">1</span>, elementData, index,</div><div class="line">                         numMoved);</div><div class="line">    elementData[--size] = <span class="keyword">null</span>; <span class="comment">// clear to let GC do its work</span></div><div class="line"></div><div class="line">    <span class="keyword">return</span> oldValue;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://liuguoquan727.github.io/2015/12/18/Javaé›†åˆä¹‹ArrayListå’ŒLinkedList/" data-id="cj6ft5et2007zqm19lv54wftx" class="article-share-link">åˆ†äº«</a>
      
        <a href="http://liuguoquan727.github.io/2015/12/18/Javaé›†åˆä¹‹ArrayListå’ŒLinkedList/#ds-thread" class="article-comment-link">ç•™è¨€</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Collection/">Collection</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-Javaé›†åˆä¹‹Arrayså’ŒCollections" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/18/Javaé›†åˆä¹‹Arrayså’ŒCollections/" class="article-date">
  <time datetime="2015-12-18T13:22:21.000Z" itemprop="datePublished">2015-12-18 21:22:21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Java/">Java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/18/Javaé›†åˆä¹‹Arrayså’ŒCollections/">Javaé›†åˆä¹‹Arrayså’ŒCollections</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h1 id="Arrays"><a href="#Arrays" class="headerlink" title="Arrays"></a>Arrays</h1><p>java.util.Arrays</p>
<p><a href="http://www.apihome.cn/api/java/Arrays.html" target="_blank" rel="external">Arraysè¯¦ç»†ä»‹ç»</a></p>
<p>Arrayæ˜¯Javaç‰¹æœ‰çš„æ•°ç»„ã€‚åœ¨ä½ çŸ¥é“æ‰€è¦å¤„ç†æ•°æ®å…ƒç´ ä¸ªæ•°çš„æƒ…å†µä¸‹éå¸¸å¥½ç”¨ã€‚java.util.Arrays åŒ…å«äº†è®¸å¤šå¤„ç†æ•°æ®çš„å®ç”¨æ–¹æ³•ï¼š</p>
<p>Arrays.asListï¼šå¯ä»¥ä» Array è½¬æ¢æˆ Listã€‚å¯ä»¥ä½œä¸ºå…¶ä»–é›†åˆç±»å‹æ„é€ å™¨çš„å‚æ•°ã€‚</p>
<p>Arrays.binarySearchï¼šåœ¨ä¸€ä¸ªå·²æ’åºçš„æˆ–è€…å…¶ä¸­ä¸€æ®µä¸­å¿«é€ŸæŸ¥æ‰¾ã€‚</p>
<p>Arrays.copyOfï¼šå¦‚æœä½ æƒ³æ‰©å¤§æ•°ç»„å®¹é‡åˆä¸æƒ³æ”¹å˜å®ƒçš„å†…å®¹çš„æ—¶å€™å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ã€‚</p>
<p>Arrays.copyOfRangeï¼šå¯ä»¥å¤åˆ¶æ•´ä¸ªæ•°ç»„æˆ–å…¶ä¸­çš„ä¸€éƒ¨åˆ†ã€‚</p>
<p>Arrays.deepEqualsã€Arrays.deepHashCodeï¼šArrays.equals/hashCodeçš„é«˜çº§ç‰ˆæœ¬ï¼Œæ”¯æŒå­æ•°ç»„çš„æ“ä½œã€‚</p>
<p>Arrays.equalsï¼šå¦‚æœä½ æƒ³è¦æ¯”è¾ƒä¸¤ä¸ªæ•°ç»„æ˜¯å¦ç›¸ç­‰ï¼Œåº”è¯¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•è€Œä¸æ˜¯æ•°ç»„å¯¹è±¡ä¸­çš„ equalsæ–¹æ³•ï¼ˆæ•°ç»„å¯¹è±¡ä¸­æ²¡æœ‰é‡å†™equals()æ–¹æ³•ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•ä¹‹æ¯”è¾ƒå¼•ç”¨è€Œä¸æ¯”è¾ƒå†…å®¹ï¼‰ã€‚è¿™ä¸ªæ–¹æ³•é›†åˆäº†Java 5çš„è‡ªåŠ¨è£…ç®±å’Œæ— å‚å˜é‡çš„ç‰¹æ€§ï¼Œæ¥å®ç°å°†ä¸€ä¸ªå˜é‡å¿«é€Ÿåœ°ä¼ ç»™ equals() æ–¹æ³•â€”â€”æ‰€ä»¥è¿™ä¸ªæ–¹æ³•åœ¨æ¯”è¾ƒäº†å¯¹è±¡çš„ç±»å‹ä¹‹åæ˜¯ç›´æ¥ä¼ å€¼è¿›å»æ¯”è¾ƒçš„ã€‚</p>
<p>Arrays.fillï¼šç”¨ä¸€ä¸ªç»™å®šçš„å€¼å¡«å……æ•´ä¸ªæ•°ç»„æˆ–å…¶ä¸­çš„ä¸€éƒ¨åˆ†ã€‚</p>
<p>Arrays.hashCodeï¼šç”¨æ¥æ ¹æ®æ•°ç»„çš„å†…å®¹è®¡ç®—å…¶å“ˆå¸Œå€¼ï¼ˆæ•°ç»„å¯¹è±¡çš„hashCode()ä¸å¯ç”¨ï¼‰ã€‚è¿™ä¸ªæ–¹æ³•é›†åˆäº†Java 5çš„è‡ªåŠ¨è£…ç®±å’Œæ— å‚å˜é‡çš„ç‰¹æ€§ï¼Œæ¥å®ç°å°†ä¸€ä¸ªå˜é‡å¿«é€Ÿåœ°ä¼ ç»™ Arrays.hashcodeæ–¹æ³•â€”â€”åªæ˜¯ä¼ å€¼è¿›å»ï¼Œä¸æ˜¯å¯¹è±¡ã€‚</p>
<p>Arrays.sortï¼šå¯¹æ•´ä¸ªæ•°ç»„æˆ–è€…æ•°ç»„çš„ä¸€éƒ¨åˆ†è¿›è¡Œæ’åºã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨æ­¤æ–¹æ³•ç”¨ç»™å®šçš„æ¯”è¾ƒå™¨å¯¹å¯¹è±¡æ•°ç»„è¿›è¡Œæ’åºã€‚</p>
<p>Arrays.toStringï¼šæ‰“å°æ•°ç»„çš„å†…å®¹ã€‚</p>
<p>å¦‚æœæƒ³è¦å¤åˆ¶æ•´ä¸ªæ•°ç»„æˆ–å…¶ä¸­ä¸€éƒ¨åˆ†åˆ°å¦ä¸€ä¸ªæ•°ç»„ï¼Œå¯ä»¥è°ƒç”¨ System.arraycopyæ–¹æ³•ã€‚æ­¤æ–¹æ³•ä»æºæ•°ç»„ä¸­æŒ‡å®šçš„ä½ç½®å¤åˆ¶æŒ‡å®šä¸ªæ•°çš„å…ƒç´ åˆ°ç›®æ ‡æ•°ç»„é‡Œã€‚è¿™æ— ç–‘æ˜¯ä¸€ä¸ªç®€ä¾¿çš„æ–¹æ³•ã€‚ï¼ˆæœ‰æ—¶å€™ç”¨ ByteBuffer bulkå¤åˆ¶ä¼šæ›´å¿«ã€‚å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼‰.</p>
<p>æœ€åï¼Œæ‰€æœ‰çš„é›†åˆéƒ½å¯ä»¥ç”¨T[] Collection.toArray( T[] a ) è¿™ä¸ªæ–¹æ³•å¤åˆ¶åˆ°æ•°ç»„ä¸­ã€‚é€šå¸¸ä¼šç”¨è¿™æ ·çš„æ–¹å¼è°ƒç”¨ï¼š<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">return</span> coll.toArray( <span class="keyword">new</span> T[ coll.<span class="built_in">size</span>() ] );</div></pre></td></tr></table></figure></p>
<p>è¿™ä¸ªæ–¹æ³•ä¼šåˆ†é…è¶³å¤Ÿå¤§çš„æ•°ç»„æ¥å‚¨å­˜æ‰€æœ‰çš„é›†åˆï¼Œè¿™æ · toArray åœ¨è¿”å›å€¼æ—¶å°±ä¸å¿…å†åˆ†é…ç©ºé—´äº†ã€‚</p>
<h1 id="Collections"><a href="#Collections" class="headerlink" title="Collections"></a>Collections</h1><p>java.util.Collections</p>
<p><a href="http://www.apihome.cn/api/java/Collections.html" target="_blank" rel="external">Collectionsè¯¦ç»†ä»‹ç»</a></p>
<p>å°±åƒæœ‰ä¸“é—¨çš„java.util.Arraysæ¥å¤„ç†æ•°ç»„ï¼ŒJavaä¸­å¯¹é›†åˆä¹Ÿæœ‰java.util.Collectionsæ¥å¤„ç†ã€‚</p>
<p>ç¬¬ä¸€ç»„æ–¹æ³•ä¸»è¦è¿”å›é›†åˆçš„å„ç§æ•°æ®ï¼š</p>
<p>Collections.checkedCollection / checkedList / checkedMap / checkedSet / checkedSortedMap / checkedSortedSetï¼šæ£€æŸ¥è¦æ·»åŠ çš„å…ƒç´ çš„ç±»å‹å¹¶è¿”å›ç»“æœã€‚ä»»ä½•å°è¯•æ·»åŠ éæ³•ç±»å‹çš„å˜é‡éƒ½ä¼šæŠ›å‡ºä¸€ä¸ªClassCastExceptionå¼‚å¸¸ã€‚è¿™ä¸ªåŠŸèƒ½å¯ä»¥é˜²æ­¢åœ¨è¿è¡Œçš„æ—¶å€™å‡ºé”™ã€‚//fixme</p>
<p>Collections.emptyList / emptyMap / emptySet ï¼šè¿”å›ä¸€ä¸ªå›ºå®šçš„ç©ºé›†åˆï¼Œä¸èƒ½æ·»åŠ ä»»ä½•å…ƒç´ ã€‚</p>
<p>Collections.singleton / singletonList / singletonMapï¼šè¿”å›ä¸€ä¸ªåªæœ‰ä¸€ä¸ªå…¥å£çš„ set/list/map é›†åˆã€‚</p>
<p>Collections.synchronizedCollection / synchronizedList / synchronizedMap / synchronizedSet / synchronizedSortedMap / synchronizedSortedSetï¼šè·å¾—é›†åˆçš„çº¿ç¨‹å®‰å…¨ç‰ˆæœ¬ï¼ˆå¤šçº¿ç¨‹æ“ä½œæ—¶å¼€é”€ä½ä½†ä¸é«˜æ•ˆï¼Œè€Œä¸”ä¸æ”¯æŒç±»ä¼¼putæˆ–updateè¿™æ ·çš„å¤åˆæ“ä½œï¼‰</p>
<p>Collections.unmodifiableCollection / unmodifiableList / unmodifiableMap / unmodifiableSet / unmodifiableSortedMap / unmodifiableSortedSetï¼šè¿”å›ä¸€ä¸ªä¸å¯å˜çš„é›†åˆã€‚å½“ä¸€ä¸ªä¸å¯å˜å¯¹è±¡ä¸­åŒ…å«é›†åˆçš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨æ­¤æ–¹æ³•ã€‚</p>
<p>ç¬¬äºŒç»„æ–¹æ³•ä¸­ï¼Œå…¶ä¸­æœ‰ä¸€äº›æ–¹æ³•å› ä¸ºæŸäº›åŸå› æ²¡æœ‰åŠ å…¥åˆ°é›†åˆä¸­ï¼š</p>
<p>Collections.addAllï¼šæ·»åŠ ä¸€äº›å…ƒç´ æˆ–è€…ä¸€ä¸ªæ•°ç»„çš„å†…å®¹åˆ°é›†åˆä¸­ã€‚</p>
<p>Collections.binarySearchï¼šå’Œæ•°ç»„çš„Arrays.binarySearchåŠŸèƒ½ç›¸åŒã€‚</p>
<p>Collections.disjointï¼šæ£€æŸ¥ä¸¤ä¸ªé›†åˆæ˜¯ä¸æ˜¯æ²¡æœ‰ç›¸åŒçš„å…ƒç´ ã€‚</p>
<p>Collections.fillï¼šç”¨ä¸€ä¸ªæŒ‡å®šçš„å€¼ä»£æ›¿é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚</p>
<p>Collections.frequencyï¼šé›†åˆä¸­æœ‰å¤šå°‘å…ƒç´ æ˜¯å’Œç»™å®šå…ƒç´ ç›¸åŒçš„ã€‚</p>
<p>Collections.indexOfSubList / lastIndexOfSubListï¼šå’ŒString.indexOf(String) / lastIndexOf(String)æ–¹æ³•ç±»ä¼¼â€”â€”æ‰¾å‡ºç»™å®šçš„Listä¸­ç¬¬ä¸€ä¸ªå‡ºç°æˆ–è€…æœ€åä¸€ä¸ªå‡ºç°çš„å­è¡¨ã€‚</p>
<p>Collections.max / minï¼šæ‰¾å‡ºåŸºäºè‡ªç„¶é¡ºåºæˆ–è€…æ¯”è¾ƒå™¨æ’åºçš„é›†åˆä¸­ï¼Œæœ€å¤§çš„æˆ–è€…æœ€å°çš„å…ƒç´ ã€‚</p>
<p>Collections.replaceAllï¼šå°†é›†åˆä¸­çš„æŸä¸€å…ƒç´ æ›¿æ¢æˆå¦ä¸€ä¸ªå…ƒç´ ã€‚</p>
<p>Collections.reverseï¼šé¢ å€’æ’åˆ—å…ƒç´ åœ¨é›†åˆä¸­çš„é¡ºåºã€‚å¦‚æœä½ è¦åœ¨æ’åºä¹‹åä½¿ç”¨è¿™ä¸ªæ–¹æ³•çš„è¯ï¼Œåœ¨åˆ—è¡¨æ’åºæ—¶ï¼Œæœ€å¥½ä½¿ç”¨Collections.reverseOrderæ¯”è¾ƒå™¨ã€‚</p>
<p>Collections.rotateï¼šæ ¹æ®ç»™å®šçš„è·ç¦»æ—‹è½¬å…ƒç´ ã€‚</p>
<p>Collections.shuffleï¼šéšæœºæ’æ”¾Listé›†åˆä¸­çš„èŠ‚ç‚¹ï¼Œå¯ä»¥ç»™å®šä½ è‡ªå·±çš„ç”Ÿæˆå™¨â€”â€”ä¾‹å¦‚java.util.Random / java.util.ThreadLocalRandom or java.security.SecureRandomã€‚</p>
<p>Collections.sortï¼šå°†é›†åˆæŒ‰ç…§è‡ªç„¶é¡ºåºæˆ–è€…ç»™å®šçš„é¡ºåºæ’åºã€‚</p>
<p>Collections.swapï¼šäº¤æ¢é›†åˆä¸­ä¸¤ä¸ªå…ƒç´ çš„ä½ç½®ï¼ˆå¤šæ•°å¼€å‘è€…éƒ½æ˜¯è‡ªå·±å®ç°è¿™ä¸ªæ“ä½œçš„ï¼‰ã€‚</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://liuguoquan727.github.io/2015/12/18/Javaé›†åˆä¹‹Arrayså’ŒCollections/" data-id="cj6ft5esz007sqm19fhlt3m1c" class="article-share-link">åˆ†äº«</a>
      
        <a href="http://liuguoquan727.github.io/2015/12/18/Javaé›†åˆä¹‹Arrayså’ŒCollections/#ds-thread" class="article-comment-link">ç•™è¨€</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Collection/">Collection</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-Javaé›†åˆæ¡†æ¶ç®€ä»‹" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/18/Javaé›†åˆæ¡†æ¶ç®€ä»‹/" class="article-date">
  <time datetime="2015-12-18T13:20:21.000Z" itemprop="datePublished">2015-12-18 21:20:21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Java/">Java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/18/Javaé›†åˆæ¡†æ¶ç®€ä»‹/">Javaé›†åˆæ¡†æ¶ç®€ä»‹</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <p>Javaé›†åˆä»£è¡¨äº†ä¸€ç»„å¯¹è±¡ã€‚Javaä¸­çš„é›†åˆæ¡†æ¶å®šä¹‰äº†ä¸€å¥—è§„èŒƒï¼Œç”¨æ¥è¡¨ç¤ºã€æ“ä½œé›†åˆï¼Œä½¿å…·ä½“æ“ä½œä¸å®ç°ç»†èŠ‚è§£è€¦ã€‚</p>
<h1 id="ä¸¤å¤§åŸºç±»Collectionä¸Map"><a href="#ä¸¤å¤§åŸºç±»Collectionä¸Map" class="headerlink" title="ä¸¤å¤§åŸºç±»Collectionä¸Map"></a>ä¸¤å¤§åŸºç±»Collectionä¸Map</h1><p>åœ¨é›†åˆæ¡†æ¶çš„ç±»ç»§æ‰¿ä½“ç³»ä¸­ï¼Œæœ€é¡¶å±‚æœ‰ä¸¤ä¸ªæ¥å£ï¼š</p>
<ul>
<li>Collectionè¡¨ç¤ºä¸€ç»„çº¯æ•°æ®</li>
<li>Mapè¡¨ç¤ºä¸€ç»„key-valueé”®å€¼å¯¹</li>
</ul>
<p>ä¸€èˆ¬ç»§æ‰¿è‡ªCollectionæˆ–Mapçš„é›†åˆç±»ï¼Œä¼šæä¾›ä¸¤ä¸ªæ ‡å‡†çš„æ„é€ å‡½æ•°ï¼š</p>
<ul>
<li>æ²¡æœ‰å‚æ•°çš„æ„é€ å‡½æ•°ï¼Œåˆ›å»ºä¸€ä¸ªç©ºçš„é›†åˆç±»ï¼Œå¦‚ArrayList()</li>
<li>æœ‰ä¸€ä¸ªç±»å‹ä¸åŸºç±»ï¼ˆCollectionæˆ–Mapï¼‰ç›¸åŒçš„æ„é€ å‡½æ•°ï¼Œåˆ›å»ºä¸€ä¸ªä¸ç»™å®šå‚æ•°å…·æœ‰ç›¸åŒå…ƒç´ çš„æ–°é›†åˆç±»ï¼Œå¦‚ArrayList(Collection&lt;? extends E&gt; c)</li>
</ul>
<h2 id="Collection"><a href="#Collection" class="headerlink" title="Collection"></a>Collection</h2><p>å…ˆçœ‹çœ‹å¸¸ç”¨çš„Collectioné›†åˆç±»</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/Collection.png" alt="Collection"></p>
<p>Collectionç±»ä¸»è¦æœ‰ä¸‰ä¸ªæ¥å£ï¼š</p>
<ul>
<li>Setè¡¨ç¤ºä¸å…è®¸æœ‰é‡å¤å…ƒç´ çš„é›†åˆ</li>
<li>Listè¡¨ç¤ºå…è®¸æœ‰é‡å¤å…ƒç´ çš„é›†åˆ</li>
<li>Queueä¸»è¦ç”¨äºå­˜å‚¨æ•°æ®è€Œä¸æ˜¯å¤„ç†æ•°æ®</li>
</ul>
<h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h2><p>ä¸‹å›¾ä¸ºå¸¸ç”¨çš„Mapé›†åˆç±»</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/Map.png" alt="Map"></p>
<p>Mapå¹¶ä¸æ˜¯ä¸€ä¸ªçœŸæ­£æ„ä¹‰ä¸Šçš„é›†åˆï¼Œä½†æ˜¯è¿™ä¸ªæ¥å£æä¾›äº†ä¸‰ç§â€œé›†åˆè§†è§’â€ï¼Œä½¿å¾—å¯ä»¥åƒæ“ä½œé›†åˆä¸€æ ·æ“ä½œä»–ä»¬ã€‚å…·ä½“å¦‚ä¸‹ï¼š</p>
<ul>
<li>æŠŠMapçš„å†…å®¹çœ‹æˆkeyçš„é›†åˆ</li>
<li>æŠŠMapçš„å†…å®¹çœ‹æˆvalueçš„é›†åˆ</li>
<li>æŠŠMapçš„å†…å®¹çœ‹æˆkey-valueæ˜ å°„çš„é›†åˆ</li>
</ul>
<h1 id="Javaé›†åˆä¸æ•°æ®ç»“æ„"><a href="#Javaé›†åˆä¸æ•°æ®ç»“æ„" class="headerlink" title="Javaé›†åˆä¸æ•°æ®ç»“æ„"></a>Javaé›†åˆä¸æ•°æ®ç»“æ„</h1><h2 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h2><p>ç‰¹ç‚¹ï¼šå¯ä»¥éšæœºè®¿é—®ï¼ŒæŸ¥è¯¢æ•ˆç‡è¾ƒé«˜ï¼Œå¢åˆ æ•ˆç‡è¾ƒä½ã€å†…å­˜å›ºå®š</p>
<p>Javaé›†åˆï¼šArrayListã€Vector</p>
<h2 id="é“¾è¡¨"><a href="#é“¾è¡¨" class="headerlink" title="é“¾è¡¨"></a>é“¾è¡¨</h2><p>ç‰¹ç‚¹ï¼šæ’å…¥å’Œåˆ é™¤æ•ˆç‡é«˜ï¼ŒæŸ¥è¯¢æ•ˆç‡ä½</p>
<p>Javaé›†åˆï¼šLinkedListã€LinkedHashMapã€LinkedHashSet</p>
<h2 id="å“ˆå¸Œè¡¨"><a href="#å“ˆå¸Œè¡¨" class="headerlink" title="å“ˆå¸Œè¡¨"></a>å“ˆå¸Œè¡¨</h2><p>ç‰¹ç‚¹ï¼šæŸ¥æ‰¾æ•ˆç‡é«˜ï¼Œæ’å…¥å’Œåˆ é™¤è¾ƒå¿«ï¼Œå†…å­˜å›ºå®šï¼Œå­˜åœ¨æ•£åˆ—å†²çªã€‚</p>
<p>Javaé›†åˆï¼šHashMapã€HashSetã€HashTableã€LinkedHashMapã€LinkedHashSet</p>
<h2 id="å †"><a href="#å †" class="headerlink" title="å †"></a>å †</h2><p>ç‰¹ç‚¹ï¼šæ’å…¥ã€åˆ é™¤æ•ˆç‡é«˜ï¼Œå¯¹æœ€å¤§é¡¹ã€æœ€å°é¡¹å­˜å‚¨å¿«ï¼Œå…¶ä»–é¡¹å­˜å–è¾ƒæ…¢ã€‚</p>
<p>Javaé›†åˆï¼šPriorityQueueï¼ˆäºŒå‰å †å®ç°çš„ä¼˜å…ˆé˜Ÿåˆ—ï¼‰</p>
<h2 id="æ ˆ"><a href="#æ ˆ" class="headerlink" title="æ ˆ"></a>æ ˆ</h2><p>ç‰¹ç‚¹ï¼šå…ˆè¿›åå‡ºï¼ˆFILOï¼‰</p>
<p>Javaé›†åˆï¼šStack</p>
<h2 id="é˜Ÿåˆ—"><a href="#é˜Ÿåˆ—" class="headerlink" title="é˜Ÿåˆ—"></a>é˜Ÿåˆ—</h2><p>ç‰¹ç‚¹ï¼šå…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰</p>
<p>Javaé›†åˆï¼šArrayDequeï¼ˆåŒç«¯é˜Ÿåˆ—ï¼‰ã€LinkedListï¼ˆåŒç«¯é˜Ÿåˆ—ï¼‰</p>
<h2 id="æ ‘"><a href="#æ ‘" class="headerlink" title="æ ‘"></a>æ ‘</h2><p>ç‰¹ç‚¹ï¼šæŸ¥è¯¢ã€åˆ é™¤ã€æ’å…¥éƒ½æ¯”è¾ƒå¿«ï¼Œä½†ç®—æ³•å¤æ‚</p>
<p>Javaé›†åˆï¼šTreeMapï¼ˆçº¢é»‘æ ‘ï¼‰ã€TreeSetï¼ˆçº¢é»‘æ ‘ï¼‰</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://liuguoquan727.github.io/2015/12/18/Javaé›†åˆæ¡†æ¶ç®€ä»‹/" data-id="cj6ft5et8008lqm19bhk8x4ec" class="article-share-link">åˆ†äº«</a>
      
        <a href="http://liuguoquan727.github.io/2015/12/18/Javaé›†åˆæ¡†æ¶ç®€ä»‹/#ds-thread" class="article-comment-link">ç•™è¨€</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Collection/">Collection</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-Httpåè®®è¯¦è§£" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/18/Httpåè®®è¯¦è§£/" class="article-date">
  <time datetime="2015-12-18T13:08:05.000Z" itemprop="datePublished">2015-12-18 21:08:05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/ç½‘ç»œé€šä¿¡/">ç½‘ç»œé€šä¿¡</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/18/Httpåè®®è¯¦è§£/">Httpåè®®è¯¦è§£</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <p>HTTPæ˜¯ä¸€ç§åº”ç”¨å±‚åè®®ï¼Œå®ƒé€šè¿‡TCPå®ç°äº†å¯é çš„æ•°æ®ä¼ è¾“ï¼Œèƒ½å¤Ÿä¿è¯æ•°æ®çš„å®Œæ•´æ€§ã€æ­£ç¡®æ€§ï¼Œè€ŒTCPå¯¹äºæ•°æ®ä¼ è¾“æ§åˆ¶çš„ä¼˜ç‚¹ä¹Ÿèƒ½å¤Ÿä½“ç°åœ¨HTTPä¸Šï¼Œä½¿å¾—HTTPçš„æ•°æ®ä¼ è¾“ååé‡ã€æ•ˆç‡å¾—åˆ°ä¿è¯ã€‚</p>
<p>å¯¹äºç§»åŠ¨å¼€å‘æ¥è¯´ï¼Œç½‘ç»œåº”ç”¨åŸºæœ¬ä¸Šéƒ½æ˜¯C/Sæ¶æ„ï¼Œä¹Ÿå°±æ˜¯å®¢æˆ·ç«¯/æœåŠ¡å™¨æ¶æ„ã€‚å®¢æˆ·ç«¯é€šè¿‡å‘æœåŠ¡å™¨å‘èµ·ç‰¹å®šçš„è¯·æ±‚ï¼ŒæœåŠ¡å™¨è¿”å›ç»“æœï¼Œå®¢æˆ·ç«¯è§£æç»“æœï¼Œå†å°†ç»“æœå±•ç¤ºåœ¨UIä¸Šã€‚å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨çš„äº¤äº’å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/http-%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%B8%8E%E6%9C%8D%E5%8A%A1%E7%AB%AF%E7%9A%84%E4%BA%A4%E4%BA%92.png" alt=""></p>
<p>è¯¦ç»†çš„äº¤äº’æµç¨‹æœ‰å¦‚ä¸‹å‡ æ­¥ï¼š</p>
<ol>
<li>å®¢æˆ·ç«¯æ‰§è¡Œç½‘ç»œè¯·æ±‚ï¼Œä»URLè§£æå‡ºæœåŠ¡å™¨çš„ä¸»æœºåã€‚</li>
<li>å°†æœåŠ¡å™¨çš„ä¸»æœºåè½¬æ¢æˆæœåŠ¡å™¨çš„IPåœ°å€ã€‚</li>
<li>å°†ç«¯å£å·ä»URLä¸­è§£æå‡ºæ¥</li>
<li>å»ºç«‹ä¸€æ¡å®¢æˆ·ç«¯ä¸WebæœåŠ¡å™¨çš„TCPè¿æ¥ï¼›</li>
<li>å®¢æˆ·ç«¯é€šè¿‡è¾“å‡ºæµå‘æœåŠ¡å™¨å‘é€ä¸€æ¡HTTPè¯·æ±‚ï¼›</li>
<li>æœåŠ¡å™¨å‘å®¢æˆ·ç«¯è¿”å›ä¸€æ¡HTTPå“åº”æŠ¥æ–‡ï¼›</li>
<li>å®¢æˆ·ç«¯ä»è¾“å…¥æµè·å–æŠ¥æ–‡ï¼›</li>
<li>å®¢æˆ·ç«¯è§£ææŠ¥æ–‡ï¼Œå…³é—­è¿æ¥ï¼›</li>
<li>å®¢æˆ·ç«¯å°†ç»“æœæ˜¾ç¤ºåœ¨UIä¸Šï¼›</li>
</ol>
<h1 id="HTTPè¯·æ±‚æ–¹å¼"><a href="#HTTPè¯·æ±‚æ–¹å¼" class="headerlink" title="HTTPè¯·æ±‚æ–¹å¼"></a>HTTPè¯·æ±‚æ–¹å¼</h1><p>HTTPæä¾›äº†å‡ ç§è¯·æ±‚æ–¹å¼ï¼Œæ¯ç§è¯·æ±‚æ–¹å¼éƒ½æœ‰ä¸åŒçš„ä½œç”¨ã€‚è¢«å¤§å®¶ç†ŸçŸ¥çš„è¯·æ±‚æ–¹å¼æœ‰7ç§GETã€POSTã€DELETEã€PUTã€HEADã€TRACEã€OPTIONSã€‚å…¶ä¸­PUTã€DELETEã€POSTã€GETåˆ†åˆ«å¯¹åº”ç€å¢ã€åˆ ã€è¯¥ã€æŸ¥4ä¸ªæ“ä½œï¼Œä¹Ÿæ˜¯å®¢æˆ·ç«¯è¿ç”¨æœ€å¤šçš„4ä¸ªè¯·æ±‚ã€‚</p>
<h2 id="GETè¯·æ±‚"><a href="#GETè¯·æ±‚" class="headerlink" title="GETè¯·æ±‚"></a>GETè¯·æ±‚</h2><p>GETçš„ä½œç”¨æ˜¯è·å–æœåŠ¡å™¨çš„æŸä¸ªèµ„æºã€‚ä¸‹å›¾æä¾›ä¸€ä¸ªä¾‹å­ï¼Œå®¢æˆ·ç«¯ç”¨GETæ–¹æ³•å‘èµ·ä¸€æ¬¡HTTPè¯·æ±‚ï¼Œç„¶åæœåŠ¡ç«¯å°†å¯¹åº”çš„èµ„æºè¿”å›å®¢æˆ·ç«¯ã€‚</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/http-Get%E8%AF%B7%E6%B1%82.png" alt=""></p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šGETè¯·æ±‚çš„å‚æ•°éƒ½éœ€è¦æ”¾åˆ°è¯·æ±‚çš„URLä¸­ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¹‹å‰æœ‰ä¸€ä¸ªï¼Ÿï¼Œå‚æ•°çš„æ ¼å¼ä¸ºï¼šå‚æ•°å=å‚æ•°å€¼ã€‚å‚æ•°ä¹‹é—´é€šè¿‡â€œ&amp;â€è¿æ¥ã€‚</p>
<h2 id="POSTè¯·æ±‚"><a href="#POSTè¯·æ±‚" class="headerlink" title="POSTè¯·æ±‚"></a>POSTè¯·æ±‚</h2><p>POSTèµ·åˆæ˜¯ç”¨æ¥å‘æœåŠ¡å™¨ä¼ é€’æ•°æ®çš„ã€‚POSTè¯·æ±‚é€šå¸¸ä¼šç”¨æ¥æäº¤HTMLçš„è¡¨å•ã€‚è¡¨å•ä¸­å¡«å¥½çš„æ•°æ®ä¼šè¢«ä¼ è¾“ç»™æœåŠ¡å™¨ï¼Œç„¶åç”±æœåŠ¡å™¨å¯¹è¿™äº›æ•°æ®è¿›è¡Œå¤„ç†ã€‚ä¸‹å›¾æ˜¾ç¤ºä¸€ä¸ªç”¨POSTè¯·æ±‚çš„æ‰§è¡Œæµç¨‹ã€‚</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/http-POST%E8%AF%B7%E6%B1%82.png" alt=""></p>
<h2 id="PUTè¯·æ±‚"><a href="#PUTè¯·æ±‚" class="headerlink" title="PUTè¯·æ±‚"></a>PUTè¯·æ±‚</h2><p>ä¸GETä»æœåŠ¡å™¨è¯»å–èµ„æºç›¸åï¼ŒPUTæ–¹æ³•ä¼šå‘æœåŠ¡å™¨å†™å…¥èµ„æºã€‚æœ‰äº›å‘å¸ƒç³»ç»Ÿå…è®¸ç”¨æˆ·åˆ›å»ºWebé¡µé¢ï¼Œå¹¶ç”¨PUTç›´æ¥å°†å…¶ä¼ è¾“åˆ°WebæœåŠ¡å™¨ä¸Šã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/http-PUT%E8%AF%B7%E6%B1%82.png" alt=""></p>
<p>PUTæ–¹æ³•çš„è¯­ä¹‰å°±æ˜¯è®©æœåŠ¡å™¨ç”¨è¯·æ±‚çš„ä¸»é¢˜éƒ¨åˆ†æ¥åˆ›å»ºä¸€ä¸ªç”±æ‰€è¯·æ±‚çš„URLå‘½åçš„æ–°æ–‡æ¡£ï¼Œå¦‚æœé‚£ä¸ªURLå·²ç»å­˜åœ¨çš„è¯ï¼Œå°±ç”¨è¿™ä¸ªèµ„æºæ¥æ›¿ä»£å®ƒã€‚</p>
<h2 id="DELETEè¯·æ±‚"><a href="#DELETEè¯·æ±‚" class="headerlink" title="DELETEè¯·æ±‚"></a>DELETEè¯·æ±‚</h2><p>DELETEæ–¹æ³•æ‰€åšçš„äº‹æƒ…å°±æ˜¯è¯·æœåŠ¡å™¨åˆ é™¤è¯·æ±‚URLæ‰€æŒ‡å®šçš„èµ„æºã€‚ä½†æ˜¯ï¼Œå®¢æˆ·ç«¯æ— æ³•ä¿è¯åˆ é™¤æ“ä½œä¸€å®šä¼šè¢«æ‰§è¡Œã€‚å› ä¸ºï¼ŒHTTPè§„èŒƒå…è®¸æœåŠ¡å™¨åœ¨ä¸é€šçŸ¥å®¢æˆ·ç«¯çš„æƒ…å†µä¸‹æ’¤é”€è¯·æ±‚ã€‚</p>
<p>DELETEæ–¹å¼ä¸GETè¯·æ±‚ä¸€æ ·ï¼Œå‚æ•°éƒ½éœ€è¦æ”¾åœ¨è¯·æ±‚çš„URLä¸­ã€‚ä¸‹å›¾æ˜¾ç¤ºäº†ä¸€ä¸ªDELETEæ–¹æ³•å®ä¾‹ã€‚</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/http-DELETE%E8%AF%B7%E6%B1%82.png" alt=""></p>
<h2 id="HEADè¯·æ±‚"><a href="#HEADè¯·æ±‚" class="headerlink" title="HEADè¯·æ±‚"></a>HEADè¯·æ±‚</h2><p>HEADæ–¹æ³•ä¸GETæ–¹æ³•çš„è¡Œä¸ºå¾ˆç±»ä¼¼ï¼Œä½†æœåŠ¡å™¨åœ¨å“åº”ä¸­åªè¿”å›é¦–éƒ¨ã€‚ä¸ä¼šè¿”å›å®ä½“çš„ä¸»ä½“éƒ¨åˆ†ï¼Œè¿™å°±å…è®¸å®¢æˆ·ç«¯åœ¨æœªè·å–å®é™…èµ„æºçš„æƒ…å†µä¸‹ï¼Œå¯¹èµ„æºçš„é¦–éƒ¨è¿›è¡Œæ£€æŸ¥ã€‚ä½¿ç”¨HEADå¯ä»¥åœ¨ä¸è·å–èµ„æºçš„æƒ…å†µä¸‹äº†è§£èµ„æºçš„æƒ…å†µï¼ˆæ¯”å¦‚ï¼Œåˆ¤æ–­å…¶ç±»å‹ï¼‰ï¼›é€šè¿‡æŸ¥çœ‹å“åº”ä¸­çš„çŠ¶æ€ç ï¼Œçœ‹çœ‹æŸä¸ªå¯¹è±¡æ˜¯å¦å­˜åœ¨ï¼›é€šè¿‡æŸ¥çœ‹é¦–éƒ¨ï¼Œæµ‹è¯•èµ„æºæ˜¯å¦è¢«ä¿®æ”¹äº†ã€‚æœåŠ¡å™¨å¼€å‘è€…å¿…é¡»ç¡®ä¿è¿”å›çš„é¦–éƒ¨ä¸GETè¯·æ±‚æ‰€è¿”å›çš„é¦–éƒ¨å®Œå…¨ç›¸åŒã€‚éµå¾ªHTTP/1.1è§„èŒƒï¼Œå°±å¿…é¡»å®ç°HEADæ–¹æ³•ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/http-HEAD%E8%AF%B7%E6%B1%82.png" alt=""></p>
<h2 id="TRACEè¯·æ±‚"><a href="#TRACEè¯·æ±‚" class="headerlink" title="TRACEè¯·æ±‚"></a>TRACEè¯·æ±‚</h2><p>å®¢æˆ·ç«¯å‘èµ·ä¸€ä¸ªè¯·æ±‚æ—¶ï¼Œè¿™ä¸ªè¯·æ±‚å¯èƒ½è¦ç©¿è¶Šé˜²ç«å¢™ã€ä»£ç†ã€ç½‘å…³æˆ–å…¶ä»–ä¸€äº›åº”ç”¨ç¨‹åºã€‚æ¯ä¸ªä¸­é—´èŠ‚ç‚¹éƒ½å¯èƒ½ä¼šä¿®æ”¹åŸå§‹çš„HTTPè¯·æ±‚ã€‚TRACEæ–¹æ³•è¿è¡Œå®¢æˆ·ç«¯åœ¨æœ€ç»ˆå°†è¯·æ±‚å‘é€ç»™æœåŠ¡å™¨æ—¶ï¼Œçœ‹çœ‹å®ƒå˜æˆäº†ä»€ä¹ˆæ ·å­ã€‚</p>
<p>TRACEè¯·æ±‚ä¼šåœ¨ç›®çš„æœåŠ¡ç«¯å‘èµ·ä¸€ä¸ªâ€œç¯å›â€è¯Šæ–­ã€‚è¡Œç¨‹æœ€åä¸€ç«™çš„æœåŠ¡å™¨ä¼šå¼¹å›ä¸€æ¡TRACEå“åº”ï¼Œå¹¶åœ¨å“åº”ä¸»ä½“ä¸­æºå¸¦å®ƒæ”¶åˆ°çš„åŸå§‹è¯·æ±‚æŠ¥æ–‡ã€‚è¿™æ ·å®¢æˆ·ç«¯å°±å¯ä»¥æŸ¥çœ‹åœ¨æ‰€æœ‰ä¸­é—´HTTPåº”ç”¨ç¨‹åºç»„æˆçš„è¯·æ±‚/å“åº”é“¾ä¸Šï¼ŒåŸå§‹æŠ¥æ–‡æ˜¯å¦ä»¥åŠå¦‚ä½•è¢«æ¯åæˆ–ä¿®æ”¹è¿‡ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/http-TRACE%E8%AF%B7%E6%B1%82.png" alt=""></p>
<p>TRACEæ–¹æ³•ä¸»è¦ç”¨äºè¯Šæ–­ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨äºéªŒè¯è¯·æ±‚æ˜¯å¦å¦‚æ„¿ç©¿è¿‡äº†è¯·æ±‚/å“åº”é“¾ã€‚</p>
<h2 id="OPTIONSè¯·æ±‚"><a href="#OPTIONSè¯·æ±‚" class="headerlink" title="OPTIONSè¯·æ±‚"></a>OPTIONSè¯·æ±‚</h2><p>OPTIONSæ–¹æ³•è¯·æ±‚WebæœåŠ¡å™¨å‘ŠçŸ¥å…¶æ”¯æŒçš„å„ç§åŠŸèƒ½ã€‚å¯ä»¥è¯¢é—®æœåŠ¡å™¨é€šå¸¸æ”¯æŒå“ªäº›æ–¹æ³•ï¼Œæˆ–è€…å¯¹æŸäº›ç‰¹æ®Šèµ„æºæ”¯æŒå“ªäº›æ–¹æ³•ï¼ˆæœ‰äº›æœåŠ¡å™¨å¯èƒ½åªæ”¯æŒå¯¹ä¸€ç§ç‰¹æ®Šç±»å‹çš„å¯¹è±¡ä½¿ç”¨ç‰¹å®šçš„æ“ä½œï¼‰è¿™ä¸ºå®¢æˆ·ç«¯åº”ç”¨ç¨‹åºæä¾›äº†ä¸€ç§æ‰‹æ®µï¼Œä½¿å…¶ä¸ç”¨å®é™…è®¿é—®é‚£äº›èµ„æºå°±èƒ½åˆ¤å®šè®¿é—®å„ç§èµ„æºæœ€ä¼˜æ–¹å¼ï¼‰ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/http-OPTIONS%E8%AF%B7%E6%B1%82.png" alt=""></p>
<h1 id="HTTPæŠ¥æ–‡æ ¼å¼"><a href="#HTTPæŠ¥æ–‡æ ¼å¼" class="headerlink" title="HTTPæŠ¥æ–‡æ ¼å¼"></a>HTTPæŠ¥æ–‡æ ¼å¼</h1><h2 id="è¯·æ±‚æŠ¥æ–‡"><a href="#è¯·æ±‚æŠ¥æ–‡" class="headerlink" title="è¯·æ±‚æŠ¥æ–‡"></a>è¯·æ±‚æŠ¥æ–‡</h2><p>é€šå¸¸ä¸€ä¸ªHTTPè¯·æ±‚æŠ¥æ–‡ç”±è¯·æ±‚è¡Œï¼ˆrequest lineï¼‰ã€è¯·æ±‚å¤´éƒ¨ï¼ˆheaderï¼‰ã€ç©ºè¡Œå’Œè¯·æ±‚æ•°æ®4ä¸ªéƒ¨åˆ†ç»„æˆã€‚ä¸‹å›¾ä¸ºè¯·æ±‚æŠ¥æ–‡çš„ä¸€èˆ¬æ ¼å¼ã€‚</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/http-%E6%8A%A5%E6%96%87%E6%A0%BC%E5%BC%8F.jpg" alt=""></p>
<ul>
<li><strong>èµ·å§‹è¡Œ</strong></li>
</ul>
<p>æŠ¥æ–‡çš„ç¬¬ä¸€è¡Œå°±æ˜¯èµ·å§‹è¡Œï¼Œåœ¨è¯·æ±‚æŠ¥æ–‡ä¸­ç”¨æ¥è¯´æ˜è¦ä»¥è¯´æ˜æ–¹å¼åšä»€ä¹ˆè¯·æ±‚ï¼Œè€Œåœ¨å“åº”æŠ¥æ–‡ä¸­åˆç•¥è¯´æ˜äº†æŠ¥æ–‡çš„æ‰§è¡Œç»“æœã€‚</p>
<ul>
<li><strong>é¦–éƒ¨å­—æ®µ</strong></li>
</ul>
<p>èµ·å§‹è¡Œåé¢æœ‰é›¶ä¸ªæˆ–å¤šä¸ªé¦–éƒ¨å­—æ®µã€‚æ¯ä¸ªé¦–éƒ¨å­—æ®µéƒ½åŒ…å«ä¸€ä¸ªåå­—å’Œä¸€ä¸ªå€¼ï¼Œä¸ºäº†ä¾¿äºè§£æï¼Œä¸¤è€…ä¹‹é—´ç”¨å†’å·ï¼ˆå¦‚Connectionï¼škeep-Aliveï¼‰æ¥åˆ†éš”ã€‚é¦–éƒ¨ä»¥ä¸€ä¸ªç©ºè¡Œç»“æŸã€‚æ·»åŠ ä¸€ä¸ªé¦–éƒ¨å­—æ®µå’Œæ·»åŠ æ–°è¡Œä¸€æ ·ç®€å•ã€‚</p>
<ul>
<li><strong>ä¸»ä½“</strong></li>
</ul>
<p>é¦–éƒ¨å­—æ®µçš„ç©ºè¡Œä¹‹åå°±æ˜¯å¯é€‰çš„æŠ¥æ–‡ä¸»ä½“äº†ï¼Œå…¶ä¸­åŒ…å«äº†æ‰€ä»¥ç±»å‹çš„æ•°æ®ã€‚è¯·æ±‚ä¸»ä½“ä¸­åŒ…æ‹¬äº†è¦å‘é€ç»™WebæœåŠ¡å™¨çš„æ•°æ®ï¼›å“åº”ä¸»ä½“ä¸­è£…è½½äº†è¦è¿”å›ç»™å®¢æˆ·ç«¯çš„æ•°æ®ã€‚èµ·å§‹è¡Œå’Œé¦–éƒ¨éƒ½æ˜¯ç»“æ„åŒ–çš„æ–‡æœ¬å½¢å¼ï¼Œè€Œä¸»ä½“åˆ™å¯ä»¥åŒ…å«ä»»æ„çš„äºŒè¿›åˆ¶æ•°æ®ï¼ˆå¦‚å›¾ç‰‡ã€è§†é¢‘ã€éŸ³è½¨ã€è½¯ä»¶ç¨‹åºï¼‰ã€‚å½“ç„¶ï¼Œä¸»ä½“ä¸­ä¹Ÿå¯ä»¥åŒ…å«æ–‡æœ¬ã€‚</p>
<h2 id="å“åº”æŠ¥æ–‡"><a href="#å“åº”æŠ¥æ–‡" class="headerlink" title="å“åº”æŠ¥æ–‡"></a>å“åº”æŠ¥æ–‡</h2><p>HTTPå“åº”ä¹Ÿç”±3ä¸ªéƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«æ˜¯ï¼šçŠ¶æ€è¡Œã€æ¶ˆæ¯æŠ¥å¤´ã€å“åº”æ­£æ–‡ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼ŒHTTPå“åº”çš„æ ¼å¼ä¸è¯·æ±‚çš„æ ¼å¼ååˆ†ç±»ä¼¼ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">çŠ¶æ€è¡Œ</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">å“åº”æŠ¥æ–‡header</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">ç©ºè¡Œ</span>&gt;</span></div><div class="line">[å“åº”æŠ¥æ–‡å†…å®¹]</div></pre></td></tr></table></figure>
<p>åœ¨å“åº”æŠ¥æ–‡ä¸­ç¬¬ä¸€è¡Œç”¨çŠ¶æ€ä¿¡æ¯ä»£æ›¿äº†è¯·æ±‚ä¿¡æ¯ã€‚çŠ¶æ€è¡Œé€šè¿‡æä¾›ä¸€ä¸ªçŠ¶æ€ç æ¥è¯´æ˜æ‰€è¯·æ±‚çš„èµ„æºæƒ…å†µã€‚<br>çŠ¶æ€è¡Œæ ¼å¼ï¼š<br>  HTTP-Version Status-Code Reason-Phrase CRLF</p>
<p>HTTP-Versionè¡¨ç¤ºæœåŠ¡å™¨HTTPåè®®çš„ç‰ˆæœ¬ï¼›<br>Status-Codeè¡¨ç¤ºæœåŠ¡å™¨å‘å›çš„å“åº”çŠ¶æ€ä»£ç ï¼›<br>Reason-Phraseè¡¨ç¤ºçŠ¶æ€ä»£ç çš„æ–‡æœ¬æè¿°ï¼›</p>
<p>çŠ¶æ€ç ç”±ä¸‰ä½æ•°å­—ç»„æˆï¼Œç¬¬ä¸€ä¸ªæ•°å­—å®šä¹‰äº†å“åº”çš„ç±»åˆ«ï¼Œä¸”æœ‰5ä¸­å¯èƒ½å–å€¼ã€‚</p>
<table>
<thead>
<tr>
<th>å–å€¼èŒƒå›´</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>100~199</td>
<td>æŒ‡ç¤ºä¿¡æ¯ã€‚è¡¨ç¤ºè¯·æ±‚å·²æ¥æ”¶ï¼Œç»§ç»­å¤„ç†</td>
</tr>
<tr>
<td>200~299</td>
<td>è¯·æ±‚æˆåŠŸã€‚è¡¨ç¤ºè¯·æ±‚å·²è¢«æˆåŠŸæ¥æ”¶ç†è§£</td>
</tr>
<tr>
<td>300~399</td>
<td>é‡å®šå‘ã€‚è¦å®Œæˆè¯·æ±‚å¿…é¡»è¿›è¡Œæ›´è¿›ä¸€æ­¥çš„æ“ä½œ</td>
</tr>
<tr>
<td>400~499</td>
<td>å®¢æˆ·ç«¯é”™è¯¯ã€‚è¯·æ±‚æœ‰è¯­æ³•é”™è¯¯æˆ–è¯·æ±‚æ— æ³•å®ç°</td>
</tr>
<tr>
<td>500~599</td>
<td>æœåŠ¡å™¨ç«¯é”™è¯¯ã€‚æœåŠ¡å™¨æœªèƒ½å®ç°åˆæ³•çš„è¯·æ±‚</td>
</tr>
</tbody>
</table>
<p>å¸¸è§çŠ¶æ€ä»£ç ã€çŠ¶æ€æè¿°çš„è¯´æ˜å¦‚ä¸‹ï¼š</p>
<ul>
<li>200 OK:å®¢æˆ·ç«¯è¯·æ±‚æˆåŠŸ</li>
<li>202 Accepted æœåŠ¡å™¨å·²æ¥æ”¶è¯·æ±‚ï¼Œä½†å°šæœªå¤„ç†ã€‚</li>
<li>400 Bad Requestï¼šå®¢æˆ·ç«¯è¯·æ±‚æœ‰è¯­æ³•é”™è¯¯ï¼Œä¸èƒ½è¢«æœåŠ¡å™¨æ‰€ç†è§£</li>
<li>401 Unauthorizedï¼šè¯·æ±‚æœªæˆæƒï¼Œè¿™ä¸ªçŠ¶æ€ç å¿…é¡»å’ŒWWW-AuthenticateæŠ¥å¤´åŸŸä¸€èµ·ä½¿ç”¨ã€‚</li>
<li>403 Forbiddenï¼šæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ï¼Œä½†æ˜¯æ‹’ç»æä¾›æœåŠ¡ã€‚</li>
<li>404 Not Foundï¼šè¯·æ±‚èµ„æºä¸å­˜åœ¨ï¼Œä¸¾ä¸ªä¾‹å­ï¼šè¾“å…¥äº†é”™è¯¯çš„URLã€‚</li>
<li>408 Request Timeout è¯·æ±‚è¶…æ—¶</li>
<li>500 Internal Server Errorï¼šæœåŠ¡å™¨å‘ç”Ÿä¸å¯é¢„æœŸçš„é”™è¯¯ã€‚</li>
<li>502 Bad Gateway é”™è¯¯çš„ç½‘å…³</li>
<li>503 Server Unavailableï¼šæœåŠ¡å™¨å½“å‰ä¸èƒ½å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œä¸€æ®µæ—¶é—´åå¯èƒ½æ¢å¤æ­£å¸¸ï¼Œä¸¾ä¸ªä¾‹å­ï¼šHTTP/1.1 200 OK</li>
<li>504 ç½‘å…³è¶…æ—¶</li>
</ul>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªGETå»è¯·æ±‚çš„Responseè¿”å›ç¤ºä¾‹ï¼š</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">HTTP/<span class="number">1.1</span> <span class="number">200</span> OK</div><div class="line"><span class="symbol">Date:</span>Sat, <span class="number">31</span> Dec <span class="number">2005</span> <span class="number">23</span>:<span class="number">59</span>:<span class="number">59</span> GMT</div><div class="line">Content-Type: text/html;charset=utf<span class="number">-8</span></div><div class="line">Content-Length: <span class="number">122</span></div><div class="line"></div><div class="line"><span class="params">&lt;html&gt;</span></div><div class="line">	<span class="params">&lt;head&gt;</span></div><div class="line">		<span class="params">&lt;title&gt;</span>å¼€å‘æŠ€æœ¯å‰çº¿<span class="params">&lt;/title&gt;</span></div><div class="line">	<span class="params">&lt;/head&gt;</span></div><div class="line">	</div><div class="line">	<span class="params">&lt;body&gt;</span></div><div class="line">	<span class="params">&lt;/body&gt;</span></div><div class="line"><span class="params">&lt;/html&gt;</span></div></pre></td></tr></table></figure>
<h2 id="è¯·æ±‚å¤´éƒ¨"><a href="#è¯·æ±‚å¤´éƒ¨" class="headerlink" title="è¯·æ±‚å¤´éƒ¨"></a>è¯·æ±‚å¤´éƒ¨</h2><p>è¯·æ±‚å¤´éƒ¨ç”±é”®å€¼å¯¹ç»„æˆï¼Œæ¯è¡Œä¸€å¯¹ï¼Œå…³é”®å­—å’Œå€¼ç”¨è‹±æ–‡å†’å·â€œï¼šâ€åˆ†éš”ã€‚HTTPè§„èŒƒå®šä¹‰äº†å‡ ç§é¦–éƒ¨å­—æ®µï¼Œåº”ç”¨ç¨‹åºä¹Ÿå¯ä»¥éšæ„å‘æ˜è‡ªå·±æ‰€ç”¨çš„å¤´éƒ¨ã€‚HTTPé¦–éƒ¨å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼Œå¦‚è¡¨æ‰€ç¤ºï¼š</p>
<table>
<thead>
<tr>
<th>é¦–éƒ¨ç±»å‹</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>é€šç”¨é¦–éƒ¨</td>
<td>æ—¢å¯ä»¥å‡ºç°åœ¨è¯·æ±‚æŠ¥æ–‡ä¸­ï¼Œä¹Ÿå¯ä»¥å‡ºç°åœ¨å“åº”æŠ¥æ–‡ä¸­</td>
</tr>
<tr>
<td>è¯·æ±‚é¦–éƒ¨</td>
<td>æä¾›æ›´å¤šæœ‰å…³è¯·æ±‚çš„ä¿¡æ¯</td>
</tr>
<tr>
<td>å“åº”é¦–éƒ¨</td>
<td>æä¾›æ›´å¤šæœ‰å…³å“åº”çš„ä¿¡æ¯</td>
</tr>
<tr>
<td>å®ä½“é¦–éƒ¨</td>
<td>æè¿°ä¸»ä½“çš„é•¿åº¦å’Œå†…å®¹ï¼Œæˆ–è€…èµ„æºè‡ªèº«</td>
</tr>
<tr>
<td>æ‰©å±•é¦–éƒ¨</td>
<td>HTTPè§„èŒƒä¸­æ²¡æœ‰å®šä¹‰çš„æ–°é¦–éƒ¨</td>
</tr>
</tbody>
</table>
<p>è¯·æ±‚å¤´éƒ¨é€šçŸ¥æœåŠ¡å™¨å…³äºå®¢æˆ·ç«¯è¯·æ±‚çš„ä¿¡æ¯ï¼Œå…¸å‹çš„è¯·æ±‚å¤´æœ‰ã€‚</p>
<ul>
<li>Content-Typeï¼šè¯·æ±‚æ•°æ®çš„æ ¼å¼</li>
<li>Content-Lengthï¼šæ¶ˆæ¯é•¿åº¦</li>
<li>Hostï¼šè¯·æ±‚çš„ä¸»æœºåï¼Œå…è®¸å¤šä¸ªåŸŸååŒå¤„ä¸€ä¸ªIPåœ°å€ï¼Œå³è™šæ‹Ÿä¸»æœº</li>
<li>User-Agentï¼šå‘å‡ºè¯·æ±‚çš„æµè§ˆå™¨ç±»å‹ï¼Œå¯ä»¥è‡ªè¡Œè®¾ç½®</li>
<li>Acceptï¼šå®¢æˆ·ç«¯å¯è¯†åˆ«çš„å†…å®¹ç±»å‹åˆ—è¡¨</li>
<li>Accept-Encodingï¼šå®¢æˆ·ç«¯å¯è¯†åˆ«çš„æ•°æ®ç¼–ç </li>
<li>Connectionï¼šå…è®¸å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨æŒ‡å®šä¸è¯·æ±‚/å“åº”è¿æ¥æœ‰å…³çš„é€‰é¡¹ï¼Œä¾‹å¦‚è®¾ç½®ä¸ºKeep-Aliveåˆ™è¡¨ç¤ºä¿æŒè¿æ¥</li>
<li>Transfer-Encodingï¼šå‘ŠçŸ¥æ¥æ”¶ç«¯ä¸ºäº†ä¿è¯æŠ¥æ–‡çš„å¯é ä¼ è¾“ï¼Œå¯¹æŠ¥æ–‡é‡‡ç”¨äº†ä»€ä¹ˆç¼–ç æ–¹å¼ã€‚</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://liuguoquan727.github.io/2015/12/18/Httpåè®®è¯¦è§£/" data-id="cj6ft5erq004pqm19opyv8922" class="article-share-link">åˆ†äº«</a>
      
        <a href="http://liuguoquan727.github.io/2015/12/18/Httpåè®®è¯¦è§£/#ds-thread" class="article-comment-link">ç•™è¨€</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/http/">http</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ç½‘ç»œé€šä¿¡/">ç½‘ç»œé€šä¿¡</a></li></ul>

    </footer>
  </div>
  
</article>
 


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/23/">&laquo; ä¸Šä¸€é¡µ</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/22/">22</a><a class="page-number" href="/page/23/">23</a><span class="page-number current">24</span><a class="page-number" href="/page/25/">25</a><a class="page-number" href="/page/26/">26</a><a class="extend next" rel="next" href="/page/25/">ä¸‹ä¸€é¡µ&raquo;</a>
  </nav>
</section>
           
    <aside id="sidebar">
  
    

  
    
  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title recent-posts">æœ€æ–°æ–‡ç« </h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/08/16/Androidå¯åŠ¨æµç¨‹â‘ initè¿›ç¨‹åˆ†æ/">Androidå¯åŠ¨æµç¨‹â‘ initè¿›ç¨‹åˆ†æ</a>
          </li>
        
          <li>
            <a href="/2017/08/15/Androidç³»ç»Ÿæ¶æ„ä¸æºç ç›®å½•/">Androidç³»ç»Ÿæ¶æ„ä¸æºç ç›®å½•</a>
          </li>
        
          <li>
            <a href="/2017/08/14/Macç¼–è¯‘Androidæºç /">Macç¼–è¯‘Androidæºç </a>
          </li>
        
          <li>
            <a href="/2017/06/21/JavaScriptâ‘¦å¯¹è±¡/">JavaScriptâ‘¦å¯¹è±¡</a>
          </li>
        
          <li>
            <a href="/2017/06/19/JavaScriptâ‘¥å¼•ç”¨ç±»å‹RegExp/">JavaScriptâ‘¥å¼•ç”¨ç±»å‹RegExp</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    

  
    
  
    <!--å¾®ä¿¡å…¬ä¼—å·äºŒç»´ç -->


  
</aside>

      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-left">
      &copy; 2014 - 2017 åˆ˜æ¶¤ç”Ÿ&nbsp;|&nbsp;
      ä¸»é¢˜ <a href="https://github.com/giscafer/hexo-theme-cafe/" target="_blank">Cafe</a>
    </div>
     <div id="footer-right">
      è”ç³»æ–¹å¼&nbsp;|&nbsp;michaelliu0727@gmail.com
    </div>
  </div>
</footer>
 <script src="/jquery/jquery.min.js"></script>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">é¦–é¡µ</a>
  
    <a href="/archives" class="mobile-nav-link">å½’æ¡£</a>
  
    <a href="/categories" class="mobile-nav-link">åˆ†ç±»</a>
  
    <a href="/tags" class="mobile-nav-link">æ ‡ç­¾</a>
  
    <a href="/about" class="mobile-nav-link">å…³äº</a>
  
</nav>
    <img class="back-to-top-btn" src="/images/fly-to-top.png"/>
<script>
// Elevator script included on the page, already.
window.onload = function() {
  var elevator = new Elevator({
    selector:'.back-to-top-btn',
    element: document.querySelector('.back-to-top-btn'),
    duration: 1000 // milliseconds
  });
}
</script>
      







<!-- author:forvoid begin -->
<!-- author:forvoid begin -->

<!-- author:forvoid end -->

<!-- author:forvoid end -->


  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      })
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      })
    </script>
    <script type="text/javascript" src="https://cdn.rawgit.com/mathjax/MathJax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


 <script src="/js/is.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>
<script src="/js/elevator.js"></script>
  </div>
</body>
</html>