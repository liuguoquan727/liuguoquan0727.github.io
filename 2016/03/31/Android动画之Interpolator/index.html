<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Android动画之Interpolator | 再读斋</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="简介Interpolator可以翻译成插值器。Android中interpolator的最底层接口如下:
12345678910111213141516171819202122232425262728package android.animation; /** * 时间插值器定义了一个动画的变化率。 * 这让动画让非线性的移动轨迹，例如加速和减速。 * &amp;lt;hr/&amp;gt; * A time i">
<meta property="og:type" content="article">
<meta property="og:title" content="Android动画之Interpolator">
<meta property="og:url" content="http://liuguoquan727.github.io/2016/03/31/Android动画之Interpolator/index.html">
<meta property="og:site_name" content="再读斋">
<meta property="og:description" content="简介Interpolator可以翻译成插值器。Android中interpolator的最底层接口如下:
12345678910111213141516171819202122232425262728package android.animation; /** * 时间插值器定义了一个动画的变化率。 * 这让动画让非线性的移动轨迹，例如加速和减速。 * &amp;lt;hr/&amp;gt; * A time i">
<meta property="og:image" content="http://7xs7a3.com1.z0.glb.clouddn.com/Interpolator-AccelerateInterpolator_1.png">
<meta property="og:image" content="http://7xs7a3.com1.z0.glb.clouddn.com/Interpolator-AccelerateInterpolator_2.png">
<meta property="og:image" content="http://7xs7a3.com1.z0.glb.clouddn.com/Interpolator-DecelerateInterpolator_1.png">
<meta property="og:image" content="http://7xs7a3.com1.z0.glb.clouddn.com/Interpolator-DecelerateInterpolator_2.png">
<meta property="og:image" content="http://7xs7a3.com1.z0.glb.clouddn.com/Interpolator-AccelerateDecelerateInterpolator.png">
<meta property="og:image" content="http://7xs7a3.com1.z0.glb.clouddn.com/Interpolator-BounceInterpolator.png">
<meta property="og:image" content="http://7xs7a3.com1.z0.glb.clouddn.com/Interpolator-AnticipateInterpolator_1.png">
<meta property="og:image" content="http://7xs7a3.com1.z0.glb.clouddn.com/Interpolator-AnticipateInterpolator_2.png">
<meta property="og:image" content="http://7xs7a3.com1.z0.glb.clouddn.com/Interpolator-AnticipateOvershootInterpolator.png">
<meta property="og:image" content="http://7xs7a3.com1.z0.glb.clouddn.com/Interpolator-CycleInterpolator%20png.png">
<meta property="og:image" content="http://7xs7a3.com1.z0.glb.clouddn.com/Interpolator-OvershootInterpolator%20_1.png">
<meta property="og:image" content="http://7xs7a3.com1.z0.glb.clouddn.com/Interpolator-OvershootInterpolator_3.png">
<meta property="og:updated_time" content="2016-04-19T14:42:22.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Android动画之Interpolator">
<meta name="twitter:description" content="简介Interpolator可以翻译成插值器。Android中interpolator的最底层接口如下:
12345678910111213141516171819202122232425262728package android.animation; /** * 时间插值器定义了一个动画的变化率。 * 这让动画让非线性的移动轨迹，例如加速和减速。 * &amp;lt;hr/&amp;gt; * A time i">
<meta name="twitter:image" content="http://7xs7a3.com1.z0.glb.clouddn.com/Interpolator-AccelerateInterpolator_1.png">
  
    <link rel="alternate" href="/atom.xml" title="再读斋" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    
    <div id="header-inner" class="inner">
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://liuguoquan727.github.io"></form>
      </div>
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives">归档</a>
        
          <a class="main-nav-link" href="/categories">分类</a>
        
          <a class="main-nav-link" href="/tags">标签</a>
        
          <a class="main-nav-link" href="/about">关于</a>
        
      </nav>
      
    </div>
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">再读斋</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">MICHAEL</a>
        </h2>
      
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Android动画之Interpolator" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/31/Android动画之Interpolator/" class="article-date">
  <time datetime="2016-03-31T13:47:19.000Z" itemprop="datePublished">2016-03-31 21:47:19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Android/">Android</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Android动画之Interpolator
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>Interpolator可以翻译成插值器。Android中interpolator的最底层接口如下:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> android.animation;</div><div class="line"> </div><div class="line"><span class="comment">/**</span></div><div class="line"> * 时间插值器定义了一个动画的变化率。</div><div class="line"> * 这让动画让非线性的移动轨迹，例如加速和减速。</div><div class="line"> * &lt;hr/&gt;</div><div class="line"> * A time interpolator defines the rate of change of an animation. This allows animations</div><div class="line"> * to have non-linear motion, such as acceleration and deceleration.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">TimeInterpolator</span> </span>&#123;</div><div class="line"> </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 将动画已经消耗的时间的分数映射到一个表示插值的分数。</div><div class="line">     * 然后将插值与动画的变化值相乘来推导出当前已经过去的动画时间的动画变化量。</div><div class="line">     * &lt;hr/&gt;</div><div class="line">     * Maps a value representing the elapsed fraction of an animation to a value that represents</div><div class="line">     * the interpolated fraction. This interpolated value is then multiplied by the change in</div><div class="line">     * value of an animation to derive the animated value at the current elapsed animation time.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> input  一个0到1.0表示动画当前点的值，0表示开头。1表示结尾&lt;br/&gt; A value between 0 and 1.0 indicating our current point</div><div class="line">     *        in the animation where 0 represents the start and 1.0 represents</div><div class="line">     *        the end</div><div class="line">     * <span class="doctag">@return</span>   插值。它的值可以大于1来超出目标值，也小于0来空破底线。</div><div class="line">     *         interpolators which overshoot their targets, or less than 0 for</div><div class="line">     *         interpolators that undershoot their targets.</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">float</span> <span class="title">getInterpolation</span><span class="params">(<span class="keyword">float</span> input)</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>TimeInterpolator是在Android API11加入，之前的类叫Interpolator。现在Interpolator继承了TimeInterpolator</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> android.view.animation;</div><div class="line"> </div><div class="line"><span class="keyword">import</span> android.animation.TimeInterpolator;</div><div class="line"> </div><div class="line"><span class="comment">/**</span></div><div class="line"> * </div><div class="line"> * 一个定义动画变化率的插值器。</div><div class="line"> * 它允许对基本的（如透明，缩放，平移，旋转）进行加速，减速，重复等动画效果</div><div class="line"> * &lt;hr/&gt;</div><div class="line"> * An interpolator defines the rate of change of an animation. This allows</div><div class="line"> * the basic animation effects (alpha, scale, translate, rotate) to be</div><div class="line"> * accelerated, decelerated, repeated, etc.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Interpolator</span> <span class="keyword">extends</span> <span class="title">TimeInterpolator</span> </span>&#123;</div><div class="line">    <span class="comment">// A new interface, TimeInterpolator, was introduced for the new android.animation</span></div><div class="line">    <span class="comment">// package. This older Interpolator interface extends TimeInterpolator so that users of</span></div><div class="line">    <span class="comment">// the new Animator-based animations can use either the old Interpolator implementations or</span></div><div class="line">    <span class="comment">// new classes that implement TimeInterpolator directly.</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="插值器分析"><a href="#插值器分析" class="headerlink" title="插值器分析"></a>插值器分析</h2><h3 id="AccelerateInterpolator-加速插值器"><a href="#AccelerateInterpolator-加速插值器" class="headerlink" title="AccelerateInterpolator  加速插值器"></a>AccelerateInterpolator  加速插值器</h3><p>效果：在动画开始的地方速率改变比较慢，然后开始加速</p>
<p>源码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> android.view.animation;</div><div class="line"> </div><div class="line"><span class="keyword">import</span> android.content.Context;</div><div class="line"><span class="keyword">import</span> android.content.res.TypedArray;</div><div class="line"><span class="keyword">import</span> android.util.AttributeSet;</div><div class="line"> </div><div class="line"><span class="comment">/**</span></div><div class="line"> * </div><div class="line"> * 一个开始很慢然后不断加速的插值器。</div><div class="line"> * &lt;hr/&gt;</div><div class="line"> * An interpolator where the rate of change starts out slowly and</div><div class="line"> * and then accelerates.</div><div class="line"> *</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccelerateInterpolator</span> <span class="keyword">implements</span> <span class="title">Interpolator</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">float</span> mFactor;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">double</span> mDoubleFactor;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AccelerateInterpolator</span><span class="params">()</span> </span>&#123;</div><div class="line">        mFactor = <span class="number">1.0f</span>;</div><div class="line">        mDoubleFactor = <span class="number">2.0</span>;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Constructor</div><div class="line">     * </div><div class="line">     * <span class="doctag">@param</span> factor </div><div class="line">     *     动画的快慢度。将factor设置为1.0f会产生一条y=x^2的抛物线。</div><div class="line">增加factor到1.0f之后为加大这种渐入效果（也就是说它开头更加慢，结尾更加快）</div><div class="line">     *   &lt;br/&gt;Degree to which the animation should be eased. Seting</div><div class="line">     *        factor to 1.0f produces a y=x^2 parabola（抛物线）. Increasing factor above</div><div class="line">     *        1.0f  exaggerates the ease-in effect (i.e., it starts even</div><div class="line">     *        slower and ends evens faster)</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AccelerateInterpolator</span><span class="params">(<span class="keyword">float</span> factor)</span> </span>&#123;</div><div class="line">        mFactor = factor;</div><div class="line">        mDoubleFactor = <span class="number">2</span> * mFactor;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AccelerateInterpolator</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        TypedArray a =</div><div class="line">                context.obtainStyledAttributes(attrs, com.android.internal.R.styleable.AccelerateInterpolator);</div><div class="line"> </div><div class="line">        mFactor = a.getFloat(com.android.internal.R.styleable.AccelerateInterpolator_factor, <span class="number">1.0f</span>);</div><div class="line">        mDoubleFactor = <span class="number">2</span> * mFactor;</div><div class="line"> </div><div class="line">        a.recycle();</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getInterpolation</span><span class="params">(<span class="keyword">float</span> input)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (mFactor == <span class="number">1.0f</span>) &#123;</div><div class="line">            <span class="keyword">return</span> input * input;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">return</span> (<span class="keyword">float</span>)Math.pow(input, mDoubleFactor);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>根据getInterpolation方法可知加速度的大小由参数mFactor决定。<br>当mFactor值为1.0f时，动画加速轨迹相对于一条y=x^2的抛物线。如下图</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/Interpolator-AccelerateInterpolator_1.png" alt=""></p>
<p>当mFactor不为1时，轨迹曲线是y=x^(2 * mFactor)(0 &lt; x &lt;= 1)的曲线。<br>示例：当mFractor为4时，插值器的加速轨迹曲线如下图:</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/Interpolator-AccelerateInterpolator_2.png" alt=""></p>
<p>如果你在使用AccelerateInterpolator，想要那种一开始很慢，然后突然就很快的加速的动画效果的话，就将mFractor的值设置大点。</p>
<h3 id="DecelerateInterpolator减速插值器"><a href="#DecelerateInterpolator减速插值器" class="headerlink" title="DecelerateInterpolator减速插值器"></a>DecelerateInterpolator减速插值器</h3><p>效果：在动画开始的地方速率改变比较慢，然后开始加速</p>
<p>源代码如下:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> android.view.animation;</div><div class="line"> </div><div class="line"><span class="keyword">import</span> android.content.Context;</div><div class="line"><span class="keyword">import</span> android.content.res.TypedArray;</div><div class="line"><span class="keyword">import</span> android.util.AttributeSet;</div><div class="line"> </div><div class="line"><span class="comment">/**</span></div><div class="line"> * 一个开始比较快然后减速的插值器</div><div class="line"> * &lt;hr/&gt;</div><div class="line"> * An interpolator where the rate of change starts out quickly and</div><div class="line"> * and then decelerates.</div><div class="line"> *</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DecelerateInterpolator</span> <span class="keyword">implements</span> <span class="title">Interpolator</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DecelerateInterpolator</span><span class="params">()</span> </span>&#123;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Constructor</div><div class="line">     * </div><div class="line">     * <span class="doctag">@param</span> factor</div><div class="line">     *        动画的快慢度。将factor值设置为1.0f时将产生一条从上向下的y=x^2抛物线。</div><div class="line">     *        增加factor到1.0f以上将使渐入的效果增强（也就是说，开头更快，结尾更慢）</div><div class="line">     *        &lt;br/&gt;</div><div class="line">     *        Degree to which the animation should be eased. Setting factor to 1.0f produces</div><div class="line">     *        an upside-down y=x^2 parabola. Increasing factor above 1.0f makes exaggerates the</div><div class="line">     *        ease-out effect (i.e., it starts even faster and ends evens slower)</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DecelerateInterpolator</span><span class="params">(<span class="keyword">float</span> factor)</span> </span>&#123;</div><div class="line">        mFactor = factor;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DecelerateInterpolator</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        TypedArray a =</div><div class="line">                context.obtainStyledAttributes(attrs, com.android.internal.R.styleable.DecelerateInterpolator);</div><div class="line"> </div><div class="line">        mFactor = a.getFloat(com.android.internal.R.styleable.DecelerateInterpolator_factor, <span class="number">1.0f</span>);</div><div class="line"> </div><div class="line">        a.recycle();</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getInterpolation</span><span class="params">(<span class="keyword">float</span> input)</span> </span>&#123;</div><div class="line">        <span class="keyword">float</span> result;</div><div class="line">        <span class="keyword">if</span> (mFactor == <span class="number">1.0f</span>) &#123;</div><div class="line">            result = (<span class="number">1.0f</span> - ((<span class="number">1.0f</span> - input) * (<span class="number">1.0f</span> - input)));</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            result = (<span class="keyword">float</span>)(<span class="number">1.0f</span> - Math.pow((<span class="number">1.0f</span> - input), <span class="number">2</span> * mFactor));</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> result;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span> mFactor = <span class="number">1.0f</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>根据getInterpolation方法可知加速度的大小由参数mFactor决定。<br>当mFactor为1.0f时，它减速的轨迹函数为y=1-(1 - X)^2;如下图</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/Interpolator-DecelerateInterpolator_1.png" alt=""></p>
<p>当mFactor不为1.0f时，它减速的轨迹函数为:y=1.0 - (1.0 -x )^(2 * mFactor)。<br>当mFactor增大到4时，曲线轨迹如下图所示：</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/Interpolator-DecelerateInterpolator_2.png" alt=""></p>
<h3 id="AccelerateDecelerateInterpolator-加速减速插值器"><a href="#AccelerateDecelerateInterpolator-加速减速插值器" class="headerlink" title="AccelerateDecelerateInterpolator  加速减速插值器"></a>AccelerateDecelerateInterpolator  加速减速插值器</h3><p>效果：动画开始与结束的地方速率改变比较慢，在中间的时候加速</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> android.view.animation;</div><div class="line"> </div><div class="line"><span class="keyword">import</span> android.content.Context;</div><div class="line"><span class="keyword">import</span> android.util.AttributeSet;</div><div class="line"> </div><div class="line"><span class="comment">/**</span></div><div class="line"> * 一个变化率开始慢从中间后开始变快。</div><div class="line"> * &lt;hr/&gt;</div><div class="line"> * An interpolator where the rate of change starts and ends slowly but</div><div class="line"> * accelerates through the middle.</div><div class="line"> * </div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccelerateDecelerateInterpolator</span> <span class="keyword">implements</span> <span class="title">Interpolator</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AccelerateDecelerateInterpolator</span><span class="params">()</span> </span>&#123;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="meta">@SuppressWarnings</span>(&#123;<span class="string">"UnusedDeclaration"</span>&#125;)</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AccelerateDecelerateInterpolator</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getInterpolation</span><span class="params">(<span class="keyword">float</span> input)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> (<span class="keyword">float</span>)(Math.cos((input + <span class="number">1</span>) * Math.PI) / <span class="number">2.0f</span>) + <span class="number">0.5f</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>根据getInterpolation方法可以得出其变化曲线如下：</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/Interpolator-AccelerateDecelerateInterpolator.png" alt=""></p>
<h3 id="LinearInterpolator-线性插值器"><a href="#LinearInterpolator-线性插值器" class="headerlink" title="LinearInterpolator 线性插值器"></a>LinearInterpolator 线性插值器</h3><p>效果:动画按常速率变化</p>
<p>源代码如下:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * An interpolator where the rate of change is constant</div><div class="line"> *</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinearInterpolator</span> <span class="keyword">implements</span> <span class="title">Interpolator</span> </span>&#123;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LinearInterpolator</span><span class="params">()</span> </span>&#123;</div><div class="line">    &#125;</div><div class="line">     </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LinearInterpolator</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">    &#125;</div><div class="line">     </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getInterpolation</span><span class="params">(<span class="keyword">float</span> input)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> input;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="BounceInterpolator-弹跳插值器"><a href="#BounceInterpolator-弹跳插值器" class="headerlink" title="BounceInterpolator 弹跳插值器"></a>BounceInterpolator 弹跳插值器</h3><p>效果:动画结束的时候弹起</p>
<p>源代码如下:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> android.view.animation;</div><div class="line"> </div><div class="line"><span class="keyword">import</span> android.content.Context;</div><div class="line"><span class="keyword">import</span> android.util.AttributeSet;</div><div class="line"> </div><div class="line"><span class="comment">/**</span></div><div class="line"> * 这个插值器的插值在后面呈弹跳状态。</div><div class="line"> * An interpolator where the change bounces at the end.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BounceInterpolator</span> <span class="keyword">implements</span> <span class="title">Interpolator</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BounceInterpolator</span><span class="params">()</span> </span>&#123;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="meta">@SuppressWarnings</span>(&#123;<span class="string">"UnusedDeclaration"</span>&#125;)</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BounceInterpolator</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">float</span> <span class="title">bounce</span><span class="params">(<span class="keyword">float</span> t)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> t * t * <span class="number">8.0f</span>;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getInterpolation</span><span class="params">(<span class="keyword">float</span> t)</span> </span>&#123;</div><div class="line">        <span class="comment">// _b(t) = t * t * 8</span></div><div class="line">        <span class="comment">// bs(t) = _b(t) for t &lt; 0.3535</span></div><div class="line">        <span class="comment">// bs(t) = _b(t - 0.54719) + 0.7 for t &lt; 0.7408</span></div><div class="line">        <span class="comment">// bs(t) = _b(t - 0.8526) + 0.9 for t &lt; 0.9644</span></div><div class="line">        <span class="comment">// bs(t) = _b(t - 1.0435) + 0.95 for t &lt;= 1.0</span></div><div class="line">        <span class="comment">// b(t) = bs(t * 1.1226)</span></div><div class="line">        t *= <span class="number">1.1226f</span>;</div><div class="line">        <span class="keyword">if</span> (t &lt; <span class="number">0.3535f</span>) <span class="keyword">return</span> bounce(t);</div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (t &lt; <span class="number">0.7408f</span>) <span class="keyword">return</span> bounce(t - <span class="number">0.54719f</span>) + <span class="number">0.7f</span>;</div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (t &lt; <span class="number">0.9644f</span>) <span class="keyword">return</span> bounce(t - <span class="number">0.8526f</span>) + <span class="number">0.9f</span>;</div><div class="line">        <span class="keyword">else</span> <span class="keyword">return</span> bounce(t - <span class="number">1.0435f</span>) + <span class="number">0.95f</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>根据getInterpolation方法得到以下插值曲线图：</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/Interpolator-BounceInterpolator.png" alt=""></p>
<h3 id="AnticipateInterpolator-回荡秋千插值器"><a href="#AnticipateInterpolator-回荡秋千插值器" class="headerlink" title="AnticipateInterpolator 回荡秋千插值器"></a>AnticipateInterpolator 回荡秋千插值器</h3><p>效果：开始的时候向后，然后向前甩</p>
<p>源代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> android.view.animation;</div><div class="line"> </div><div class="line"><span class="keyword">import</span> android.content.Context;</div><div class="line"><span class="keyword">import</span> android.content.res.TypedArray;</div><div class="line"><span class="keyword">import</span> android.util.AttributeSet;</div><div class="line"> </div><div class="line"><span class="comment">/**</span></div><div class="line"> * 一个开始向后荡，然后向前荡的插值器。</div><div class="line"> * &lt;hr/&gt;</div><div class="line"> * An interpolator where the change starts backward then flings forward.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnticipateInterpolator</span> <span class="keyword">implements</span> <span class="title">Interpolator</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">float</span> mTension;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AnticipateInterpolator</span><span class="params">()</span> </span>&#123;</div><div class="line">        mTension = <span class="number">2.0f</span>;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * <span class="doctag">@param</span> tension </div><div class="line">     *  绷紧程度，当绷紧程序为0.0f时，也就没有了反向作用力。插值器将退化成一个y=x^3的加速插值器。</div><div class="line">     * &lt;br/&gt;</div><div class="line">     * Amount of anticipation. When tension equals 0.0f, there is</div><div class="line">     *                no anticipation and the interpolator becomes a simple</div><div class="line">     *                acceleration interpolator.</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AnticipateInterpolator</span><span class="params">(<span class="keyword">float</span> tension)</span> </span>&#123;</div><div class="line">        mTension = tension;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AnticipateInterpolator</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        TypedArray a = context.obtainStyledAttributes(attrs,</div><div class="line">                com.android.internal.R.styleable.AnticipateInterpolator);</div><div class="line"> </div><div class="line">        mTension =</div><div class="line">                a.getFloat(com.android.internal.R.styleable.AnticipateInterpolator_tension, <span class="number">2.0f</span>);</div><div class="line"> </div><div class="line">        a.recycle();</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getInterpolation</span><span class="params">(<span class="keyword">float</span> t)</span> </span>&#123;</div><div class="line">        <span class="comment">// a(t) = t * t * ((tension + 1) * t - tension)</span></div><div class="line">        <span class="keyword">return</span> t * t * (((mTension + <span class="number">1</span>) * t) - mTension);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>根据getInterpolation方法：</p>
<p>当tension为默认值2时，曲线图如下：</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/Interpolator-AnticipateInterpolator_1.png" alt=""></p>
<p>当tension为4时，曲线图如下：</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/Interpolator-AnticipateInterpolator_2.png" alt=""></p>
<h3 id="AnticipateOvershootInterpolator"><a href="#AnticipateOvershootInterpolator" class="headerlink" title="AnticipateOvershootInterpolator"></a>AnticipateOvershootInterpolator</h3><p>效果：开始的时候向后，然后向前甩一定值后 返回最后的值</p>
<p>源代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> android.view.animation;</div><div class="line"> </div><div class="line"><span class="keyword">import</span> android.content.Context;</div><div class="line"><span class="keyword">import</span> android.content.res.TypedArray;</div><div class="line"><span class="keyword">import</span> android.util.AttributeSet;</div><div class="line"> </div><div class="line"><span class="comment">/**</span></div><div class="line"> * 一个插值器它开始向上推，然后向下荡，荡过最低线。然后再回到最低线。</div><div class="line"> * &lt;hr/&gt;</div><div class="line"> * An interpolator where the change starts backward then flings forward and overshoots</div><div class="line"> * the target value and finally goes back to the final value.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnticipateOvershootInterpolator</span> <span class="keyword">implements</span> <span class="title">Interpolator</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">float</span> mTension;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AnticipateOvershootInterpolator</span><span class="params">()</span> </span>&#123;</div><div class="line">        mTension = <span class="number">2.0f</span> * <span class="number">1.5f</span>;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * <span class="doctag">@param</span> tension </div><div class="line">     *  anticipation/overshoot的比值。当和tension值为0.0f时，</div><div class="line">     *  也就没有anticipation/overshoot的比值了，插值器退化为一个加速/减速插值器。</div><div class="line">     *  &lt;br/&gt;</div><div class="line">     * Amount of anticipation/overshoot. When tension equals 0.0f,</div><div class="line">     *                there is no anticipation/overshoot and the interpolator becomes</div><div class="line">     *                a simple acceleration/deceleration interpolator.</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AnticipateOvershootInterpolator</span><span class="params">(<span class="keyword">float</span> tension)</span> </span>&#123;</div><div class="line">        mTension = tension * <span class="number">1.5f</span>;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * <span class="doctag">@param</span> tension Amount of anticipation/overshoot. When tension equals 0.0f,</div><div class="line">     *                there is no anticipation/overshoot and the interpolator becomes</div><div class="line">     *                a simple acceleration/deceleration interpolator.</div><div class="line">     * <span class="doctag">@param</span> extraTension </div><div class="line">     * 乘以tension的值。例如，在上面构造函数中extraTension的值为1.5f</div><div class="line">     * &lt;br/&gt;</div><div class="line">     * Amount by which to multiply the tension. For instance,</div><div class="line">     *                     to get the same overshoot as an OvershootInterpolator with</div><div class="line">     *                     a tension of 2.0f, you would use an extraTension of 1.5f.</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AnticipateOvershootInterpolator</span><span class="params">(<span class="keyword">float</span> tension, <span class="keyword">float</span> extraTension)</span> </span>&#123;</div><div class="line">        mTension = tension * extraTension;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AnticipateOvershootInterpolator</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        TypedArray a = context.obtainStyledAttributes(attrs, AnticipateOvershootInterpolator);</div><div class="line"> </div><div class="line">        mTension = a.getFloat(AnticipateOvershootInterpolator_tension, <span class="number">2.0f</span>) *</div><div class="line">                a.getFloat(AnticipateOvershootInterpolator_extraTension, <span class="number">1.5f</span>);</div><div class="line"> </div><div class="line">        a.recycle();</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">float</span> <span class="title">a</span><span class="params">(<span class="keyword">float</span> t, <span class="keyword">float</span> s)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> t * t * (((s + <span class="number">1</span>) * t) - s);</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">float</span> <span class="title">o</span><span class="params">(<span class="keyword">float</span> t, <span class="keyword">float</span> s)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> t * t * (((s + <span class="number">1</span>) * t) + s);</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getInterpolation</span><span class="params">(<span class="keyword">float</span> t)</span> </span>&#123;</div><div class="line">        <span class="comment">// a(t, s) = t * t * ((s + 1) * t - s)</span></div><div class="line">                <span class="comment">// o(t, s) = t * t * ((s + 1) * t + s)</span></div><div class="line">        <span class="comment">// f(t) = 0.5 * a(t * 2, tension * extraTension), when t &lt; 0.5</span></div><div class="line">        <span class="comment">// f(t) = 0.5 * (o(t * 2 - 2, tension * extraTension) + 2), when t &lt;= 1.0</span></div><div class="line">        <span class="keyword">if</span> (t &lt; <span class="number">0.5f</span>) <span class="keyword">return</span> <span class="number">0.5f</span> * a(t * <span class="number">2.0f</span>, mTension);</div><div class="line">        <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0.5f</span> * (o((t * <span class="number">2.0f</span>) - <span class="number">2.0f</span>, mTension) + <span class="number">2.0f</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>当tension为默认值时，曲线图为：</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/Interpolator-AnticipateOvershootInterpolator.png" alt=""></p>
<h3 id="CycleInterpolator-正弦周期变化插值器"><a href="#CycleInterpolator-正弦周期变化插值器" class="headerlink" title="CycleInterpolator 正弦周期变化插值器"></a>CycleInterpolator 正弦周期变化插值器</h3><p> 效果：动画循环播放特定的次数，速率改变沿着正弦曲线</p>
<p>源代码为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> android.view.animation;</div><div class="line"> </div><div class="line"><span class="keyword">import</span> android.content.Context;</div><div class="line"><span class="keyword">import</span> android.content.res.TypedArray;</div><div class="line"><span class="keyword">import</span> android.util.AttributeSet;</div><div class="line"> </div><div class="line"><span class="comment">/**</span></div><div class="line"> * </div><div class="line"> * 以指定的周期重复动画。变化率曲线为正弦。</div><div class="line"> * &lt;hr/&gt;</div><div class="line"> * Repeats the animation for a specified number of cycles（周期）. The</div><div class="line"> * rate of change follows a sinusoidal（正弦） pattern.</div><div class="line"> *</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CycleInterpolator</span> <span class="keyword">implements</span> <span class="title">Interpolator</span> </span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * </div><div class="line">     * <span class="doctag">@param</span> cycles 要重复的周期数</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CycleInterpolator</span><span class="params">(<span class="keyword">float</span> cycles)</span> </span>&#123;</div><div class="line">        mCycles = cycles;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CycleInterpolator</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        TypedArray a =</div><div class="line">                context.obtainStyledAttributes(attrs, com.android.internal.R.styleable.CycleInterpolator);</div><div class="line"> </div><div class="line">        mCycles = a.getFloat(com.android.internal.R.styleable.CycleInterpolator_cycles, <span class="number">1.0f</span>);</div><div class="line"> </div><div class="line">        a.recycle();</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getInterpolation</span><span class="params">(<span class="keyword">float</span> input)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> (<span class="keyword">float</span>)(Math.sin(<span class="number">2</span> * mCycles * Math.PI * input));</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span> mCycles;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>当cycle值为1时，即变化一周时，曲线图如下：</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/Interpolator-CycleInterpolator%20png.png" alt=""></p>
<h3 id="OvershootInterpolator"><a href="#OvershootInterpolator" class="headerlink" title="OvershootInterpolator"></a>OvershootInterpolator</h3><p>效果：向前甩一定值后再回到原来位置</p>
<p>源代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> android.view.animation;</div><div class="line"> </div><div class="line"><span class="keyword">import</span> android.content.Context;</div><div class="line"><span class="keyword">import</span> android.content.res.TypedArray;</div><div class="line"><span class="keyword">import</span> android.util.AttributeSet;</div><div class="line"> </div><div class="line"><span class="comment">/**</span></div><div class="line"> * An interpolator where the change flings forward and overshoots the last value</div><div class="line"> * then comes back.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OvershootInterpolator</span> <span class="keyword">implements</span> <span class="title">Interpolator</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">float</span> mTension;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">OvershootInterpolator</span><span class="params">()</span> </span>&#123;</div><div class="line">        mTension = <span class="number">2.0f</span>;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * <span class="doctag">@param</span> tension Amount of overshoot. When tension equals 0.0f, there is</div><div class="line">     *                no overshoot and the interpolator becomes a simple</div><div class="line">     *                deceleration interpolator.</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">OvershootInterpolator</span><span class="params">(<span class="keyword">float</span> tension)</span> </span>&#123;</div><div class="line">        mTension = tension;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">OvershootInterpolator</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        TypedArray a = context.obtainStyledAttributes(attrs,</div><div class="line">                com.android.internal.R.styleable.OvershootInterpolator);</div><div class="line"> </div><div class="line">        mTension =</div><div class="line">                a.getFloat(com.android.internal.R.styleable.OvershootInterpolator_tension, <span class="number">2.0f</span>);</div><div class="line"> </div><div class="line">        a.recycle();</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getInterpolation</span><span class="params">(<span class="keyword">float</span> t)</span> </span>&#123;</div><div class="line">        <span class="comment">// _o(t) = t * t * ((tension + 1) * t + tension)</span></div><div class="line">        <span class="comment">// o(t) = _o(t - 1) + 1</span></div><div class="line">        t -= <span class="number">1.0f</span>;</div><div class="line">        <span class="keyword">return</span> (t * t * (((mTension + <span class="number">1</span>) * t) + mTension)) + <span class="number">1.0f</span>;</div><div class="line">        <span class="comment">//plot &#123;(x-1)(x-1)((tension+1)(x-1)+tension)+1,(0&lt;x&lt;=1)&#125;</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>当tension为默认值2时，曲线图如下：</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/Interpolator-OvershootInterpolator%20_1.png" alt=""></p>
<p>当tension的值为4时，曲线图如下：</p>
<p><img src="http://7xs7a3.com1.z0.glb.clouddn.com/Interpolator-OvershootInterpolator_3.png" alt=""></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://liuguoquan727.github.io/2016/03/31/Android动画之Interpolator/" data-id="cj6epj8sq001oqm19qgztp8e1" class="article-share-link">分享</a>
      
        <a href="http://liuguoquan727.github.io/2016/03/31/Android动画之Interpolator/#ds-thread" class="article-comment-link">留言</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android动画/">Android动画</a></li></ul>

    </footer>
  </div>
  
    
 <script src="/jquery/jquery.min.js"></script>
  <div id="random_posts">
    <h2>推荐文章</h2>
    <div class="random_posts_ul">
      <script>
          var random_count =4
          var site = {BASE_URI:'/'};
          function load_random_posts(obj) {
              var arr=site.posts;
              if (!obj) return;
              // var count = $(obj).attr('data-count') || 6;
              for (var i, tmp, n = arr.length; n; i = Math.floor(Math.random() * n), tmp = arr[--n], arr[n] = arr[i], arr[i] = tmp);
              arr = arr.slice(0, random_count);
              var html = '<ul>';
            
              for(var j=0;j<arr.length;j++){
                var item=arr[j];
                html += '<li><strong>' + 
                item.date + ':&nbsp;&nbsp;<a href="' + (site.BASE_URI+item.uri) + '">' + 
                (item.title || item.uri) + '</a></strong>';
                if(item.excerpt){
                  html +='<div class="post-excerpt">'+item.excerpt+'</div>';
                }
                html +='</li>';
                
              }
              $(obj).html(html + '</ul>');
          }
          $('.random_posts_ul').each(function () {
              var c = this;
              if (!site.posts || !site.posts.length){
                  $.getJSON(site.BASE_URI + 'js/posts.js',function(json){site.posts = json;load_random_posts(c)});
              } 
               else{
                load_random_posts(c);
              }
          });
      </script>
    </div>
  </div>

    
<nav id="article-nav">
  
    <a href="/2016/04/05/Java中final关键字详解/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">
        
          Java中final关键字详解
        
      </div>
    </a>
  
  
    <a href="/2016/03/18/读书札记/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">读书札记</div>
    </a>
  
</nav>

  
</article>
 
     
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2016/03/31/Android动画之Interpolator/"
           data-title="Android动画之Interpolator" data-url="http://liuguoquan727.github.io/2016/03/31/Android动画之Interpolator/">
      </div>
      
     
       
      <div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div>
    
       
      
      
  </div>
 
  

</section>
           
    <aside id="sidebar">
  
    

  
    
    <div class="widget-wrap">
    
      <div class="widget" id="toc-widget-fixed">
      
        <strong class="toc-title">文章目录</strong>
        <div class="toc-widget-list">
              <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#简介"><span class="toc-number">1.</span> <span class="toc-text">简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#插值器分析"><span class="toc-number">2.</span> <span class="toc-text">插值器分析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#AccelerateInterpolator-加速插值器"><span class="toc-number">2.1.</span> <span class="toc-text">AccelerateInterpolator  加速插值器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DecelerateInterpolator减速插值器"><span class="toc-number">2.2.</span> <span class="toc-text">DecelerateInterpolator减速插值器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AccelerateDecelerateInterpolator-加速减速插值器"><span class="toc-number">2.3.</span> <span class="toc-text">AccelerateDecelerateInterpolator  加速减速插值器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LinearInterpolator-线性插值器"><span class="toc-number">2.4.</span> <span class="toc-text">LinearInterpolator 线性插值器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#BounceInterpolator-弹跳插值器"><span class="toc-number">2.5.</span> <span class="toc-text">BounceInterpolator 弹跳插值器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AnticipateInterpolator-回荡秋千插值器"><span class="toc-number">2.6.</span> <span class="toc-text">AnticipateInterpolator 回荡秋千插值器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AnticipateOvershootInterpolator"><span class="toc-number">2.7.</span> <span class="toc-text">AnticipateOvershootInterpolator</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CycleInterpolator-正弦周期变化插值器"><span class="toc-number">2.8.</span> <span class="toc-text">CycleInterpolator 正弦周期变化插值器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#OvershootInterpolator"><span class="toc-number">2.9.</span> <span class="toc-text">OvershootInterpolator</span></a></li></ol></li></ol>
          </div>
      </div>
    </div>

  
    

  
    
  
    
  
    

  
    
  
    <!--微信公众号二维码-->


  
</aside>

      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-left">
      &copy; 2014 - 2017 刘涤生&nbsp;|&nbsp;
      主题 <a href="https://github.com/giscafer/hexo-theme-cafe/" target="_blank">Cafe</a>
    </div>
     <div id="footer-right">
      联系方式&nbsp;|&nbsp;michaelliu0727@gmail.com
    </div>
  </div>
</footer>
 <script src="/jquery/jquery.min.js"></script>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
    <a href="/categories" class="mobile-nav-link">分类</a>
  
    <a href="/tags" class="mobile-nav-link">标签</a>
  
    <a href="/about" class="mobile-nav-link">关于</a>
  
</nav>
    <img class="back-to-top-btn" src="/images/fly-to-top.png"/>
<script>
// Elevator script included on the page, already.
window.onload = function() {
  var elevator = new Elevator({
    selector:'.back-to-top-btn',
    element: document.querySelector('.back-to-top-btn'),
    duration: 1000 // milliseconds
  });
}
</script>
      







<!-- author:forvoid begin -->
<!-- author:forvoid begin -->

<!-- author:forvoid end -->

<!-- author:forvoid end -->


  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      })
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      })
    </script>
    <script type="text/javascript" src="https://cdn.rawgit.com/mathjax/MathJax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


 <script src="/js/is.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>
<script src="/js/elevator.js"></script>
  </div>
</body>
</html>